!function(a){"use strict";var b=function(a,c){b.modules||(b.modules={},b.payloads={}),b.payloads[a]=c,b.modules[a]=null},c=function(a,e){e=d(a,e);var f=b.modules[e];if(!f){f=b.payloads[e];var g={},h={id:e,exports:g},i=function(a){return c(e,a)},j=f(i,g,h);g=j||h.exports,b.modules[e]=g,delete b.payloads[e]}return f=b.modules[e]=g||f},d=function(a,b){if("."===b.charAt(0)){var c=a.split("/").slice(0,-1).join("/");b=c+"/"+b;for(var d;-1!==b.indexOf(".")&&d!==b;)d=b,b=b.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return b};"function"==typeof require&&(a.require=require);var e=b;e("cc/loader",function(b,c,d){var e=b("./cc");if("undefined"!=typeof Window){var f=document.getElementsByTagName("script");if(f&&f.length)for(var g,h=0;h<f.length;h++)if(!e.coffeeColliderPath&&(g=/^(.*\/)coffee-collider(?:-min)?\.js(\#.*)?$/.exec(f[h].src))){e.rootPath=g[1],e.coffeeColliderPath=g[0],e.coffeeColliderHash=g[2];break}"#iframe"===e.coffeeColliderHash?(e.opmode="iframe",e.context="client",b("./client/installer").install()):"#socket"===e.coffeeColliderHash?(e.opmode="socket",e.context="client",b("./client/installer").install()):(e.opmode="worker",e.context="exports",b("./exports/installer").install())}else"undefined"!=typeof WorkerGlobalScope?"#iframe"===location.hash?(e.opmode="iframe",e.context="server",b("./server/installer").install(),e.server.connect()):(e.opmode="worker",e.context="client/server",b("./client/installer").install(),b("./server/installer").install(),e.client.sendToServer=e.server.recvFromClient.bind(e.server),e.server.sendToClient=e.client.recvFromServer.bind(e.client),e.server.connect()):"undefined"!=typeof a.GLOBAL&&(e.opmode="socket",e.context="server",b("./server/installer").install(),d.exports=e.server.exports)}),e("cc/cc",function(a,b,c){function d(){}c.exports={version:"0",Object:d}}),e("cc/client/installer",function(a,b,c){var d=function(){a("./object").install(),a("./client").install(),a("./bop").install(),a("./uop").install(),a("./buffer").install(),a("./node").install(),a("./sched").install(),a("./scale").install(),a("./ugen/installer").install()};c.exports={install:d}}),e("cc/client/object",function(a,b,c){var d,e=a("./cc"),f=a("./fn"),g=a("./utils"),h=function(a,b){[e.Object,Array,Boolean,Date,Function,Number,String].forEach(function(c){f.definePrototypeProperty(c,a,b)})},i=function(){h("__plus__",function(){return+this}),h("__minus__",function(){return-this}),h("__add__",function(a){return this+a}),h("__sub__",function(a){return this-a}),h("__mul__",function(a){return this*a}),h("__div__",function(a){return this/a}),h("__mod__",function(a){return this%a}),h("__and__",function(a){return this&&a}),h("__or__",function(a){return this||a}),h("next",function(){return this}),h("to_i",function(){return 0|this}),h("to_f",function(){return+this}),h("to_s",function(){return this.toString()}),h("to_a",function(){return[this]}),f.definePrototypeProperty(String,"__mul__",function(a){if("number"==typeof a){for(var b=new Array(Math.max(0,a)),c=0;a>c;c++)b[c]=this;return b.join("")}return Array.isArray(a)?a.map(function(a){return this.__mul__(a)},this):this*a}),f.definePrototypeProperty(Function,"__mul__",function(a){if("function"==typeof a){var b=this,c=a;return function(){return b.call(null,c.apply(null,arguments))}}return this*a}),f.definePrototypeProperty(String,"__div__",function(a){return"number"==typeof a?g.clump(this.split(""),Math.ceil(this.length/a)).map(function(a){return a.join("")}):Array.isArray(a)?a.map(function(a){return this.__div__(a)},this):this/a}),f.definePrototypeProperty(String,"__mod__",function(a){return"number"==typeof a?g.clump(this.split(""),0|a).map(function(a){return a.join("")}):Array.isArray(a)?a.map(function(a){return this.__mod__(a)},this):this%a}),f.definePrototypeProperty(Number,"madd",f(function(a,b){return(new d).init(this,a,b)}).defaults("mul=1,add=0").multiCall().build()),f.definePrototypeProperty(Array,"madd",f(function(a,b){return g.flop([this,a,b]).map(function(a){var b=a[0],c=a[1],e=a[2];return(new d).init(b,c,e)})}).defaults("mul=1,add=0").multiCall().build()),f.definePrototypeProperty(Array,"to_i",function(){return this.map(function(a){return a.to_i()})}),f.definePrototypeProperty(Array,"to_f",function(){return this.map(function(a){return a.to_f()})}),f.definePrototypeProperty(Array,"to_s",function(){return this.map(function(a){return a.to_s()})}),f.definePrototypeProperty(Array,"to_a",function(){return this})};e.once("basic_ops.js",function(a){d=a.MulAdd}),c.exports={install:i}}),e("cc/client/cc",function(a,b,c){var d=a("../cc"),e=a("../common/emitter").Emitter;d.emit||e.bind(d),c.exports=d}),e("cc/common/emitter",function(a,b,c){var d=function(){function a(a){this.__context=a||this,this.__callbacks={}}return a.prototype.getListeners=function(a){return this.__callbacks[a]||(this.__callbacks[a]=[])},a.prototype.hasListeners=function(a){return this.getListeners(a).length>0},a.prototype.on=function(a,b){var c=this.getListeners(a);return-1===c.indexOf(b)&&c.push(b),this},a.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(d.__context,arguments)}var d=this;return c.callback=b,this.on(a,c),this},a.prototype.off=function(a,b){if(0===arguments.length)return this.__callbacks={},this;var c=this.getListeners(a);if(1===arguments.length)return c.splice(0),this;var d=c.indexOf(b);if(-1===d)for(var e=0,f=c.length;f>e;++e)if(c[e].callback===b){d=e;break}return-1!==d&&c.splice(d,1),this},a.prototype.emit=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=this.getListeners(a).slice(0),d=0,e=c.length;e>d;++d)c[d].apply(this.__context,b);return this},a.bind=function(b){return["getListeners","hasListeners","on","once","off","emit"].forEach(function(c){b[c]||(b[c]=a.prototype[c])}),a.call(b),b},a}();c.exports={Emitter:d}}),e("cc/client/fn",function(a,b,c){var d=a("./cc"),e=a("./utils"),f=[].slice,g=function(){function a(a){this.func=a,this.def=null,this.multi=!1}a.prototype.defaults=function(a){return this.def=a,this},a.prototype.multiCall=function(a){return this.multi=void 0===a?!0:!!a,this},a.prototype.build=function(){var a=this.func,d=[],g=[];this.def&&this.def.split(",").forEach(function(a){a=a.trim().split("="),d.push(a[0].trim()),g.push(a.length>1?+a[1].trim():void 0)});var h=a;return this.multi?h=this.def?function(){var h=f.call(arguments);return h=c(d,g,f.call(arguments)),b(h)?e.flop(h).map(function(b){return a.apply(this,b)},this):a.apply(this,h)}:function(){var c=f.call(arguments);return b(c)?e.flop(c).map(function(b){return a.apply(this,b)},this):a.apply(this,c)}:this.def&&(h=function(){var b=f.call(arguments);return b=c(d,g,f.call(arguments)),a.apply(this,b)}),h};var b=function(a){for(var b=0,c=a.length;c>b;++b)if(Array.isArray(a[b]))return!0;return!1},c=function(a,b,c){var d,f=b.slice();if(e.isDict(c[c.length-1])){d=c.pop();for(var g in d){var h=a.indexOf(g);-1!==h&&(f[h]=d[g])}}for(var i=0,j=Math.min(c.length,f.length);j>i;++i)f[i]=c[i];return d&&f.length<a.length-1&&f.push(d),f};return function(b){return new a(b)}}();g.sync=function(a){return function(){return d.client.timeline.push(this,a,f.call(arguments)),this}},g.definePrototypeProperty=function(a,b,c){Object.defineProperty(a.prototype,b,{configurable:!0,enumerable:!1,writable:!0,value:c})},c.exports=g}),e("cc/client/utils",function(a,b,c){var d=function(a){return!(!a||a.constructor!==Object)},e=function(a){var b=a.reduce(function(a,b){return Math.max(a,Array.isArray(b)?b.length:1)},0),c=new Array(b),d=a.length;if(d)for(var e=0;b>e;++e)for(var f=c[e]=new Array(d),g=0;d>g;++g)f[g]=Array.isArray(a[g])?a[g][e%a[g].length]:a[g];return c},f=function(){var a=function(b,c){for(var d=0,e=b.length;e>d;++d)Array.isArray(b[d])?c=a(b[d],c):c.push(b[d]);return c};return function(b){return a(b,[])}}(),g=function(a,b){for(var c=[],d=[],e=0,f=a.length;f>e;++e)d.push(a[e]),d.length>=b&&(c.push(d),d=[]);return d.length&&c.push(d),c};c.exports={isDict:d,flop:e,flatten:f,clump:g}}),e("cc/client/client",function(b,c,d){var e=b("./cc"),f=b("../common/extend"),g=b("../common/pack").pack,h=b("./sched").Timeline,i=b("./node"),j=b("./buffer"),k={},l=function(){function a(){this.klassName="SynthClient",this.sampleRate=0,this.channels=0,this.strmLength=0,this.bufLength=0,this.timeline=new h(this),this.rootNode=new i.Group,this.commandList=[],this.bufferRequestId=0,this.bufferRequestCallback={},this.phase=0}return a.prototype.sendToIF=function(){throw"should be overridden"},a.prototype.recvFromIF=function(a){var b=k[a[0]];b?b.call(this,a):this.sendToServer(a)},a.prototype.sendToServer=function(){throw"should be overridden"},a.prototype.recvFromServer=function(a){if(a instanceof Float32Array)return this.sendToIF(a),void 0;if(a){var b=k[a[0]];b?b.call(this,a):this.sendToIF(a)}},a.prototype.pushCommand=function(a){this.commandList.push(a)},a.prototype.play=function(a){this.timeline.play(),this.sendToServer(a)},a.prototype.pause=function(a){this.sendToServer(a)},a.prototype.reset=function(a){j.reset(),i.reset(),this.timeline.reset(),this.sendToServer(a)},a.prototype.requestBuffer=function(a,b){if("string"==typeof a&&"function"==typeof b){var c=this.bufferRequestId++;this.bufferRequestCallback[c]=b,this.sendToIF(["/buffer/request",a,c])}},a.prototype.process=function(){throw"should be overridden"},a}(),m=function(){function a(){l.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=1024,this.bufLength=64}return f(a,l),a.prototype.sendToIF=function(a){postMessage(a)},a.prototype.process=function(){this.timeline.process(),this.sendToServer(["/command",[this.commandList.splice(0)]])},a}(),n=function(){function a(){l.call(this);var a=this;this.sampleRate=44100,this.channels=2,this.strmLength=2048,this.bufLength=128,this.server=new Worker(e.coffeeColliderPath),this.server.onmessage=function(b){a.recvFromServer(b.data)},b("../common/console").receive(k)}return f(a,l),a.prototype.sendToServer=function(a){this.server.postMessage(a)},a.prototype.process=function(){for(var a=this.timeline,b=this.strmLength/this.bufLength,c=[],d=0;b--;)a.process(),d+=this.commandList.length,c.push(this.commandList.splice(0));0===d&&(c=0),this.sendToServer(["/command",c])},a}(),o=function(){function a(){l.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=128,this.socketPath=null}return f(a,l),a.prototype.openSocket=function(){var a=this,b=this.socket=new WebSocket(this.socketPath),c=[];b.binaryType="arraybuffer",b.onopen=function(){c.forEach(function(a){b.send(a)}),c=[]},b.onmessage=function(b){var c=b.data;return"string"!=typeof c?(a.sendToIF(new Float32Array(c)),void 0):(c=JSON.parse(c),c.cc?a.recvFromServer(c.cc):a.sendToIF(["/message",c]),void 0)},b.onclose=function(){},b.onerror=function(){},this.sendToServer=function(a){return a instanceof Float32Array?(b.readyState===WebSocket.OPEN&&b.send(a.buffer),void 0):(b.readyState===WebSocket.OPEN?b.send(JSON.stringify(a)):c.push(JSON.stringify(a)),void 0)}},a.prototype.closeSocket=function(){this.socket.close(),this.socket=null},a.prototype.process=function(){for(var a=this.timeline,b=this.strmLength/this.bufLength,c=[],d=0;b--;)a.process(),d+=this.commandList.length,c.push(this.commandList.splice(0));0===d&&(c=0),this.sendToServer(["/command",c])},a}();k["/connected"]=function(a){this.sendToIF(a)},k["/init"]=function(a){this.sampleRate=0|a[1],this.channels=0|a[2],this.sendToServer(a)},k["/play"]=function(a){this.play(a)},k["/pause"]=function(a){this.pause(a)},k["/reset"]=function(a){this.reset(a)},k["/process"]=function(){this.process()},k["/message"]=function(a){this.sendToServer(a)},k["/socket-open"]=function(){this.openSocket()},k["/socket-close"]=function(){this.closeSocket()},k["/execute"]=function(b){var c=b[1],d=b[2],e=b[3],f=b[4],h=b[5];e||this.reset(["/reset"]),a.DATA=f;var i=eval.call(a,d);h&&this.sendToIF(["/execute",c,g(i)])},k["/buffer/response"]=function(a){var b=a[1],c=a[2],d=this.bufferRequestCallback[c];d&&(d(b),delete this.bufferRequestCallback[c])},k["/importScripts"]=function(a){importScripts(a[1])},k["/n_end"]=function(a){var b=0|a[1],c=i.get(b);c&&c.emit("end")},k["/n_done"]=function(a){var b=0|a[1],c=a[2],d=i.get(b);d&&d.emit("done",c)};var p=function(a){var b=a.data;b instanceof Float32Array?e.client.sendToServer(b):e.client.recvFromIF(b)},q=function(){var b;switch(e.opmode){case"socket":b=new o,window.onmessage=function(a){a.ports[0].onmessage=p,b.sendToIF=function(b){a.ports[0].postMessage(b)},b.socketPath=a.data,window.onmessage=null};break;case"iframe":b=new n,window.onmessage=function(a){a.ports[0].onmessage=p,b.sendToIF=function(b){a.ports[0].postMessage(b)},window.onmessage=null};break;default:b=new m,a.onmessage=p}e.client=b};d.exports={install:q}}),e("cc/common/extend",function(a,b,c){var d=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c.exports=d}),e("cc/common/pack",function(a,b,c){var d=function(){var a=function(b,c){if(!b)return b;if(-1!==c.indexOf(b))return{klassName:"Circular"};if("function"==typeof b)return"[Function]";var d;if("object"==typeof b){if(b.buffer instanceof ArrayBuffer)return b;c.push(b),Array.isArray(b)?d=b.map(function(b){return a(b,c)}):(d={},Object.keys(b).forEach(function(e){"_"!==e.charAt(0)&&(d[e]=a(b[e],c))})),c.pop()}else d=b;return d};return function(b){return a(b,[])}}(),e=function(){var a=function(){},b=function(c){if(!c)return c;if("string"==typeof c)return"[Function]"===c?a:c;var d;if("object"==typeof c){if(c.buffer instanceof ArrayBuffer)return c;Array.isArray(c)?d=c.map(function(a){return b(a)}):(c.klassName&&/^[_a-z$][_a-z0-9$]*$/i.test(c.klassName)?(d=eval.call(null,"new (function "+c.klassName+"(){})"),delete c.klassName):d={},Object.keys(c).forEach(function(a){d[a]=b(c[a])}))}else d=c;return d};return function(a){return b(a)}}();c.exports={pack:d,unpack:e}}),e("cc/client/sched",function(b,c,d){var e=b("./cc"),f=b("./fn"),g=b("../common/extend"),h=b("../common/emitter").Emitter,i=[].slice,j=function(){function a(){this.klassName="Timeline",this.reset()}return a.prototype.play=function(){this.counterIncr=1e3*(e.client.bufLength/e.client.sampleRate)},a.prototype.pause=function(){},a.prototype.reset=function(){var a=new n(this);this._list=[a],this._stack=[a],this._globalTask=a},a.prototype.append=function(a){var b=this._list.indexOf(a);-1===b&&this._list.push(a)},a.prototype.remove=function(a){var b=this._list.indexOf(a);-1!==b&&this._list.splice(b,1)},a.prototype.push=function(a,b,c){var d=this._stack[this._stack.length-1];d._push(a,b,c)},a.prototype.process=function(){for(var a=this._list,b=this.counterIncr,c=0;c<a.length;++c)a[c]._process(b)},a}(),k=function(){function a(a){h.bind(this),this.klassName="Task",this.blocking=!0,this._timeline=a||e.client.timeline,this._context=new m(this),this._queue=[],this._bang=!1,this._index=0,this._prev=null,this._next=null}return g(a,e.Object),a.prototype.play=f.sync(function(){for(var a=this;null!==a._prev;)a=a._prev;a._timeline&&a._timeline.append(a),0===a._queue.length&&(a._bang=!0)}),a.prototype.pause=f.sync(function(){this._timeline&&this._timeline.remove(this),this._bang=!1}),a.prototype.stop=f.sync(function(){this._timeline&&this._timeline.remove(this),this._bang=!1,this._timeline=null,this.blocking=!1,this.emit("end"),this._next&&(this._next._prev=null,this._next.play(),this._next=null)}),a.prototype["do"]=function(a){var b=u["do"](a);return b._prev=this,this._next=b,b},a.prototype.loop=function(a){var b=u.loop(a);return b._prev=this,this._next=b,b},a.prototype.each=function(a,b){var c=u.each(a,b);return c._prev=this,this._next=c,c},a.prototype.timeout=function(a,b){var c=u.timeout(a,b);return c._prev=this,this._next=c,c},a.prototype.interval=function(a,b){var c=u.interval(a,b);return c._prev=this,this._next=c,c},a.prototype._push=function(a,b,c){switch(typeof a){case"function":this._queue.push([a,null,c]);break;case"number":this._queue.push(a);break;default:this._queue.push([b,a,c])}},a.prototype._done=function(){},a.prototype._process=function(a){var b=this._timeline,c=this._queue,d=!1;do{this._bang&&(b._stack.push(this),this._execute(),this._index+=1,b._stack.pop(),this._bang=!1);var e=0;a:for(;e<c.length;){var f=c[e];switch(typeof f){case"number":if(c[e]-=a,c[e]>0)break a;break;case"function":f();break;default:if(Array.isArray(f))f[0].apply(f[1],f[2]);else if(f instanceof l&&f.process(a),f.blocking)break a}e+=1}d=!1,e&&(c.splice(0,e),0===c.length&&(d=this._done()))}while(d)},a}(),l=function(){function a(a,b,c){this.time=a,this.list=b,this.callback=c,this.blocking=!0}return a.create=function(){var b=i.call(arguments),c=null;"function"==typeof b[b.length-1]&&(c=b.pop());var d=0,e=[];return b.forEach(function(a){a&&("number"==typeof a?a>d&&(d=a):"boolean"==typeof a.blocking&&e.push(a))}),new a(d,e,c)},a.prototype.process=function(a){this.time-=a;var b=this.list.some(function(a){return a.blocking});this.time<=0&&!b&&(this.blocking=!1,this.callback&&(this.callback(),delete this.callback))},a}(),m=function(){function a(a){this.klassName="TaskContext",this.wait=function(){a._queue.push(l.create.apply(null,arguments))},this.pause=function(){a.pause()},this.stop=function(){a.stop()}}return a}(),n=function(){function a(a){k.call(this,a),this.klassName="GlobalTask"}return g(a,k),a.prototype.play=function(){},a.prototype.pause=function(){},a.prototype.stop=function(){},a}(),o=function(){function a(a){k.call(this),this.func=a}return g(a,k),a.prototype._execute=function(){this.func.call(this._context,this._index)},a.prototype._done=function(){this.stop()},a}(),p=function(){function a(a){o.call(this,a)}return g(a,o),a.prototype._done=function(){this._bang=!0},a}(),q=function(){function a(a,b){k.call(this),this.list=a,this.func=b}return g(a,k),a.prototype._execute=function(){this._index<this.list.length&&this.func.call(this._context,this.list[this._index],this._index)},a.prototype._done=function(){this._index<this.list.length?this._bang=!0:this.stop()},a}(),r=function(){function a(a,b){k.call(this),a=Math.max(0,a),isNaN(a)&&(a=0),this.func=b,this._queue.push(a)}return g(a,k),a.prototype._execute=function(){this.func.call(this._context,this._index)},a.prototype._done=function(){return 0===this._index?(this._bang=!0,!0):(this.stop(),void 0)},a}(),s=function(){function a(a,b){r.call(this,a,b)}return g(a,r),a.prototype._done=function(){return this._bang=!0,!0},a}(),t=function(){function a(a){this.klassName="TaskBlock","number"!=typeof a&&(a=1),this._count=a,this.blocking=!0}return a.prototype.lock=f.sync(function(a){"number"!=typeof a&&(a=1),this._count+=a}),a.prototype.free=f.sync(function(a){"number"!=typeof a&&(a=1),this._count-=a,this._count<=0&&(this.blocking=!1)}),a}(),u=function(){};u["do"]=function(a){if("function"!=typeof a)throw new TypeError("Task.do: arguments[0] is not a Function.");return new o(a)},u.loop=function(a){if("function"!=typeof a)throw new TypeError("Task.loop: arguments[0] is not a Function.");return new p(a)},u.each=function(a,b){if(!Array.isArray(a))throw new TypeError("Task.each: arguments[0] is not an Array.");if("function"!=typeof b)throw new TypeError("Task.each: arguments[1] is not a Function.");return new q(a,b)},u.timeout=function(a,b){if("number"!=typeof a)throw new TypeError("Task.timeout: arguments[0] is not a Number.");if("function"!=typeof b)throw new TypeError("Task.timeout: arguments[1] is not a Function.");return new r(a,b)},u.interval=function(a,b){if("number"!=typeof a)throw new TypeError("Task.interval: arguments[0] is not a Number.");if("function"!=typeof b)throw new TypeError("Task.interval: arguments[1] is not a Function.");return new s(a,b)},u.block=function(){return new t};var v=function(){a.Task=u,a.wait=function(){var a=e.client.timeline._globalTask;a._queue.push(l.create.apply(null,arguments))}};d.exports={Timeline:j,GlobalTask:n,Task:k,TaskDo:o,TaskLoop:p,TaskEach:q,TaskTimeout:r,TaskInterval:s,TaskBlock:t,TaskInterface:u,install:v}}),e("cc/client/node",function(b,c,d){var e=b("./cc"),f=b("./fn"),g=b("../common/extend"),h=b("./utils"),i=b("./ugen/ugen"),j=b("../common/emitter").Emitter,k=[].slice,l={},m=function(){function a(){j.bind(this),this.klassName="Node",this.blocking=!0,this.nodeId=b++,l[this.nodeId]=this}var b=0;return g(a,e.Object),a.prototype.play=f.sync(function(){return e.client.pushCommand(["/n_run",this.nodeId,!0]),this}),a.prototype.pause=f.sync(function(){return e.client.pushCommand(["/n_run",this.nodeId,!1]),this}),a.prototype.stop=f.sync(function(){return e.client.pushCommand(["/n_free",this.nodeId]),this}),a}(),n=function(){function a(a,b){if(m.call(this),this.klassName="Group",a){var c=this,d=e.client.timeline;d.push(function(){e.client.pushCommand(["/g_new",c.nodeId,b,a.nodeId])})}}return g(a,m),a}(),o=function(){function a(a,b,c,d){if(m.call(this),this.klassName="Synth",this.params=c.specs.params,d=d||{},a){var f=this,g=e.client.timeline;g.push(function(){e.client.pushCommand(["/s_new",f.nodeId,b,a.nodeId,c._defId]),f._set(d)})}}return g(a,m),a.prototype._set=function(a){var b=this.params,c=[];h.isDict(a)?Object.keys(a).forEach(function(d){var e=a[d],f=b.names.indexOf(d);if(-1!==f){f=b.indices[f];var g=b.length[f];Array.isArray(e)?e.forEach(function(a,b){g>b&&("number"!=typeof a||isNaN(a)||c.push(f+b,a))},this):"number"!=typeof e||isNaN(e)||c.push(f,e)}},this):k.call(arguments).forEach(function(a,d){var e=b.indices[d],f=b.length[d];Array.isArray(a)?a.forEach(function(a,b){f>b&&("number"!=typeof a||isNaN(a)||c.push(e+b,a))},this):"number"!=typeof a||isNaN(a)||c.push(e,a)},this),c.length&&e.client.pushCommand(["/n_set",this.nodeId,c])},a.prototype.set=f.sync(a.prototype._set),a}(),p=function(){function a(a,d){this.klassName="SynthDef",this._defId=b++;var f=!1;if(d){if(/^[ a-zA-Z0-9_$,.=\-\[\]]+$/.test(d)&&(d=g(d),d&&(f=d.vals.every(function(a){return"number"==typeof a?!0:Array.isArray(a)?a.every(function(a){return"number"==typeof a}):void 0===a||null===a?!0:!1}))),!f)throw"UgenGraphFunc's arguments should be a constant number or an array that contains it."}else d={keys:[],vals:[]};var h=[];i.setSynthDef(function(a){h.push(a)});var j,k,l,m={names:[],indices:[],length:[],values:[]},n=[];for(j=0,k=d.vals.length;k>j;++j)l=Array.isArray(d.vals[j])?d.vals[j].length:1,m.names.push(d.keys[j]),m.indices.push(n.length),m.length.push(l),m.values=m.values.concat(d.vals[j]),n=n.concat(d.vals[j]);var o=[],p=new i.Control(1).init(n);Array.isArray(p)||(p=[p]);var q=p.slice();for(j=0;k>j;++j)Array.isArray(d.vals[j])?o.push(q.splice(0,d.vals[j].length)):o.push(q.shift());try{a.apply(null,o)}catch(r){throw r.toString()}finally{i.setSynthDef(null)}var s=[];h.forEach(function(a){a.inputs&&a.inputs.forEach(function(a){"number"==typeof a&&-1===s.indexOf(a)&&s.push(a)})}),s.sort();var t=c(h).filter(function(a){return!("number"==typeof a||a instanceof i.OutputProxy)}),u=t.map(function(a){var b=[];a.inputs&&a.inputs.forEach(function(a){var c=t.indexOf(a instanceof i.OutputProxy?a.inputs[0]:a),d=-1!==c?a.outputIndex:s.indexOf(a);b.push(c,d)});var c;return c=a instanceof i.MultiOutUGen?a.channels.map(function(a){return a.rate}):1===a.numOfOutputs?[a.rate]:[],[a.klassName,a.rate,0|a.specialIndex,b,c,a.tag]}),v={consts:s,defs:u,params:m};return this.specs=v,e.client.pushCommand(["/s_def",this._defId,JSON.stringify(v)]),this}var b=0;a.prototype.play=f(function(){var a,b,c,d=0;switch(a=arguments[d]instanceof m?arguments[d++]:e.client.rootNode,h.isDict(arguments[d])&&(b=arguments[d++]),c="string"==typeof arguments[d]?arguments[d]:"addToHead",b&&1===arguments.length&&(b.target instanceof m&&(a=b.target,delete b.target),"string"==typeof b.addAction&&(c=b.addAction,delete b.addAction)),c){case"addToHead":return r.head(a,this,b);case"addToTail":return r.tail(a,this,b);case"addBefore":return r.before(a,this,b);case"addAfter":return r.after(a,this,b);default:return r.head(a,this,b)}}).multiCall().build();var c=function(){var a=function(b,c,d){d.push(b);var e=c.indexOf(b);-1!==e&&c.splice(e,1),c.unshift(b),b.inputs&&b.inputs.forEach(function(b){a(b,c,d)})};return function(b){var c=[];return b.slice().forEach(function(d){d instanceof i.Out&&(c.push(d),d.inputs.forEach(function(d){a(d,b,c)}))}),b=b.filter(function(a){return-1!==c.indexOf(a)})}}(),d=function(a){for(var b=[],c=0,d=0,e=null,f=0,g=a.length;g>f;++f){var h=a.charAt(f);if(("\\"!==a.charAt(f-1)||"\\"===a.charAt(f-2))&&(('"'===h||"'"===h)&&(null===e?e=h:e===h&&(e=null)),!e))switch(h){case",":0===d&&(b.push(a.slice(c,f).trim()),c=f+1);break;case"[":d+=1;break;case"]":d-=1}}return c!==f&&b.push(a.slice(c,f).trim()),b},g=function(a){var b=[],c=[];if(a)try{d(a).forEach(function(a){var d,e,f=a.indexOf("=");-1===f?(d=a,e=void 0):(d=a.substr(0,f).trim(),e=JSON.parse(a.substr(f+1))),b.push(d),c.push(e)})}catch(e){return}return{keys:b,vals:c}};return a}(),q=function(){return new n};q.after=function(a){if(a=a||e.client.rootNode,!(a instanceof m))throw new TypeError("Group.after: arguments[0] is not a Node.");return new n(a,3)},q.before=function(a){if(a=a||e.client.rootNode,!(a instanceof m))throw new TypeError("Group.before: arguments[0] is not a Node.");return new n(a,2)},q.head=function(a){if(a=a||e.client.rootNode,!(a instanceof n))throw new TypeError("Group.head: arguments[0] is not a Group.");return new n(a,0)},q.tail=function(a){if(a=a||e.client.rootNode,!(a instanceof n))throw new TypeError("Group.tail: arguments[0] is not a Group.");return new n(a,1)},q.replace=function(a){if(!(a instanceof m))throw new TypeError("Group.replace: arguments[0] is not a Node.");return new n(a,4)};var r=function(){return new o};r.def=function(a,b){if("function"!=typeof a)throw new TypeError("Synth.def: arguments[0] is not a Function.");return new p(a,b)},r.after=function(){var a,b,c;if(arguments[0]instanceof p?(a=e.client.rootNode,b=arguments[0],c=arguments[1]||{}):arguments[1]instanceof p&&(a=arguments[0],b=arguments[1],c=arguments[2]||{}),!(a instanceof m))throw new TypeError("Synth.after: arguments[0] is not a Node.");if(!(b instanceof p))throw new TypeError("Synth.after: arguments[1] is not a SynthDef.");return new o(a,3,b,c)},r.before=function(){var a,b,c;if(arguments[0]instanceof p?(a=e.client.rootNode,b=arguments[0],c=arguments[1]||{}):arguments[1]instanceof p&&(a=arguments[0],b=arguments[1],c=arguments[2]||{}),!(a instanceof m))throw new TypeError("Synth.before: arguments[0] is not a Node.");if(!(b instanceof p))throw new TypeError("Synth.before: arguments[1] is not a SynthDef.");return new o(a,2,b,c)},r.head=function(){var a,b,c;if(arguments[0]instanceof p?(a=e.client.rootNode,b=arguments[0],c=arguments[1]||{}):arguments[1]instanceof p&&(a=arguments[0],b=arguments[1],c=arguments[2]||{}),!(a instanceof n))throw new TypeError("Synth.head: arguments[0] is not a Group.");if(!(b instanceof p))throw new TypeError("Synth.head: arguments[1] is not a SynthDef.");return new o(a,0,b,c)},r.tail=function(){var a,b,c;if(arguments[0]instanceof p?(a=e.client.rootNode,b=arguments[0],c=arguments[1]||{}):arguments[1]instanceof p&&(a=arguments[0],b=arguments[1],c=arguments[2]||{}),!(a instanceof n))throw new TypeError("Synth.tail: arguments[0] is not a Group.");if(!(b instanceof p))throw new TypeError("Synth.tail: arguments[1] is not a SynthDef.");return new o(a,1,b,c)},r.replace=function(a,b,c){if(!(a instanceof m))throw new TypeError("Synth.replace: arguments[0] is not a Node.");if(!(b instanceof p))throw new TypeError("Synth.replace: arguments[1] is not a SynthDef.");return new o(a,4,b,c)};var s=function(){l={}},t=function(a){return l[a]},u=function(){a.Group=q,a.Synth=r};d.exports={Node:m,Group:n,Synth:o,get:t,reset:s,install:u}}),e("cc/client/ugen/ugen",function(b,c,d){var e,f,g,h=b("../cc"),i=b("../fn"),j=b("../../common/extend"),k=[].slice,l=null,m=function(){function a(a){this.klassName=a,this.tag="",this.rate=2,this.signalRange=2,this.specialIndex=0,this.outputIndex=0,this.numOfInputs=0,this.numOfOutputs=1,this.inputs=[]}return j(a,h.Object),a.prototype.init=function(a){return this.rate=a,l&&l(this),this.inputs=k.call(arguments,1),this.numOfInputs=this.inputs.length,this},a.prototype.madd=i(function(a,b){return(new g).init(this,a,b)}).defaults("mul=1,add=0").multiCall().build(),a.prototype.range=i(function(a,b){var c,d;return 2===this.signalRange?(c=.5*(b-a),d=c+a):(c=b-a,d=a),(new g).init(this,c,d)}).defaults("lo=0,hi=1").multiCall().build(),a.prototype.unipolar=i(function(a){return this.range(0,a)}).defaults("mul=1").multiCall().build(),a.prototype.bipolar=i(function(a){return this.range(a.neg(),a)}).defaults("mul=1").multiCall().build(),a}(),n=function(){function a(a){m.call(this,a||"MultiOutUGen"),this.channels=null}return j(a,m),a.prototype.initOutputs=function(a,b){for(var c=new Array(a),d=0;a>d;++d)c[d]=new o(b,this,d);return this.channels=c,this.numOfOutputs=c.length,this.inputs=this.inputs.map(function(a){return a instanceof m||(a=+a,isNaN(a)&&(a=0)),a}),this.numOfInputs=this.inputs.length,1===a?c[0]:c},a}(),o=function(){function a(a,b,c){m.call(this,"OutputProxy"),this.init(a),this.inputs=[b],this.numOfOutputs=1,this.outputIndex=c}return j(a,m),a}(),p=function(){function a(a){n.call(this,"Control"),this.rate=a,this.values=null}return j(a,n),a.prototype.init=function(a){return m.prototype.init.apply(this,[this.rate].concat(a)),this.values=a.slice(),this.initOutputs(this.values.length,this.rate)},a}(),q=function(){function a(){m.call(this,"Out")}return j(a,m),a}(),r=function(a){function b(b,c){if(!(b instanceof m||"number"==typeof b))throw new TypeError("Out: arguments[0] should be an UGen or a number.");Array.isArray(c)||(c=[c]),c=c.filter(function(a){return 0!==a}),c.length&&m.prototype.init.apply(new q,[a,b].concat(c))}return function(a,c){return Array.isArray(a)?a.forEach(function(a){b(a,c)}):b(a,c),0}},s={ar:{defaults:"bus=0,channelsArray=0",ctor:r(2),multiCall:!1,Klass:null},kr:{defaults:"bus=0,channelsArray=0",ctor:r(1),multiCall:!1,Klass:null}},t={ar:{defaults:"bus=0,numChannels=1",ctor:function(a,b){return this.init.call(this,2),this.inputs=[a],this.initOutputs(b,this.rate)},Klass:n},kr:{defaults:"bus=0,numChannels=1",ctor:function(a,b){return this.init.call(this,1),this.inputs=[a],this.initOutputs(b,this.rate)},Klass:n}},u=function(a){l=a},v=function(){w("Out",s),w("In",t)},w=function(b,c){var d=a[b]=function(){return new m(b)};Object.keys(c).forEach(function(a){var e=c[a],f=e.defaults+",tag",g=e.ctor,h=e.multiCall;if(void 0===h&&(h=!0),null!==e.Klass){var j=e.Klass||m;d[a]=i(function(){var a=k.call(arguments,0,arguments.length-1),c=arguments[arguments.length-1],d=g.apply(new j(b),a);return null!==d&&void 0!==d&&(d.tag=c||""),d}).defaults(f).multiCall(h).build()}else d[a]=i(function(){var a=k.call(arguments,0,arguments.length-1),b=arguments[arguments.length-1],c=g.apply(null,a);return null!==c&&void 0!==c&&(c.tag=b||""),c}).defaults(f).multiCall(h).build()})};h.once("basic_ops.js",function(a){e=a.UnaryOpUGen,f=a.BinaryOpUGen,g=a.MulAdd}),d.exports={UGen:m,MultiOutUGen:n,OutputProxy:o,Control:p,Out:q,setSynthDef:u,register:w,install:v}}),e("cc/client/buffer",function(b,c,d){var e=b("./cc"),f=b("./fn"),g=b("../common/extend"),h=b("../common/emitter").Emitter,i={},j=function(){function a(){h.bind(this),this.klassName="Buffer",this.samples=null,this.numFrames=0,this.numChannels=0,this.sampleRate=0,this.blocking=!0,this._bufId=b++,e.client.pushCommand(["/b_new",this._bufId])}var b=0;return g(a,e.Object),a}(),k=function(a,b,c){if(!a)throw new Error("Buffer failed to decode an audio file.");b=Math.max(0,Math.min(0|b,a.numFrames)),c=Math.max(-1,Math.min(0|c,a.numFrames-b));var d,f,g,h;if(0===b)if(-1===c)d=a.samples,c=a.numFrames;else for(d=new Float32Array(c*a.numChannels),g=0,h=a.numChannels;h>g;++g)f=g*a.numFrames,d.set(a.samples.subarray(f,f+c));else for(-1===c&&(c=a.numFrames-b),d=new Float32Array(c*a.numChannels),g=0,h=a.numChannels;h>g;++g)f=g*a.numFrames+b,d.set(a.samples.subarray(f,f+c));this.samples=d,this.numFrames=c,this.numChannels=a.numChannels,this.sampleRate=a.sampleRate,this.blocking=!1,this.emit("load",this),e.client.pushCommand(["/b_set",this._bufId,c,a.numChannels,a.sampleRate,d])
},l=function(){};l.read=f(function(a,b,c){if("string"!=typeof a)throw new TypeError("Buffer.Read: arguments[0] should be a string.");var d=new j;return i[a]?k.call(d,i[a],b,c):e.client.requestBuffer(a,function(e){i[a]=e,k.call(d,e,b,c)}),d}).defaults("path,startFrame=0,numFrames=-1").multiCall().build();var m=function(){i={}},n=function(){a.Buffer=l};d.exports={Buffer:j,reset:m,install:n}}),e("cc/common/console",function(a,b,c){var d=a("./pack").unpack,e=function(a){a["/console/log"]=function(a){console.log.apply(console,d(a[1]))},a["/console/debug"]=function(a){console.debug.apply(console,d(a[1]))},a["/console/info"]=function(a){console.info.apply(console,d(a[1]))},a["/console/warn"]=function(a){console.warn.apply(console,d(a[1]))},a["/console/error"]=function(a){console.error.apply(console,d(a[1]))}};c.exports={receive:e}}),e("cc/client/bop",function(a,b,c){var d=a("./fn"),e=a("./ugen/ugen").UGen,f=a("./ugen/basic_ops").BinaryOpUGen,g=function(a,b,c){return function(d){return Array.isArray(d)?d.map(function(a){return this[b](a)},this):d instanceof e?(new f).init(c,this,d):a(this,d)}},h=function(a,b){return function(c){var d=this;return Array.isArray(c)?d.length===c.length?d.map(function(b,d){return b[a](c[d])}):d.length>c.length?d.map(function(b,d){return b[a](c[d%c.length])}):c.map(function(b,c){return d[c%d.length][a](b)}):c instanceof e?d.map(function(a){return(new f).init(b,a,c)}):d.map(function(b){return b[a](c)})}},i=function(a){return function(b){var c=this;return Array.isArray(b)?b.map(function(b){return(new f).init(a,c,b)}):(new f).init(a,c,b)}},j=function(a,b,c){c=c||a,d.definePrototypeProperty(Number,a,g(b,a,c)),d.definePrototypeProperty(Array,a,h(a,c)),d.definePrototypeProperty(e,a,i(c))},k=function(){j("__add__",function(a,b){return a+b},"+"),j("__sub__",function(a,b){return a-b},"-"),j("__mul__",function(a,b){return a*b},"*"),j("__div__",function(a,b){return a/b},"/"),j("__mod__",function(a,b){return a%b},"%")};c.exports={install:k}}),e("cc/client/ugen/basic_ops",function(a,b,c){var d=a("../cc"),e=a("../../common/extend"),f=a("../utils"),g=a("./ugen").UGen,h=function(a){return Array.isArray(a)?a.reduce(function(a,b){return Math.max(a,h(b))},0):a&&a.rate||0},i="num neg not tilde".split(" "),j=function(){function a(){g.call(this,"UnaryOpUGen")}return e(a,g),a.prototype.init=function(a,b){var c=i.indexOf(a);if(-1===c)throw new TypeError("UnaryOpUGen: unknown operator '"+a+"'");var d=0|b.rate;return g.prototype.init.call(d),this.op=a,this.specialIndex=c,this.inputs=[b],this.numOfInputs=1,this},a}(),k="+ - * / %".split(" "),l=function(){function a(){g.call(this,"BinaryOpUGen")}return e(a,g),a.prototype.init=function(b,c,d){if("-"===b&&"number"==typeof d&&(b="+",d=-d),"/"===b&&"number"==typeof d&&(b="*",d=1/d),"*"===b)return"number"==typeof c&&"number"==typeof d?c*d:0===c||0===d?0:q(c,d);if("+"===b){if("number"==typeof c&&"number"==typeof d)return c+d;if(0===c)return d;if(0===d)return c;if(c instanceof a){if("*"===c.op)return(new m).init(c.inputs[0],c.inputs[1],d)}else if(c instanceof m)return"number"==typeof c.inputs[2]&&"number"==typeof d?0===c.inputs[2]+d?(new a).init("*!",c.inputs[0],c.inputs[1]):(c.inputs[2]+=d,c):(d=(new a).init("+",c.inputs[2],d),c=(new a).init("*!",c.inputs[0],c.inputs[1]),(new a).init("+",c,d));return p(c,d)}"+!"===b?b="+":"*!"===b&&(b="*");var e=k.indexOf(b);if(-1===e)throw new TypeError("BinaryOpUGen: unknown operator '"+b+"'");var f=Math.max(0|c.rate,0|d.rate);return g.prototype.init.call(this,f),this.op=b,this.specialIndex=e,this.inputs=[c,d],this.numOfInputs=2,this},a}(),m=function(){function a(){g.call(this,"MulAdd")}e(a,g),a.prototype.init=function(a,d,e){var f,g,h,i;return a.rate-d.rate<0&&(f=a,a=d,d=f),0===d?e:(g=-1===d,h=1===d,i=0===e,h&&i?a:g&&i?(new l).init("*",a,-1):i?(new l).init("*",a,d):g?(new l).init("-",e,a):h?(new l).init("+",a,e):c(a,d,e)?b.call(this,a,d,e):c(d,a,e)?b.call(this,d,a,e):a*d+e)};var b=function(a,b,c){var d=h([a,b,c]);return g.prototype.init.apply(this,[d,a,b,c])},c=function(a,b,c){return a=h(a),b=h(b),c=h(c),2===a?!0:1!==a||1!==b&&0!==b||1!==c&&0!==c?!1:!0};return a}(),n=function(){function a(){g.call(this,"Sum3")}return e(a,g),a.prototype.init=function(a,b,c){if(0===a)return(new l).init("+",b,c);if(0===b)return(new l).init("+",a,c);if(0===c)return(new l).init("+",a,b);var d=h([a,b,c]),e=[a,b,c].sort(function(a,b){return b.rate-a.rate});return g.prototype.init.apply(this,[d].concat(e))},a}(),o=function(){function a(){g.call(this,"Sum4")}return e(a,g),a.prototype.init=function(a,b,c,d){if(0===a)return(new n).init(b,c,d);if(0===b)return(new n).init(a,c,d);if(0===c)return(new n).init(a,b,d);if(0===d)return(new n).init(a,b,c);var e=h([a,b,c,d]),f=[a,b,c,d].sort(function(a,b){return b.rate-a.rate});return g.prototype.init.apply(this,[e].concat(f))},a}(),p=function(){var a=function(b){if("number"==typeof b)return b;var c=b.inputs;return b instanceof l&&"+"===b.op?[a(c[0]),a(c[1])]:b instanceof n?[a(c[0]),a(c[1]),a(c[2])]:b instanceof o?[a(c[0]),a(c[1]),a(c[2]),a(c[3])]:b},b=function(a){switch(a=a.map(function(a){switch(a.length){case 4:return(new o).init(a[0],a[1],a[2],a[3]);case 3:return(new n).init(a[0],a[1],a[2]);case 2:return(new l).init("+!",a[0],a[1]);case 1:return a[0]}}),a.length){case 4:return(new o).init(a[0],a[1],a[2],a[3]);case 3:return(new o).init(a[0],a[1],a[2]);case 2:return(new l).init("+!",a[0],a[1]);case 1:return a[0];default:return b(f.clump(a,4))}};return function(c,d){var e=f.flatten([a(c),a(d)]),g=0;return e=e.filter(function(a){return"number"==typeof a?(g+=a,!1):!0}),0!==g&&e.push(g),e=f.clump(e,4),1===e.length&&2===e[0].length?(new l).init("+!",e[0][0],e[0][1]):b(e)}}(),q=function(){var a=function(b){if("number"==typeof b)return b;var c=b.inputs;return b instanceof l&&"*"===b.op?[a(c[0]),a(c[1])]:b},b=function(a){switch(a=a.map(function(a){return 2===a.length?(new l).init("*!",a[0],a[1]):a[0]}),a.length){case 2:return(new l).init("*!",a[0],a[1]);case 1:return a[0];default:return b(f.clump(a,2))}};return function(c,d){var e=f.flatten([a(c),a(d)]),g=1;return e=e.filter(function(a){return"number"==typeof a?(g*=a,!1):!0}),1!==g&&e.push(g),e=f.clump(e,2),1===e.length&&2===e[0].length?(new l).init("*!",e[0][0],e[0][1]):b(e)}}(),r=function(){};d.emit("basic_ops.js",{UnaryOpUGen:j,BinaryOpUGen:l,MulAdd:m}),c.exports={UnaryOpUGen:j,BinaryOpUGen:l,MulAdd:m,Sum3:n,Sum4:o,UNARY_OP_UGEN_MAP:i,BINARY_OP_UGEN_MAP:k,install:r}}),e("cc/client/uop",function(a,b,c){var d=a("./fn"),e=a("./ugen/ugen").UGen,f=a("./ugen/basic_ops").UnaryOpUGen,g=function(){d.definePrototypeProperty(Array,"__plus__",function(){return this.map(function(a){return a.__plus__()})}),d.definePrototypeProperty(e,"__plus__",function(){return new f("+",this)}),d.definePrototypeProperty(Array,"__minus__",function(){return this.map(function(a){return a.__minus__()})}),d.definePrototypeProperty(e,"__minus__",function(){return new f("-",this)})};c.exports={install:g}}),e("cc/client/scale",function(b,c,d){var e=b("./cc"),f=b("./fn"),g=b("../common/extend"),h=function(a){return a.map(function(a){return 12*Math.log(a)*Math.LOG2E})},i=function(a){for(var b=new Array(a),c=0;a>=c;++c)b[c]=c;return b},j=function(){function a(a,b,c){this.klassName="Tuning",this._tuning=a,this._octaveRatio=b,this.name=c}return g(a,e.Object),a.prototype.semitones=function(){return this._tuning.slice()},a.prototype.cents=function(){return this._tuning.map(function(a){return 100*a})},a.prototype.ratios=function(){return this._tuning.map(function(a){return Math.pow(2,1*a/12)})},a.prototype.at=f(function(a){return this._tuning[a]}).multiCall().build(),a.prototype.wrapAt=f(function(a){return a%=this._tuning.length,0>a&&(a=this._tuning.length+a),this._tuning[a]}).multiCall().build(),a.prototype.octaveRatio=function(){return this._octaveRatio},a.prototype.size=function(){return this._tuning.length},a.prototype.stepsPerOctave=function(){return 12*Math.log(this._octaveRatio)*Math.LOG2E},a.prototype.tuning=function(){return this._tuning},a.prototype.equals=function(b){return b instanceof a&&this._octaveRatio===b._octaveRatio&&this._tuning.every(function(a,c){return a===b._tuning[c]},this)},a.prototype.copy=function(){return new a(this._tuning.slice(0),this._octaveRatio,this.name)},a}(),k={et12:[[0,1,2,3,4,5,6,7,8,9,10,11],2,"ET12"],pythagorean:[h([1,256/243,9/8,32/27,81/64,4/3,729/512,1.5,128/81,27/16,16/9,243/128]),2,"Pythagorean"],just:[h([1,16/15,9/8,1.2,5/4,4/3,45/32,1.5,1.6,5/3,1.8,15/8]),2,"Limit Just Intonation"],sept1:[h([1,16/15,9/8,1.2,5/4,4/3,1.4,1.5,1.6,5/3,1.8,15/8]),2,"Septimal Tritone Just Intonation"],sept2:[h([1,16/15,9/8,1.2,5/4,4/3,1.4,1.5,1.6,5/3,7/4,15/8]),2,"7-Limit Just Intonation"],mean4:[[0,.755,1.93,3.105,3.86,5.035,5.79,6.965,7.72,8.895,10.07,10.82],2,"Meantone, 1/4 Syntonic Comma"],mean5:[[0,.804,1.944,3.084,3.888,5.028,5.832,6.972,7.776,8.916,10.056,10.86],2,"Meantone, 1/5 Pythagorean Comma"],mean6:[[0,.86,1.96,3.06,3.92,5.02,5.88,6.98,7.84,8.94,10.04,10.9],2,"Meantone, 1/6 Pythagorean Comma"],kirnberger:[h([1,256/243,Math.sqrt(5)/2,32/27,5/4,4/3,45/32,Math.pow(5,.25),128/81,Math.pow(5,.75)/2,16/9,15/8]),2,"Kirnberger III"],werckmeister:[[0,.92,1.93,2.94,3.915,4.98,5.9,6.965,7.93,8.895,9.96,10.935],2,"Werckmeister III"],vallotti:[[0,.94135,1.9609,2.98045,3.9218,5.01955,5.9218,6.98045,7.9609,8.94135,10,10.90225],2,"Vallotti"],young:[[0,.9,1.96,2.94,3.92,4.98,5.88,6.98,7.92,8.94,9.96,10.9],2,"Young"],reinhard:[h([1,14/13,13/12,16/13,1.3,18/13,13/9,20/13,13/8,22/13,13/7,208/105]),2,"Mayumi Reinhard"],wcHarm:[h([1,17/16,9/8,19/16,5/4,21/16,11/8,1.5,13/8,27/16,7/4,15/8]),2,"Wendy Carlos Harmonic"],wcSJ:[h([1,17/16,9/8,1.2,5/4,4/3,11/8,1.5,13/8,5/3,7/4,15/8]),2,"Wendy Carlos Super Just"],lu:[h([1,2187/2048,9/8,19683/16384,81/64,177147/131072,729/612,1.5,6561/4096,27/16,59049/32768,243/128]),2,"Chinese Shi-er-lu scale"],et19:[i(18).map(function(a){return 12*a/19}),2,"ET19"],et22:[i(22).map(function(a){return 12*a/22}),2,"ET22"],et24:[i(24).map(function(a){return 12*a/24}),2,"ET24"],et31:[i(31).map(function(a){return 12*a/31}),2,"ET31"],et41:[i(41).map(function(a){return 12*a/41}),2,"ET41"],et53:[i(53).map(function(a){return 12*a/53}),2,"ET53"],johnston:[h([1,25/24,135/128,16/15,10/9,9/8,75/64,1.2,5/4,81/64,1.28,4/3,1.35,45/32,1.44,1.5,25/16,1.6,5/3,27/16,225/128,16/9,1.8,15/8,1.92]),2,"Ben Johnston"],partch:[h([1,81/80,33/32,1.05,16/15,12/11,1.1,10/9,9/8,8/7,7/6,32/27,1.2,11/9,5/4,14/11,9/7,21/16,4/3,1.35,11/8,1.4,10/7,16/11,40/27,1.5,32/21,14/9,11/7,1.6,18/11,5/3,27/16,12/7,7/4,16/9,1.8,20/11,11/6,15/8,40/21,64/33,160/81]),2,"Harry Partch"],catler:[h([1,33/32,16/15,9/8,8/7,7/6,1.2,128/105,16/13,5/4,21/16,4/3,11/8,45/32,16/11,1.5,1.6,13/8,5/3,27/16,7/4,16/9,24/13,15/8]),2,"Jon Catler"],chalmers:[h([1,1.05,16/15,9/8,7/6,1.2,5/4,21/16,4/3,1.4,35/24,1.5,1.575,1.6,5/3,7/4,1.8,28/15,63/32]),2,"John Chalmers"],harrison:[h([1,16/15,10/9,8/7,7/6,1.2,5/4,4/3,17/12,1.5,1.6,5/3,12/7,7/4,1.8,15/8]),2,"Lou Harrison"],sruti:[h([1,256/243,16/15,10/9,9/8,32/27,1.2,5/4,81/64,4/3,1.35,45/32,729/512,1.5,128/81,1.6,5/3,27/16,16/9,1.8,15/8,243/128]),2,"Sruti"],parret:[h([1,1.05,35/32,9/8,7/6,1.2,5/4,21/16,4/3,1.4,35/24,1.5,1.575,1.6,5/3,7/4,1.8,15/8,63/32]),2,"Wilfrid Perret"],michael_harrison:[h([1,28/27,135/128,16/15,243/224,9/8,8/7,7/6,32/27,1.2,135/112,5/4,81/64,9/7,21/16,4/3,112/81,45/32,64/45,81/56,1.5,32/21,14/9,128/81,1.6,224/135,5/3,27/16,12/7,7/4,16/9,15/8,243/128,27/14]),2,"Michael Harrison 24 tone 7-limit"],harmonic:[h(i(24).slice(1)),2,"Harmonic Series 24"],bp:[h(i(12).map(function(a){return 19.019550008654*a/13})),3,"Bohlen-Pierce"],wcAlpha:[i(14).map(function(a){return.78*a}),1.9656411970852,"Wendy Carlos Alpha"],wcBeta:[i(18).map(function(a){return.638*a}),2.0141437696805,"Wendy Carlos Beta"],wcGamma:[i(33).map(function(a){return.351*a}),1.9923898962606,"Wendy Carlos Gamma"]},l=f(function(a,b,c){return Array.isArray(a)||(a=[0,1,2,3,4,5,6,7,8,9,10,11]),"number"!=typeof b&&(b=2),"string"!=typeof c&&(c="Unknown Tuning"),new j(a,b,c)}).defaults("tuning,octaveRatio,name").build(),m={};Object.keys(k).forEach(function(a){var b=k[a];m[a]=new j(b[0],b[1],b[2]),l[a]=m[a]}),l.at=function(a){var b=m[a];return b&&(b=b.copy()),b},l.choose=f(function(a){"number"!=typeof a&&(a=12);for(var b,c=[],d=Object.keys(m),e=0,f=d.length;f>e;++e)b=m[d[e]],b._tuning.length===a&&c.push(b);return b=c[0|Math.random()*c.length],b?b.copy():void 0}).multiCall().build(),l.et=function(a){for(var b=new Array(a),c=0;a>c;++c)b[c]=c*(12/a);return new j(b,2,"ET"+a)},l.names=function(){return Object.keys(m).sort()};var n=function(){function a(a,b,c,d){this.klassName="Scale",this._degrees=a,this._pitchesPerOctave=b,this.name=d,this.tuning(c)}g(a,e.Object),a.prototype.tuning=function(a){if(0===arguments.length)return this._tuning;if(null===a?a=l["default"](this._pitchesPerOctave):"string"==typeof a&&(a=m[a]),!(a instanceof j))throw new TypeError("Scale: arguments[2] should be a tuning.");if(this._pitchesPerOctave!==a.size())throw new TypeError("Scale steps per octave "+this._pitchesPerOctave+" does not match tuning size.");return this._tuning=a,a},a.prototype.semitones=function(){return this._degrees.map(function(a){return this._tuning.wrapAt(a)},this)},a.prototype.cents=function(){return this.semitones().map(function(a){return 100*a})},a.prototype.ratios=function(){return this.semitones().map(function(a){return Math.pow(2,1*a/12)})},a.prototype.size=function(){return this._degrees.length},a.prototype.pitchesPerOctave=function(){return this._pitchesPerOctave},a.prototype.stepsPerOctave=function(){return 12*Math.log(this.octaveRatio())*Math.LOG2E},a.prototype.at=f(function(a){return a%=this._degrees.length,0>a&&(a=this._degrees.length+a),this._tuning.at(this._degrees[a])}).multiCall().build(),a.prototype.wrapAt=f(function(a){return a%=this._degrees.length,0>a&&(a=this._degrees.length+a),this._tuning.wrapAt(this._degrees[a])}).multiCall().build(),a.prototype.degreeToFreq=f(function(a,c,d){return b(this,a,d)*c}).defaults("degree=0,rootFreq=0,octave=0").multiCall().build(),a.prototype.degreeToRatio=f(function(a,c){return b(this,a,c)}).defaults("degree=0,octave=0").multiCall().build(),a.prototype.degrees=function(){return this._degrees},a.prototype.octaveRatio=function(){return this._tuning.octaveRatio()},a.prototype.equals=function(b){return b instanceof a&&this._degrees.every(function(a,c){return a===b._degrees[c]})&&this._tuning.equals(b._tuning)},a.prototype.copy=function(){return new a(this._degrees.slice(),this._pitchesPerOctave,this._tuning.copy(),this.name)};var b=function(a,b,c){c+=0|b/a._degrees.length;var d=a.ratios(),e=b%d.length;return 0>e&&(e=d.length+e),d[e]*Math.pow(a.octaveRatio(),c)};return a}(),o=function(a){var b,c=a[0]||0;for(b=a.length;b--;)c<a[b]&&(c=a[b]);var d=[53,24,19,12];for(b=d.length;b--;)if(c<d[b])return d[b];return 128},p={major:[[0,2,4,5,7,9,11],12,0,"Major"],minor:[[0,2,3,5,7,8,10],12,0,"Natural Minor"],minorPentatonic:[[0,3,5,7,10],12,0,"Minor Pentatonic"],majorPentatonic:[[0,2,4,7,9],12,0,"Major Pentatonic"],ritusen:[[0,2,5,7,9],12,0,"Ritusen"],egyptian:[[0,2,5,7,10],12,0,"Egyptian"],kumoi:[[0,2,3,7,9],12,0,"Kumoi"],hirajoshi:[[0,2,3,7,8],12,0,"Hirajoshi"],iwato:[[0,1,5,6,10],12,0,"Iwato"],ryukyu:[[0,4,5,7,11],12,0,"Ryukyu"],chinese:[[0,4,6,7,11],12,0,"Chinese"],indian:[[0,4,5,7,10],12,0,"Indian"],pelog:[[0,1,3,7,8],12,0,"Pelog"],prometheus:[[0,2,4,6,11],12,0,"Prometheus"],scriabin:[[0,1,4,7,9],12,0,"Scriabin"],gong:[[0,2,4,7,9],12,0,"Gong"],shang:[[0,2,5,7,10],12,0,"Shang"],jiao:[[0,3,5,8,10],12,0,"Jiao"],zhi:[[0,2,5,7,9],12,0,"Zhi"],yu:[[0,3,5,7,10],12,0,"Yu"],whole:[[0,2,4,6,8,10],12,0,"Whole Tone"],augmented:[[0,3,4,7,8,11],12,0,"Augmented"],augmented2:[[0,1,4,5,8,9],12,0,"Augmented 2"],partch_o1:[[0,8,14,20,25,34],43,"partch","Partch Otonality 1"],partch_o2:[[0,7,13,18,27,35],43,"partch","Partch Otonality 2"],partch_o3:[[0,6,12,21,29,36],43,"partch","Partch Otonality 3"],partch_o4:[[0,5,15,23,30,37],43,"partch","Partch Otonality 4"],partch_o5:[[0,10,18,25,31,38],43,"partch","Partch Otonality 5"],partch_o6:[[0,9,16,22,28,33],43,"partch","Partch Otonality 6"],partch_u1:[[0,9,18,23,29,35],43,"partch","Partch Utonality 1"],partch_u2:[[0,8,16,25,30,36],43,"partch","Partch Utonality 2"],partch_u3:[[0,7,14,22,31,37],43,"partch","Partch Utonality 3"],partch_u4:[[0,6,13,20,28,38],43,"partch","Partch Utonality 4"],partch_u5:[[0,5,12,18,25,33],43,"partch","Partch Utonality 5"],partch_u6:[[0,10,15,21,27,34],43,"partch","Partch Utonality 6"],hexMajor7:[[0,2,4,7,9,11],12,0,"Hex Major 7"],hexDorian:[[0,2,3,5,7,10],12,0,"Hex Dorian"],hexPhrygian:[[0,1,3,5,8,10],12,0,"Hex Phrygian"],hexSus:[[0,2,5,7,9,10],12,0,"Hex Sus"],hexMajor6:[[0,2,4,5,7,9],12,0,"Hex Major 6"],hexAeolian:[[0,3,5,7,8,10],12,0,"Hex Aeolian"],ionian:[[0,2,4,5,7,9,11],12,0,"Ionian"],dorian:[[0,2,3,5,7,9,10],12,0,"Dorian"],phrygian:[[0,1,3,5,7,8,10],12,0,"Phrygian"],lydian:[[0,2,4,6,7,9,11],12,0,"Lydian"],mixolydian:[[0,2,4,5,7,9,10],12,0,"Mixolydian"],aeolian:[[0,2,3,5,7,8,10],12,0,"Aeolian"],locrian:[[0,1,3,5,6,8,10],12,0,"Locrian"],harmonicMinor:[[0,2,3,5,7,8,11],12,0,"Harmonic Minor"],harmonicMajor:[[0,2,4,5,7,8,11],12,0,"Harmonic Major"],melodicMinor:[[0,2,3,5,7,9,11],12,0,"Melodic Minor"],melodicMinorDesc:[[0,2,3,5,7,8,10],12,0,"Melodic Minor Descending"],melodicMajor:[[0,2,4,5,7,8,10],12,0,"Melodic Major"],bartok:[[0,2,4,5,7,8,10],12,0,"Bartok"],hindu:[[0,2,4,5,7,8,10],12,0,"Hindu"],todi:[[0,1,3,6,7,8,11],12,0,"Todi"],purvi:[[0,1,4,6,7,8,11],12,0,"Purvi"],marva:[[0,1,4,6,7,9,11],12,0,"Marva"],bhairav:[[0,1,4,5,7,8,11],12,0,"Bhairav"],ahirbhairav:[[0,1,4,5,7,9,10],12,0,"Ahirbhairav"],superLocrian:[[0,1,3,4,6,8,10],12,0,"Super Locrian"],romanianMinor:[[0,2,3,6,7,9,10],12,0,"Romanian Minor"],hungarianMinor:[[0,2,3,6,7,8,11],12,0,"Hungarian Minor"],neapolitanMinor:[[0,1,3,5,7,8,11],12,0,"Neapolitan Minor"],enigmatic:[[0,1,4,6,8,10,11],12,0,"Enigmatic"],spanish:[[0,1,4,5,7,8,10],12,0,"Spanish"],leadingWhole:[[0,2,4,6,8,10,11],12,0,"Leading Whole Tone"],lydianMinor:[[0,2,4,6,7,8,10],12,0,"Lydian Minor"],neapolitanMajor:[[0,1,3,5,7,9,11],12,0,"Neapolitan Major"],locrianMajor:[[0,2,4,5,6,8,10],12,0,"Locrian Major"],diminished:[[0,1,3,4,6,7,9,10],12,0,"Diminished"],diminished2:[[0,2,3,5,6,8,9,11],12,0,"Diminished 2"],chromatic:[[0,1,2,3,4,5,6,7,8,9,10,11],12,0,"Chromatic"],chromatic24:[i(23),24,0,"Chromatic 24"],ajam:[[0,4,8,10,14,18,22],24,0,"Ajam"],jiharkah:[[0,4,8,10,14,18,21],24,0,"Jiharkah"],shawqAfza:[[0,4,8,10,14,16,22],24,0,"Shawq Afza"],sikah:[[0,3,7,11,14,17,21],24,0,"Sikah"],sikahDesc:[[0,3,7,11,13,17,21],24,0,"Sikah Descending"],huzam:[[0,3,7,9,15,17,21],24,0,"Huzam"],iraq:[[0,3,7,10,13,17,21],24,0,"Iraq"],bastanikar:[[0,3,7,10,13,15,21],24,0,"Bastanikar"],mustar:[[0,5,7,11,13,17,21],24,0,"Mustar"],bayati:[[0,3,6,10,14,16,20],24,0,"Bayati"],karjighar:[[0,3,6,10,12,18,20],24,0,"Karjighar"],husseini:[[0,3,6,10,14,17,21],24,0,"Husseini"],nahawand:[[0,4,6,10,14,16,22],24,0,"Nahawand"],nahawandDesc:[[0,4,6,10,14,16,20],24,0,"Nahawand Descending"],farahfaza:[[0,4,6,10,14,16,20],24,0,"Farahfaza"],murassah:[[0,4,6,10,12,18,20],24,0,"Murassah"],ushaqMashri:[[0,4,6,10,14,17,21],24,0,"Ushaq Mashri"],rast:[[0,4,7,10,14,18,21],24,0,"Rast"],rastDesc:[[0,4,7,10,14,18,20],24,0,"Rast Descending"],suznak:[[0,4,7,10,14,16,22],24,0,"Suznak"],nairuz:[[0,4,7,10,14,17,20],24,0,"Nairuz"],yakah:[[0,4,7,10,14,18,21],24,0,"Yakah"],yakahDesc:[[0,4,7,10,14,18,20],24,0,"Yakah Descending"],mahur:[[0,4,7,10,14,18,22],24,0,"Mahur"],hijaz:[[0,2,8,10,14,17,20],24,0,"Hijaz"],hijazDesc:[[0,2,8,10,14,16,20],24,0,"Hijaz Descending"],zanjaran:[[0,2,8,10,14,16,22],24,0,"Zanjaran"],saba:[[0,3,6,8,12,16,20],24,0,"Saba"],zamzam:[[0,2,6,8,14,16,20],24,0,"Zamzam"],kurd:[[0,2,6,10,14,16,20],24,0,"Kurd"],kijazKarKurd:[[0,2,8,10,14,16,22],24,0,"Kijaz Kar Kurd"],nawaAthar:[[0,4,6,12,14,16,22],24,0,"Nawa Athar"],nikriz:[[0,4,6,12,14,18,20],24,0,"Nikriz"],atharKurd:[[0,2,6,12,14,16,22],24,0,"Athar Kurd"]},q=f(function(a,b,c,d){return Array.isArray(a)||(a=[0,2,4,5,7,9,11]),"number"!=typeof b&&(b=o(a)),"string"==typeof c&&(c=m[c]),c instanceof j||(c=m.et12),"string"!=typeof d&&(d="Unknown Scale"),new n(a,b,c,d)}).defaults("degrees,pitchesPerOctave,tuning,name").build(),r={};Object.keys(p).forEach(function(a){var b=p[a];b[2]=b[2]?m[b[2]].copy():l.et(b[1]),r[a]=new n(b[0],b[1],b[2],b[3]),q[a]=r[a]}),q.at=function(a,b){var c=r[a];return c&&(c=c.copy(),b&&c.tuning(b)),c},q.choose=f(function(a,b){"number"!=typeof a&&(a=7),"number"!=typeof b&&(b=12);for(var c,d=[],e=Object.keys(r),f=0,g=e.length;g>f;++f)c=r[e[f]],c._degrees.length===a&&c._pitchesPerOctave===b&&d.push(c);return c=d[0|Math.random()*d.length],c?c.copy():void 0}).multiCall().build(),q.names=function(){return Object.keys(r).sort()};var s=function(){a.Scale=q,a.Tuning=l};d.exports={Scale:n,Tuning:j,install:s}}),e("cc/client/ugen/installer",function(a,b,c){var d=function(){a("./ugen").install(),a("./basic_ops").install(),a("./bufio").install(),a("./delay").install(),a("./line").install(),a("./osc").install(),a("./pan").install(),a("./ui").install()};c.exports={install:d}}),e("cc/client/ugen/bufio",function(a,b,c){var d=a("./ugen"),e=a("../buffer").Buffer,f=[].slice,g=function(a){return function(b,c){if("number"!=typeof b)throw new TypeError("Buffer: arguments[0] should be an integer.");if(!(c instanceof e))throw new TypeError("Buffer: arguments[1] should be a buffer.");return b=Math.max(0,0|b),this.init.apply(this,[a].concat(f.call(arguments,1))),this.specialIndex=c._bufid,null!==c.samples&&(b=c.numChannels),this.initOutputs(b,this.rate)}},h={ar:{defaults:"numChannels=0,buffer,rate=1,trigger=1,startPos=0,loop=0,doneAction=0",ctor:g(2),Klass:d.MultiOutUGen},kr:{defaults:"numChannels=0,buffer,rate=1,trigger=1,startPos=0,loop=0,doneAction=0",ctor:g(1),Klass:d.MultiOutUGen}};c.exports={install:function(){d.register("PlayBuf",h)}}}),e("cc/client/ugen/delay",function(a,b,c){var d=a("./ugen"),e={ar:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.init(2,a,b,c,d).madd(e,f)}},kr:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.init(2,a,b,c,d).madd(e,f)}}};c.exports={install:function(){d.register("CombN",e),d.register("CombL",e),d.register("CombC",e)}}}),e("cc/client/ugen/line",function(a,b,c){var d=a("./ugen"),e={ar:{defaults:"start=0,end=1,dur=1,mul=1,add=0,doneAction=0",ctor:function(a,b,c,d,e,f){return this.init(2,a,b,c,f).madd(d,e)}},kr:{defaults:"start=0,end=1,dur=1,mul=1,add=0,doneAction=0",ctor:function(a,b,c,d,e,f){return this.init(1,a,b,c,f).madd(d,e)}}},f=function(){d.register("Line",e)};c.exports={install:f}}),e("cc/client/ugen/osc",function(a,b,c){var d=a("./ugen"),e={ar:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.init(2,a,b).madd(c,d)}},kr:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.init(1,a,b).madd(c,d)}}},f=function(){d.register("SinOsc",e)};c.exports={install:f}}),e("cc/client/ugen/pan",function(a,b,c){var d=a("./ugen"),e=d.OutputProxy,f=function(a){return function(b,c,d){return this.init.call(this,a,b,c,d),this.channels=[new e(this.rate,this,0),new e(this.rate,this,1)],this.numOfOutputs=2,this.channels}},g={ar:{defaults:"in=0,pos=0,level=1",ctor:f(2),Klass:d.MultiOutUGen},kr:{defaults:"in=0,pos=0,level=1",ctor:f(1),Klass:d.MultiOutUGen}},h=function(){d.register("Pan2",g)};c.exports={install:h}}),e("cc/client/ugen/ui",function(a,b,c){var d=a("./ugen"),e={kr:{defaults:"minval=0,maxval=1,warp=0,lag=0.2",ctor:function(a,b,c,d){return"exponential"===c?c=1:"number"!=typeof c&&(c=0),this.init(1,a,b,c,d)}}},f={kr:{defaults:"minval=0,maxval=1,lag=0.2",ctor:function(a,b,c){return this.init(1,a,b,c)}}},g=function(){d.register("MouseX",e),d.register("MouseY",e),d.register("MouseButton",f)};c.exports={install:g}}),e("cc/exports/installer",function(b,c,d){var e=b("./coffeecollider").CoffeeCollider,f=function(){a.CoffeeCollider=e};d.exports={install:f}}),e("cc/exports/coffeecollider",function(a,b,c){var d=a("../cc"),e=a("../common/extend"),f=a("./compiler/coffee").Compiler,g=a("../common/emitter").Emitter,h=a("../common/audioapi").AudioAPI,i=a("../common/pack").unpack,j={},k=[].slice,l=function(){function a(a){if(g.bind(this),a=a||{},this.version=d.version,a.socket){var b=new p(this,a);this.impl=b,this.socket={open:function(){b.sendToClient(["/socket-open"])},close:function(){b.sendToClient(["/socket-close"])},send:function(a){b.sendToClient(["/message",a])}}}else this.impl=a.iframe?new o(this,a):new n(this,a);this.sampleRate=this.impl.sampleRate,this.channels=this.impl.channels,this.compiler=this.impl.compiler}return a.prototype.play=function(){return this.impl.play(),this},a.prototype.pause=function(){return this.impl.pause(),this},a.prototype.reset=function(){return this.impl.reset(),this},a.prototype.execute=function(){return this.impl.execute.apply(this.impl,arguments),this},a.prototype.getStream=function(){return this.impl.strm},a.prototype.importScripts=function(){return this.impl.importScripts(k.call(arguments)),this},a.prototype.getWebAudioComponents=function(){return this.impl.getWebAudioComponents()},a}(),m=function(){function a(a,b){if(this.exports=a,this.compiler=new f,this.isPlaying=!1,this.execId=0,this.execCallbacks={},this.sampleRate=44100,this.channels=2,this.api=new h(this,b),this.sampleRate=this.api.sampleRate,this.channels=this.api.channels,this.strm=new Float32Array(this.strmLength*this.channels),this.clear=new Float32Array(this.strmLength*this.channels),this.strmList=new Array(8),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.speaker=b.speaker!==!1,this.api.init(),b.mouse!==!1){var c=new Float32Array(5);window.addEventListener("mousemove",function(a){c[2]=a.pageX/window.innerWidth,c[3]=a.pageY/window.innerHeight},!1),window.addEventListener("mousedown",function(){c[1]=1},!1),window.addEventListener("mouseup",function(){c[1]=0},!1),this.syncItems=c}}return a.prototype.play=function(){if(!this.isPlaying){this.isPlaying=!0;for(var a=this.strm,b=0,c=a.length;c>b;++b)a[b]=0;this.strmList.splice(0),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.api.play(),this.sendToClient(["/play"])}},a.prototype.pause=function(){this.isPlaying&&(this.sendToClient(["/pause"]),this.api.pause(),this.isPlaying=!1)},a.prototype.reset=function(){this.execId=0,this.execCallbacks={};for(var a=this.strm,b=0,c=a.length;c>b;++b)a[b]=0;this.strmList.splice(0),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.sendToClient(["/reset"])},a.prototype.process=function(){var a=this.strmList[this.strmListReadIndex];a&&(this.strmListReadIndex=7&this.strmListReadIndex+1,this.strm.set(a)),this.syncItems&&this.sendToClient(this.syncItems)},a.prototype.execute=function(a){var b,c,d=1;b="boolean"==typeof arguments[d]?arguments[d++]:!1,"function"==typeof arguments[d]&&(c=arguments[d++]),"string"==typeof a&&(a=this.compiler.compile(a.trim()),this.sendToClient(["/execute",this.execId,a,b,this.compiler.data,!!c]),c&&(this.execCallbacks[this.execId]=c),this.execId+=1)},a.prototype.importScripts=function(a){this.sendToClient(["/importScripts",a])},a.prototype.sendToClient=function(a){this.client&&this.client.postMessage(a)},a.prototype.recvFromClient=function(a){if(a instanceof Float32Array)return this.strmList[this.strmListWriteIndex]=a,this.strmListWriteIndex=7&this.strmListWriteIndex+1,void 0;if(a){var b=j[a[0]];b&&b.call(this,a)}},a.prototype.readAudioFile=function(a,b){var c=this.api;if(!c.decodeAudioFile)return b(null),void 0;var d=function(a){c.decodeAudioFile(a,function(a){b(a)})},e=new XMLHttpRequest;e.open("GET",a),e.responseType="arraybuffer",e.onreadystatechange=function(){4===e.readyState&&(200===e.status&&e.response?b&&d(e.response):b(null))},e.send()},a.prototype.getWebAudioComponents=function(){return"Web Audio API"===this.api.type?[this.api.context,this.api.jsNode]:[]},a}(),n=function(){function a(a,b){this.strmLength=1024,this.bufLength=64,m.call(this,a,b);var c=this;this.client=new Worker(d.coffeeColliderPath),this.client.onmessage=function(a){c.recvFromClient(a.data)}}return e(a,m),a}(),o=function(){function a(a,b){this.strmLength=2048,this.bufLength=128,m.call(this,a,b);var c=this,e=document.createElement("iframe");e.style.width=0,e.style.height=0,e.style.border=0,document.body.appendChild(e),this.iframe=e,e.sandbox="allow-scripts allow-same-origin",e.srcdoc="<script src='"+d.coffeeColliderPath+"#iframe'></script>";var f=new MessageChannel;e.onload=function(){e.contentWindow.postMessage(null,[f.port2],"*")},f.port1.onmessage=function(a){c.recvFromClient(a.data)},this.client=f.port1}return e(a,m),a}(),p=function(){function a(a,b){this.strmLength=4096,this.bufLength=128,m.call(this,a,b);var c=this,e=document.createElement("iframe");e.style.width=0,e.style.height=0,e.style.border=0,document.body.appendChild(e),this.iframe=e,e.sandbox="allow-scripts",e.srcdoc="<script src='"+d.coffeeColliderPath+"#socket'></script>";var f=new MessageChannel;e.onload=function(){e.contentWindow.postMessage(b.socket,[f.port2],"*")},f.port1.onmessage=function(a){c.recvFromClient(a.data)},this.client=f.port1}return e(a,m),a}();j["/connected"]=function(){this.sendToClient(["/init",this.sampleRate,this.channels])},j["/execute"]=function(a){var b=a[1],c=a[2],d=this.execCallbacks[b];d&&(void 0!==c&&(c=i(c)),d(c),delete this.execCallbacks[b])},j["/buffer/request"]=function(a){var b=this,c=a[2];this.readAudioFile(a[1],function(a){b.sendToClient(["/buffer/response",a,c])})},j["/message"]=function(a){this.exports.emit("message",a[1])},a("../common/console").receive(j),c.exports={CoffeeCollider:l}}),e("cc/exports/compiler/coffee",function(b,c,d){var e=function(){if(a.CoffeeScript)return a.CoffeeScript;try{return b(["coffee-script"][0])}catch(c){}}(),f=b("../../common/timevalue").calc,g=0,h=1,i={},j=function(a){console.log(a.map(function(a){return a[0]+"	"+a[1]}).join("\n"))},k=function(a){for(var b="";a--;)b+=" ";return b},l=function(a){var b=/^(\s*)__END__(\s*)$/gm,c=b.exec(a);if(null===c)return[a,""];var d=a.substr(0,c.index-1),e=a.substr(c.index+c[0].length+1);return[d,e]},m=function(a,b){for(var c=0,d=0;b>0;){var e=a[b-1];if(!e||"."!==e[g])switch(e=a[b],e[g]){case"PARAM_START":return b;case"CALL_START":c-=1;break;case"(":case"[":case"{":c-=1;case"IDENTIFIER":case"NUMBER":case"STRING":case"BOOL":case"REGEX":case"NULL":case"UNDEFINED":if(0===d&&0===c){if(e=a[b-1]){if("UNARY"===e[g])return b-1;if("+"===e[h]||"-"===e[h]){if(e=a[b-2],!e)return b-1;switch(e[g]){case"INDENT":case"TERMINATOR":case"CALL_START":case"COMPOUND_ASSIGN":case"UNARY":case"LOGIC":case"SHIFT":case"COMPARE":case"=":case"..":case"...":case"[":case"(":case"{":case",":case"?":return b-1}}}return b}break;case"}":case"]":case")":case"PARAM_END":case"CALL_END":c+=1;break;case"INDENT":d+=1;break;case"OUTDENT":d-=1}b-=1}return 0},n=function(a,b){for(var c=0,d=0,e=!1;b<a.length;){var f=a[b];if(e)e="PARAM_END"!==f[g],b+=1;else{switch(f[g]){case"}":case"]":case")":case"CALL_END":c-=1;break;case"OUTDENT":d-=1;break;case"PARAM_START":e=!0,b+=1;continue}if(f=a[b+1],!f||"."!==f[g])switch(f=a[b],f[g]){case"TERMINATOR":if(0===d)return b-1;break;case"IDENTIFIER":if(f=a[b+1],f&&"CALL_START"===f[g]){c+=1;break}if(0===d&&0===c)return b;break;case"NUMBER":case"STRING":case"BOOL":case"REGEX":case"NULL":case"UNDEFINED":if(0===d&&0===c)return b;break;case"(":case"[":case"{":c+=1;break;case"}":case"]":case")":case"CALL_END":if(0===d&&0===c)return b;break;case"INDENT":d+=1;break;case"OUTDENT":if(0===d&&0===c)return b}b+=1}}return a.length-1},o=function(a){for(var b=a.length-1;b>=0;){var c=a[b];if("STRING"===c[g]&&'"'===c[h].charAt(0)){var d=f(c[h].substr(1,c[h].length-2));"number"==typeof d&&(c[g]="NUMBER",c[h]=d.toString())}b-=1}return a},p=function(a){for(var b=a.length-1;b>=0;){var c,d,e=a[b];if("pi"===e[h]){if(a.splice(b,1),e=a[b-1],e&&"NUMBER"===e[g]){if(c=b-1,e=a[b-2])switch(e[g]){case"UNARY":case"+":case"-":c-=1}a.splice(b,0,["MATH","*",i]),d=b}else c=-1,d=b-1;a.splice(d+1,0,["IDENTIFIER","Math",i]),a.splice(d+2,0,[".",".",i]),a.splice(d+3,0,["IDENTIFIER","PI",i]),-1!==c&&(a.splice(d+4,0,[")",")",i]),a.splice(c,0,["(","(",i]))
}b-=1}return a},q=function(a){for(var b=a.length-1;b>=0;){var c=a[b];if("MATH"===c[g]){var d=m(a,b),e=n(a,b)+1;a.splice(e,0,[")",")",i]),a.splice(d,0,["(","(",i])}b-=1}return a},r={"+":"__plus__","-":"__minus__"},s=function(a){for(var b=a.length-1;b>=0;){var c=a[b];if(r.hasOwnProperty(c[h])){var d=r[c[h]];switch(c=a[b-1]||{0:"TERMINATOR"},c[g]){case"INDENT":case"TERMINATOR":case"CALL_START":case"COMPOUND_ASSIGN":case"UNARY":case"LOGIC":case"SHIFT":case"COMPARE":case"=":case"..":case"...":case"[":case"(":case"{":case",":case"?":case"+":case"-":case":":var e=n(a,b);a.splice(e+1,0,[".",".",i]),a.splice(e+2,0,["IDENTIFIER",d,i]),a.splice(e+3,0,["CALL_START","(",i]),a.splice(e+4,0,["CALL_END",")",i]),a.splice(b,1)}}b-=1}return a},t={"+":"__add__","-":"__sub__","*":"__mul__","/":"__div__","%":"__mod__"},u=function(a){for(var b=0,c=!1;b<a.length;){var d=a[b];if(c&&t.hasOwnProperty(d[h])){var e=t[d[h]],f=n(a,b)+1;a.splice(b++,1,[".",".",i]),a.splice(b++,0,["IDENTIFIER",e,i]),a.splice(b,0,["CALL_START","(",i]),a.splice(f+2,0,["CALL_END",")",i]),c=!1}else{switch(d[g]){case"INDENT":case"TERMINATOR":case"CALL_START":case"COMPOUND_ASSIGN":case"UNARY":case"LOGIC":case"SHIFT":case"COMPARE":case"=":case"..":case"...":case"[":case"(":case"{":case",":case"?":c=!1;break;default:c=!0}b+=1}}return a},v={"+=":"__add__","-=":"__sub__","*=":"__mul__","/=":"__div__","%=":"__mod__"},w=function(a){for(var b=a.length-1;b>=0;){var c=a[b];if(v.hasOwnProperty(c[h])){var d=v[c[h]],e=m(a,b),f=n(a,b)+1;a[b]=["=","=",i],a.splice(b+1,0,[".",".",i]),a.splice(b+2,0,["IDENTIFIER",d,i]),a.splice(b+3,0,["CALL_START","(",i]),a.splice(f+3,0,["CALL_END",")",i]);for(var g=e;b>g;g++)a.splice(b+1,0,a[g])}b-=1}return a},x=function(){var a=function(a,b){for(var c=-1,d=-1,e=b+1;e<a.length;++e)if("PARAM_START"===a[e][g])c=e;else if("PARAM_END"===a[e][g]){d=e;break}var f="";return-1!==c&&(f=a.slice(c+1,d).map(function(a){return a[h]}).join("").replace(/"/g,"'")),f='"'+f+'"',{begin:c,end:d,replace:f}};return function(b){for(var c=b.length-1;c>=0;){if(b[c-2]&&"Synth"===b[c-2][h]&&"."===b[c-1][g]){var d=b[c];if("def"===d[h]&&(d=b[c+1],"CALL_START"===d[g])){var e=n(b,c+2),f=a(b,c+1);b.splice(++e,0,[",",",",i]),b.splice(++e,0,["STRING",f.replace,i])}}c-=1}return b}}(),y=function(a){for(var b=a.length-2;b>=0;){var c=a[b];if("IDENTIFIER"===c[g]&&"$"===c[h].charAt(0)){var d=c[h];/\d/.test(d.charAt(1))||(d=d.substr(1)),""!==d&&(c=a[b-1],c&&"."===c[g]||(a.splice(b,1,["IDENTIFIER","global",i]),a.splice(b+1,0,[".",".",i]),a.splice(b+2,0,["IDENTIFIER",d,i])))}b-=1}return a},z=function(a){for(var b=0,c=0;b<a.length;){var d=a[b];if("("===d[g]&&(d=a[b+1],d&&"("===d[g])){c=2;for(var e=b+2;e<a.length;e++)if(d=a[e][g],"("===d&&(c+=1),")"===d&&(c-=1,0===c)){")"===a[e-1][g]&&(a.splice(e,1),a.splice(b,1),b-=1);break}}b+=1}return a},A=function(a){a.splice(0,0,["(","(",i]),a.splice(1,0,["PARAM_START","(",i]),a.splice(2,0,["IDENTIFIER","global",i]),a.splice(3,0,["PARAM_END",")",i]),a.splice(4,0,["->","->",i]),a.splice(5,0,["INDENT",2,i]);var b=a.length-1;return a.splice(b++,0,["OUTDENT",2,i]),a.splice(b++,0,[")",")",i]),a.splice(b++,0,[".",".",i]),a.splice(b++,0,["IDENTIFIER","call",i]),a.splice(b++,0,["CALL_START","(",i]),a.splice(b++,0,["THIS","this",i]),a.splice(b++,0,[".",".",i]),a.splice(b++,0,["IDENTIFIER","self",i]),a.splice(b++,0,["LOGIC","||",i]),a.splice(b++,0,["IDENTIFIER","global",i]),a.splice(b++,0,[",",",",i]),a.splice(b++,0,["THIS","this",i]),a.splice(b++,0,[".",".",i]),a.splice(b++,0,["IDENTIFIER","self",i]),a.splice(b++,0,["LOGIC","||",i]),a.splice(b++,0,["IDENTIFIER","global",i]),a.splice(b++,0,["CALL_END",")",i]),a},B=function(){function a(){}return a.prototype.tokens=function(a){var b=l(a),c=b[0],d=b[1],f=e.tokens(c);return f=o(f),f=p(f),f=s(f),f=q(f),f=u(f),f=w(f),f=x(f),f=z(f),f=y(f),f=A(f),this.code=c,this.data=d,f},a.prototype.compile=function(a){var b=this.tokens(a);return e.nodes(b).compile({bare:!0}).trim()},a.prototype.toString=function(a){var b=0;return"string"==typeof a&&(a=this.tokens(a)),a.map(function(a){switch(a[g]){case"TERMINATOR":return"\n"+k(b);case"INDENT":return b+=0|a[h],"\n"+k(b);case"OUTDENT":return b-=0|a[h],"\n"+k(b);case"RETURN":return"return ";case"UNARY":return a[h].length>1?a[h]+" ":a[h];case"{":return"{";case",":case"RELATION":return a[h]+" ";case"=":return" = ";case"COMPOUND_ASSIGN":case"COMPARE":case"MATH":case"+":case"-":return" "+a[h]+" ";default:return a[h]}}).join("").trim()},a}();d.exports={Compiler:B,dumpTokens:j,splitCodeAndData:l,findOperandHead:m,findOperandTail:n,replaceTimeValue:o,replacePi:p,replacePrecedence:q,replaceUnaryOp:s,replaceBinaryOp:u,replaceCompoundAssign:w,replaceSynthDef:x,replaceGlobal:y,cleanupParenthesis:z,insertReturn:A}}),e("cc/common/timevalue",function(a,b,c){var d=a("../cc"),e=function(a){var b,c=null;"~"===a.charAt(0)&&(b=!0,a=a.substr(1));do{if(c=f(a),null!==c)break;if(c=g(a),null!==c)break;if(c=h(a),null!==c)break;if(c=i(a),null!==c)break;if(c=k(a),null!==c)break;if(c=m(a),null!==c)break;c=o(a)}while(!1);if(null!==c){if(!b)return c;if(0!==c)return 1/c}return a},f=function(a){var b=/^(\d+(?:\.\d+)?)hz$/i.exec(a);return b?0===+b[1]?0:1/+b[1]:null},g=function(a){var b=/^(\d+(?:\.\d+)?)(min|sec|m)s?$/i.exec(a);if(b)switch(b[2]){case"min":return 60*+(b[1]||0);case"sec":return+(b[1]||0);case"m":return+(b[1]||0)/1e3}return null},h=function(a){var b=/^(?:([1-9][0-9]*):)?([0-5]?[0-9]):([0-5][0-9])(?:\.(\d{1,3}))?$/.exec(a);if(b){var c=0;return c+=3600*(0|b[1]),c+=60*(0|b[2]),c+=0|b[3],c+=(0|((b[4]||"")+"00").substr(0,3))/1e3}return null},i=function(a){var b=/^(\d+)samples(?:\/(\d+)hz)?$/i.exec(a);return b?b[1]/(0|b[2]||d.sampleRate):null},j=function(a,b,c){var d=60/a*(4/b);return d*=[1,1.5,1.75,1.875][c]||1},k=function(a){var b=/^bpm([1-9]\d+(?:\.\d+)?)\s*l([1-9]\d*)(\.*)$/i.exec(a);return b?j(+b[1],+b[2],b[3].length):null},l=function(a,b,c,d){var e=480*(4*b+c)+d;return 60/a*(e/480)},m=function(a){var b=/^bpm([1-9]\d+(?:\.\d+)?)\s*(\d+)\.(\d+).(\d{1,3})$/i.exec(a);return b?l(+b[1],+b[2],+b[3],+b[4]):null},n=function(a,b){return 60/a*b/480},o=function(a){var b=/^bpm([1-9]\d+(?:\.\d+)?)\s*(\d+)ticks$/i.exec(a);return b?n(+b[1],+b[2]):null};c.exports={hz:f,time:g,hhmmss:h,samples:i,note:k,beat:m,ticks:o,calcNote:j,calcBeat:l,calcTicks:n,calc:e}}),e("cc/common/audioapi",function(b,c,d){var e,f=b("../cc");if("undefined"!=typeof document){var g=a.AudioContext||a.webkitAudioContext;g?e=function(){function a(a,b){this.sys=a,this.context=b.AudioContext||new g,this.sampleRate=this.context.sampleRate,this.channels=2,this.type="Web Audio API",this.delegate=!!b.AudioContext}return a.prototype.init=function(){var a,b=this.sys,c=b.strmLength,d=4*c,e=b.strm.buffer;this.sys.speaker?this.sys.sampleRate===this.sampleRate&&(a=function(a){var c=a.outputBuffer;b.process(),c.getChannelData(0).set(new Float32Array(e.slice(0,d))),c.getChannelData(1).set(new Float32Array(e.slice(d)))}):a=function(){b.process()},this.bufSrc=this.context.createBufferSource(),this.jsNode=this.context.createJavaScriptNode(c,2,this.channels),this.jsNode.onaudioprocess=a},a.prototype.play=function(){this.bufSrc&&(this.bufSrc.noteOn(0),this.bufSrc.connect(this.jsNode),this.delegate||this.jsNode.connect(this.context.destination))},a.prototype.pause=function(){this.bufSrc&&(this.bufSrc.disconnect(),this.delegate||this.jsNode.disconnect())},a.prototype.decodeAudioFile=function(a,b){a=this.context.createBuffer(a,!1);for(var c=a.length*a.numberOfChannels,d=new Float32Array(c),e=0,f=a.numberOfChannels;f>e;++e)d.set(a.getChannelData(e),e*a.length);b({sampleRate:a.sampleRate,numChannels:a.numberOfChannels,numFrames:a.length,samples:d})},a}():"function"==typeof Audio&&"function"==typeof(new Audio).mozSetup&&(e=function(){function a(a){this.sys=a,this.sampleRate=44100,this.channels=2,this.type="Audio Data API"}var b=function(){var a="var t=0;onmessage=function(e){if(t)t=clearInterval(t),0;if(typeof e.data=='number'&&e.data>0)t=setInterval(function(){postMessage(0);},e.data);};",b=new Blob([a],{type:"text/javascript"}),c=URL.createObjectURL(b);return new Worker(c)}();return a.prototype.init=function(){this.audio=new Audio,this.interleaved=new Float32Array(this.sys.strmLength*this.sys.channels)},a.prototype.play=function(){if(this.audio){var a=this.sys,c=this.audio,d=this.interleaved,e=1e3*(a.strmLength/a.sampleRate),f=0,g=Date.now(),h=new Float32Array(a.strm.buffer,0,a.strmLength),i=new Float32Array(a.strm.buffer,4*a.strmLength),j=function(){if(!(f>Date.now()-g)){var b=d.length,j=h.length;for(a.process();j--;)d[--b]=i[j],d[--b]=h[j];c.mozWriteAudio(d),f+=e}};c.mozSetup(a.channels,a.sampleRate),b.onmessage=j,b.postMessage(.8*e)}},a.prototype.pause=function(){this.audio&&b.postMessage(0)},a}()),e||(e=function(){function a(a){this.sys=a,this.sampleRate=44100,this.channels=2,this.type="Fallback"}a.prototype.init=function(){},a.prototype.play=function(){b.play&&(this.play=b.play,this.play())},a.prototype.pause=function(){b.pause&&(this.pause=b.pause,this.pause())};var b={};return window.addEventListener("load",function(){var a=f.rootPath+"coffee-collider-fallback.swf",c=a+"?"+Date.now(),d="coffee-collider-fallback",e=document.createElement("div");e.style.display="inline",e.width=1,e.height=1,e.innerHTML='<object id="'+d+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1" height="1"><param name="movie" value="'+c+'"/><param name="bgcolor" value="#FFFFFF"/><param name="quality" value="high"/><param name="allowScriptAccess" value="always"/></object>',document.body.appendChild(e),window.coffeecollider_flashfallback_init=function(){var a=document.getElementById(d),c=0;b.play=function(){if(0===c){var b=this.sys,d=1e3*(b.strmLength/b.sampleRate),e=0,f=Date.now(),g=new Array(b.strmLength*b.channels),h=g.length,i=function(){if(!(e>Date.now()-f)){b.process();for(var c=b.strm,i=0;h>i;++i){var j=0|16384*c[i]+32768;j=Math.max(16384,Math.min(j,49152)),g[i]=String.fromCharCode(j)}a.writeAudio(g.join("")),e+=d}};c=setInterval(i,.8*d),a.play()}},b.pause=function(){0!==c&&(a.pause(),clearInterval(c),c=0)}}}),a}())}else"undefined"!=typeof a.GLOBAL&&(e=function(){function b(a){this.sys=a,this.sampleRate=44100,this.channels=2,this.node=null,this.isPlaying=!1}var c=a.require("stream").Readable,d=a.require("speaker");return c||(c=a.require("readable-stream/readable")),b.prototype.init=function(){},b.prototype.play=function(){var a=this.sys;this.isPlaying=!0,this.node=new c,this.node._read=function(b){var c,d,e=a._strm,f=a.strmLength,g=new Buffer(b),h=0;for(b=(b>>2)/a.strmLength;b--;)for(a._process(),d=0;f>d;++d)c=Math.max(-32768,Math.min(0|32768*e[d],32767)),g.writeInt16LE(c,h),h+=2,c=Math.max(-32768,Math.min(0|32768*e[d+f],32767)),g.writeInt16LE(c,h),h+=2;this.push(g)},this.node.pipe(new d({sampleRate:this.sampleRate}))},b.prototype.pause=function(){this.node&&process.nextTick(this.node.emit.bind(this.node,"end")),this.node=null,this.isPlaying=!1},b}());d.exports={AudioAPI:e}}),e("cc/server/installer",function(a,b,c){var d=function(){a("./server").install(),a("./unit/installer").install()};c.exports={install:d}}),e("cc/server/server",function(b,c,d){var e=b("./cc"),f=b("../common/extend"),g=b("../common/pack").pack,h=b("../common/timer").Timer,i=b("../common/emitter").Emitter,j=b("./instance").InstanceManager,k={},l=function(){function a(){this.sampleRate=0,this.channels=0,this.strmLength=0,this.bufLength=0,this.instanceManager=new j,this.strm=null,this.timer=new h,this.processed=0,this.processStart=0,this.processInterval=0,this.initialized=!1}return a.prototype.sendToClient=function(){throw"should be overridden"},a.prototype.recvFromClient=function(a,b){if(b=0|b,a instanceof Float32Array)return this.instanceManager.setSyncItems(b,a),void 0;if(a){var c=k[a[0]];c&&c.call(this,a,b)}},a.prototype.connect=function(){throw"should be overridden"},a.prototype.init=function(a){this.initialized||(this.initialized=!0,a&&(this.sampleRate=0|a[1],this.channels=0|a[2]),this.strm=new Float32Array(this.strmLength*this.channels),this.rates={},this.rates[2]=new q(this.sampleRate,this.bufLength),this.rates[1]=new q(this.sampleRate/this.bufLength,1),this.instanceManager.init(this),this.instanceManager.append(0))},a.prototype.play=function(a,b){b=0|b,this.instanceManager.play(b),this.timer.isRunning||(this.processStart=Date.now(),this.processDone=0,this.processInterval=1e3*(this.strmLength/this.sampleRate),this.timer.start(this.process.bind(this),10))},a.prototype.pause=function(a,b){b=0|b,this.instanceManager.pause(b),this.timer.isRunning&&(this.instanceManager.isRunning()||this.timer.stop())},a.prototype.reset=function(a,b){b=0|b,this.instanceManager.reset(b)},a.prototype.getRate=function(a){return this.rates[a]||this.rates[1]},a.prototype.process=function(){throw"should be overridden"},a.prototype.command=function(a,b){b=0|b;var c=a[1];this.instanceManager.setTimeline(b,c)},a}(),m=function(){function a(){l.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=1024,this.bufLength=64,this.offset=0}return f(a,l),a.prototype.sendToClient=function(a){postMessage(a)},a.prototype.connect=function(){this.sendToClient(["/connected",this.sampleRate,this.channels])},a.prototype.process=function(){if(!(this.processDone-25>Date.now()-this.processStart)){for(var a=this.strm,b=this.instanceManager,c=this.strmLength,d=this.bufLength,f=b.busOutL,g=b.busOutR,h=e.client,i=0,j=0,k=c/d;k>j;++j)h.process(),b.process(d,0),a.set(f,i),a.set(g,i+c),i+=d;this.sendToClient(a),this.processDone+=this.processInterval}},a}(),n=function(){function a(){m.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=2048,this.bufLength=128}return f(a,m),a.prototype.sendToClient=function(a){postMessage(a)},a.prototype.connect=function(){this.sendToClient(["/connected",this.sampleRate,this.channels])},a.prototype.process=function(){if(!(this.processDone-25>Date.now()-this.processStart)){for(var a=this.strm,b=this.instanceManager,c=this.strmLength,d=this.bufLength,e=b.busOutL,f=b.busOutR,g=0,h=0,i=c/d;i>h;++h)b.process(d,h),a.set(e,g),a.set(f,g+c),g+=d;this.sendToClient(a),this.sendToClient(["/process"]),this.processDone+=this.processInterval}},a}(),o=function(){function c(){l.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=128,this.list=[],this.map={},this.exports=null}var d;a.require&&(d=a.require("ws").Server);var e=b("../common/audioapi").AudioAPI;return f(c,l),c.prototype._init=function(a){var b=this,c=0,f=this.exports;"undefined"!=typeof a.speaker&&(a.speaker&&(this.api=new e(this)),delete a.speaker),this.socket=new d(a),this.socket.on("connection",function(a){var d=c++;b.list.push(a),b.map[d]=a,b.instanceManager.append(d),a.on("message",function(a){if("string"!=typeof a){for(var c=new Float32Array(5),e=0;5>e;++e)c[e]=a.readFloatLE(4*e);a=c}else a=JSON.parse(a);b.recvFromClient(a,d)}),a.on("close",function(){b.map[d]&&(b.pause([],d),b.instanceManager.remove(d),b.list.splice(b.list.indexOf(a),1),delete b.map[d]),f.emit("close",d)}),a.on("error",function(a){f.emit("error",d,a)}),b.sendToClient(["/connected",b.sampleRate,b.channels],d),f.emit("open",d)}),this.init()},c.prototype.connect=function(){},c.prototype.sendToClient=function(a,b,c){if(a instanceof Float32Array)this.list.forEach(function(b){1===b.readyState&&b.send(a.buffer,{binary:!0,mask:!1})});else if(c||a.cc||(a={cc:a}),a=JSON.stringify(a),void 0===b)this.list.forEach(function(b){1===b.readyState&&b.send(a)});else{var d=this.map[b];d&&1===d.readyState&&d.send(a)}},c.prototype.play=function(a,b){b=0|b,this.instanceManager.play(b),this.api&&(this._strm=new Float32Array(this.strmLength*this.channels),this.strmList=new Array(8),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.api.isPlaying||this.api.play()),this.timer.isRunning||(this.processStart=Date.now(),this.processDone=0,this.processInterval=1e3*(this.strmLength/this.sampleRate),this.timer.start(this.process.bind(this),10))},c.prototype.pause=function(a,b){b=0|b,this.instanceManager.pause(b),this.api&&this.api.isPlaying&&(this.instanceManager.isRunning()||this.api.pause()),this.timer.isRunning&&(this.instanceManager.isRunning()||this.timer.stop())},c.prototype.process=function(){if(!(this.processDone-25>Date.now()-this.processStart)){for(var a=this.strm,b=this.instanceManager,c=this.strmLength,d=this.bufLength,e=b.busOutL,f=b.busOutR,g=0,h=0,i=c/d;i>h;++h)b.process(d,h),a.set(e,g),a.set(f,g+c),g+=d;this.sendToClient(a),this.sendToClient(["/process"]),this.processDone+=this.processInterval,this.api&&(this.strmList[this.strmListWriteIndex]=new Float32Array(a),this.strmListWriteIndex=7&this.strmListWriteIndex+1)}},c.prototype._process=function(){var a=this.strmList[this.strmListReadIndex];a&&(this.strmListReadIndex=7&this.strmListReadIndex+1,this._strm.set(a))},c}(),p=function(){function a(a){i.bind(this),this.server=a}return a.prototype.init=function(a){return this.server._init(a),this},a.prototype.send=function(a,b){return this.server.sendToClient(a,b,!0),this},a}();k["/init"]=function(a,b){this.init(a,b)},k["/play"]=function(a,b){this.play(a,b)},k["/pause"]=function(a,b){this.pause(a,b)},k["/reset"]=function(a,b){this.reset(a,b)},k["/command"]=function(a,b){this.command(a,b)},k["/message"]=function(a,b){this.exports&&(a=a[1],a.userId=b,this.exports.emit("message",a))};var q=function(){function a(a,c){this.sampleRate=a,this.sampleDur=1/a,this.radiansPerSample=b/a,this.bufLength=c,this.bufDuration=c/a,this.bufRate=1/this.bufDuration,this.slopeFactor=1/c,this.filterLoops=0|c/3,this.filterRemain=0|c%3,this.filterSlope=0===this.filterLoops?0:1/this.filterLoops}var b=2*Math.PI;return a}(),r=function(){var b;switch(e.opmode){case"socket":b=new o,b.exports=new p(b);break;case"iframe":b=new n,a.onmessage=function(a){b.recvFromClient(a.data,0)};break;default:b=new m}e.server=b,"undefined"==typeof a.console&&(a.console=function(){var a={};return["log","debug","info","warn","error"].forEach(function(c){a[c]=function(){var a=Array.prototype.slice.call(arguments).map(function(a){return g(a)});b.sendToClient(["/console/"+c,a])}}),a}())};d.exports={install:r}}),e("cc/server/cc",function(a,b,c){var d=a("../cc"),e=a("../common/emitter").Emitter;d.emit||e.bind(d),c.exports=d}),e("cc/common/timer",function(a,b,c){var d=function(){function a(){this.timerId=0,this.isRunning=!1}return a.prototype.start=function(a,b){this.timerId&&clearInterval(this.timerId),this.timerId=setInterval(a,b),this.isRunning=!0},a.prototype.stop=function(){this.timerId&&clearInterval(this.timerId),this.isRunning=!1},a}();c.exports={Timer:d}}),e("cc/server/instance",function(a,b,c){var d=a("./node"),e=a("./commands"),f=function(){function a(){this.map={},this.list=[],this.server=null,this.process=b}a.prototype.init=function(a){if(!this.server){var b=128*a.bufLength+4096,c=a.bufLength,d=a.bufLength<<2;this.server=a,this.busClear=new Float32Array(b),this.map={},this.list=[],this.busOut=new Float32Array(b),this.busOutLen=a.bufLength<<1,this.busOutL=new Float32Array(this.busOut.buffer,0,c),this.busOutR=new Float32Array(this.busOut.buffer,d,c)}},a.prototype.append=function(a){if(!this.map[a]){var b=new g(this,a);this.map[a]=b,this.list.push(b),this.process=1===this.list.length?c:d}return this.map[a]},a.prototype.remove=function(a){var d=this.map[a];d&&(this.list.splice(this.list.indexOf(d),1),delete this.map[a],1===this.list.length?this.process=c:0===this.list.length&&(this.process=b))},a.prototype.play=function(a){var b=this.map[a];b&&b.play()},a.prototype.pause=function(a){var b=this.map[a];b&&b.pause()},a.prototype.reset=function(a){var b=this.map[a];b&&b.reset()},a.prototype.isRunning=function(){return this.list.some(function(a){return a.rootNode.running})},a.prototype.setSyncItems=function(a,b){var c=this.map[a];c&&c.syncItems.set(b)},a.prototype.setTimeline=function(a,b){var c=this.map[a];c&&(c.timeline=b)};var b=function(){this.busOut.set(this.busClear)},c=function(a,b){this.list[0].process(a,b),this.busOut.set(this.list[0].bus)},d=function(a,b){var c,d=this.list,e=this.busOut,f=this.busOutLen;e.set(this.busClear);for(var g=0,h=d.length;h>g;++g){c=d[g],c.process(a,b);for(var i=c.bus,j=c.busAmp,k=f;k--;)e[k]+=i[k]*j}};return a}(),g=function(){function a(a,b){var c=128*a.server.bufLength+4096;this.manager=a,this.userId=0|b,this.bus=new Float32Array(c),this.busClear=a.busClear,this.busIndex=0,this.busAmp=.8,this.timeline=0,this.rootNode=new d.Group(0,0,0,this),this.nodes={0:this.rootNode},this.fixNums={},this.defs={},this.buffers={},this.syncItems=new Float32Array(5)}return a.prototype.play=function(){this.rootNode.running=!0,this.bus.set(this.busClear)},a.prototype.pause=function(){this.rootNode.running=!1,this.bus.set(this.busClear),this.timeline=0},a.prototype.reset=function(){this.manager.busClear&&this.bus.set(this.manager.busClear),this.timeline=0,this.rootNode=new d.Group(0,0,0,this),this.nodes={0:this.rootNode},this.fixNums={},this.defs={},this.buffers={}},a.prototype.getFixNum=function(a){var b=this.fixNums;return b[a]||(b[a]={outs:[new Float32Array([a])]})},a.prototype.process=function(a,b){if(0!==this.timeline)for(var c=this.timeline[b],d=0,f=c.length;f>d;++d){var g=c[d],h=e[g[0]];h&&h.call(this,g)}this.bus.set(this.busClear),this.rootNode.process(a,this)},a}();c.exports={InstanceManager:f}}),e("cc/server/node",function(a,b,c){var d=a("./cc"),e=a("../common/extend"),f=a("./unit/unit").Unit,g={},h={};g[0]=function(a){var b;this instanceof m&&(null===this.head?this.head=this.tail=a:(b=this.head.prev,b&&(b.next=a),a.next=this.head,this.head.prev=a,this.head=a),a.parent=this)},g[1]=function(a){var b;this instanceof m&&(null===this.tail?this.head=this.tail=a:(b=this.tail.next,b&&(b.prev=a),a.prev=this.tail,this.tail.next=a,this.tail=a),a.parent=this)},g[2]=function(a){var b=this.prev;this.prev=a,a.prev=b,b&&(b.next=a),a.next=this,this.parent&&this.parent.head===this&&(this.parent.head=a),a.parent=this.parent},g[3]=function(a){var b=this.next;this.next=a,a.next=b,b&&(b.prev=a),a.prev=this,this.parent&&this.parent.tail===this&&(this.parent.tail=a),a.parent=this.parent},g[4]=function(a){a.next=this.next,a.prev=this.prev,a.head=this.head,a.tail=this.tail,a.parent=this.parent,this.prev&&(this.prev.next=a),this.next&&(this.next.prev=a),this.parent&&this.parent.head===this&&(this.parent.head=a),this.parent&&this.parent.tail===this&&(this.parent.tail=a)},h[0]=function(){},h[1]=function(){this.running=!1},h[2]=function(){i.call(this)},h[3]=function(){var a=this.prev;a&&i.call(a),i.call(this)},h[4]=function(){var a=this.next;i.call(this),a&&i.call(a)},h[5]=function(){var a=this.prev;a instanceof m?j(a):i.call(a),i.call(this)},h[6]=function(){var a=this.next;i.call(this),a?j(a):i.call(a)},h[7]=function(){var a=this.parent.head;if(a)for(var b=a;b&&b!==this;)a=b.next,i.call(b),b=a;i.call(this)},h[8]=function(){var a=this.next;if(i.call(this),a)for(var b=a;b;)a=b.next,i.call(b),b=a},h[9]=function(){var a=this.prev;i.call(this),a&&(a.running=!1)},h[10]=function(){var a=this.next;i.call(this),a&&(a.running=!1)},h[11]=function(){var a=this.prev;a instanceof m?k(a):i.call(a),i.call(this)},h[12]=function(){var a=this.next;i.call(this),a?k(a):i.call(a)},h[13]=function(){var a=this.parent.head;if(a)for(var b=a;b;)a=b.next,i.call(b),b=a},h[14]=function(){k(this)};var i=function(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.parent&&(this.parent.head===this&&(this.parent.head=this.next),this.parent.tail===this&&(this.parent.tail=this.prev),d.server.sendToClient(["/n_end",this.nodeId],this.instance)),this.prev=null,this.next=null,this.parent=null,this.blocking=!1,this.instance&&delete this.instance.nodes[this.nodeId]},j=function(a){var b=a.head;for(i.call(a),a=b;a;)b=a.next,i.call(a),a=b},k=function(a){var b=a.head;for(i.call(a),a=b;a;)b=a.next,i.call(a),a instanceof m&&k(a),a=b},l=function(){function a(a,b){this.nodeId=0|a,this.next=null,this.prev=null,this.parent=null,this.running=!0,this.instance=b}return a.prototype.play=function(){this.running=!0},a.prototype.pause=function(){this.running=!1},a.prototype.stop=function(){i.call(this)},a.prototype.doneAction=function(a,b){var c=h[a];c&&(d.server.sendToClient(["/n_done",this.nodeId,b],this.instance),c.call(this))},a}(),m=function(){function a(a,b,c,d){l.call(this,a,d),this.head=null,this.tail=null,b&&g[c].call(b,this)}return e(a,l),a.prototype.process=function(a,b){this.head&&this.running&&this.head.process(a,b),this.next&&this.next.process(a,b)},a}(),n=function(){function a(a,b,c,d,e,f){if(l.call(this,a,f),f){var h=f.defs[d];h&&this.build(h,e,f)}b&&g[c].call(b,this)}return e(a,l),a.prototype.build=function(a,b,c){this.specs=a;var d=a.consts.map(function(a){return c.getFixNum(a)}),e=a.defs.map(function(a){return new f(this,a)},this);return this.params=a.params,this.controls=new Float32Array(this.params.values),b=0,this.unitList=e.filter(function(a){for(var b=a.inputs,c=a.inRates,f=a.specs[3],g=a.specs[5],h=0,i=b.length;i>h;++h){var j=h<<1;-1===f[j]?(b[h]=d[f[j+1]].outs[0],c[h]=0):(b[h]=e[f[j]].outs[f[j+1]],c[h]=e[f[j]].outRates[f[j+1]])}return a.init(g),!!a.process}),this},a.prototype.set=function(a){for(var b=0,c=a.length;c>b;b+=2){var d=a[b],e=a[b+1];this.controls[d]=e}},a.prototype.process=function(a,b){if(this.running&&this.unitList)for(var c=this.unitList,d=0,e=c.length;e>d;++d){var f=c[d];f.process(f.rate.bufLength,b)}this.next&&this.next.process(a,b)},a}();c.exports={Node:l,Group:m,Synth:n}}),e("cc/server/unit/unit",function(a,b,c){var d=a("../cc"),e={},f=function(){function a(a,b){this.parent=a,this.specs=b,this.name=b[0],this.calcRate=b[1],this.specialIndex=b[2],this.numOfInputs=b[3].length>>1,this.numOfOutputs=b[4].length,this.inputs=new Array(this.numOfInputs),this.inRates=new Array(this.numOfInputs),this.outRates=b[4],this.rate=d.server.getRate(this.calcRate);for(var c=this.rate.bufLength,e=new Array(this.numOfOutputs),f=0,g=e.length;g>f;++f)e[f]=new Float32Array(c);this.outs=e,this.bufLength=c,this.done=!1}return a.prototype.init=function(a){var b=e[this.name];return b?b.call(this):console.warn(this.name+"'s ctor is not found."),this.tag=a,this},a.prototype.doneAction=function(a){this.done||(this.done=!0,this.parent.doneAction(a,this.tag))},a}(),g=function(){var a=function(){this.process=1===this.numOfOutputs?b:c,this.process(1)},b=function(){this.outs[0][0]=this.parent.controls[this.specialIndex]},c=function(){for(var a=this.parent.controls,b=this.outs,c=this.specialIndex,d=0,e=b.length;e>d;++d)b[d][0]=a[d+c]};return a},h=function(){var a=function(){this._bufLength=d.server.bufLength,2===this.calcRate?(this.process=b,this._busOffset=0):(this.process=c,this._busOffset=128*this._bufLength)},b=function(a,b){a=0|a;for(var c,d,e=this.inputs,f=b.bus,g=this._bufLength,h=(0|e[0][0])-1,i=1,j=e.length;j>i;++i){c=(h+i)*g,d=e[i];for(var k=0;a>k;k++)f[c+k]+=d[k]}},c=function(a,b){for(var c=this.inputs,d=b.bus,e=this._busOffset+(0|c[0][0])-1,f=1,g=c.length;g>f;++f)d[e+f]+=c[f][0]};return a},i=function(){var a=function(){this._bufLength=d.server.bufLength,2===this.calcRate?(this.process=b,this._busOffset=0):(this.process=c,this._busOffset=128*this._bufLength)},b=function(a,b){a=0|a;for(var c=this.outs[0],d=b.bus,e=this._bufLength,f=0|this.inputs[0][0]*e,g=0;a>g;++g)c[g]=d[f+g]},c=function(a,b){a=0|a;for(var c=this.outs[0],d=b.bus[this._busOffset+(0|this.inputs[0][0])],e=0;a>e;++e)c[e]=d};return a},j=function(a,b){e[a]=b()},k=function(){j("Control",g),j("Out",h),j("In",i)};c.exports={Unit:f,Control:g,register:j,install:k}}),e("cc/server/commands",function(a,b,c){var d=a("./node"),e=a("./buffer"),f={};f["/n_run"]=function(a){var b=0|a[1],c=!!a[2],d=this.nodes[b];d&&(d.running=c)},f["/n_free"]=function(a){var b=0|a[1],c=this.nodes[b];c&&c.doneAction(2)},f["/n_set"]=function(a){var b=0|a[1],c=a[2],d=this.nodes[b];d&&d.set(c)},f["/g_new"]=function(a){var b=0|a[1],c=0|a[2],e=0|a[3],f=this.nodes[e];f&&(this.nodes[b]=new d.Group(b,f,c,this))},f["/s_def"]=function(a){var b=0|a[1],c=JSON.parse(a[2]);this.defs[b]=c},f["/s_new"]=function(a){var b=0|a[1],c=0|a[2],e=0|a[3],f=0|a[4],g=this.nodes[e];g&&(this.nodes[b]=new d.Synth(b,g,c,f,{},this))},f["/b_new"]=function(a){var b=0|a[1];this.buffers[b]=new e.Buffer(b)},f["/b_set"]=function(a){var b=0|a[1],c=0|a[2],d=0|a[3],e=0|a[4],f=a[5],g=this.buffers[b];g&&g.set(c,d,e,f)},c.exports=f}),e("cc/server/buffer",function(a,b,c){var d=function(){function a(a){this.bufId=a,this.numFrames=0,this.numChannels=0,this.sampleRate=0,this.samples=null}return a.prototype.set=function(a,b,c,d){this.numFrames=a,this.numChannels=b,this.sampleRate=c,this.samples=d},a}();c.exports={Buffer:d}}),e("cc/server/unit/installer",function(a,b,c){var d=function(){a("./unit").install(),a("./basic_ops").install(),a("./bufio").install(),a("./delay").install(),a("./line").install(),a("./osc").install(),a("./pan").install(),a("./ui").install()};c.exports={install:d}}),e("cc/server/unit/basic_ops",function(a,b,c){var d=a("./unit"),e=a("../../client/ugen/basic_ops"),f=function(){var a=e.UNARY_OP_UGEN_MAP,b={},c=function(){var c=function(){var c,d=b[a[this.specialIndex]];if(d){switch(this.inRates[0]){case 2:c=d.a;break;case 1:c=d.k}this.process=c,this.process?this.process(1):this.outs[0][0]=d(this.inputs[0][0])}else console.log("UnaryOpUGen["+this.specialIndex+"] is not defined.")};return c},d=function(a){return function(){this.outs[0][0]=a(this.inputs[0][0])}},f=function(a){return function(b){b=0|b;for(var c=this.outs[0],d=this.inputs[0],e=0;b>e;e+=8)c[e]=a(d[e]),c[e+1]=a(d[e+1]),c[e+2]=a(d[e+2]),c[e+3]=a(d[e+3]),c[e+4]=a(d[e+4]),c[e+5]=a(d[e+5]),c[e+6]=a(d[e+6]),c[e+7]=a(d[e+7])}};return b.num=function(a){return+a},b.neg=function(a){return-a},b.not=function(a){return a>0?0:1},b.tilde=function(a){return~a},Object.keys(b).forEach(function(a){var c=b[a];c.a||(c.a=f(c)),c.k||(c.k=d(c))}),c}(),g=function(){var a=e.BINARY_OP_UGEN_MAP,b=22,c=21,d=20,f=12,g=11,h=10,i=2,j=1,k=0,l={},m=function(){var e=function(){var e,m=l[a[this.specialIndex]];if(m){switch(10*this.inRates[0]+this.inRates[1]){case b:e=m.aa;break;case c:e=m.ak;break;case d:e=m.ai;break;case f:e=m.ka;break;case g:e=m.kk;break;case h:e=m.ki;break;case i:e=m.ia;break;case j:e=m.ik;break;case k:e=m.ii}this.process=e,this._a=this.inputs[0][0],this._b=this.inputs[1][0],this.process?this.process(1):this.outs[0][0]=m(this.inputs[0][0],this.inputs[1][0])}else console.log("BinaryOpUGen["+this.specialIndex+"] is not defined.")};return e},n=function(a){return function(b){b=0|b;for(var c=this.outs[0],d=this.inputs[0],e=this.inputs[1],f=0;b>f;f+=8)c[f]=a(d[f],e[f]),c[f+1]=a(d[f+1],e[f+1]),c[f+2]=a(d[f+2],e[f+2]),c[f+3]=a(d[f+3],e[f+3]),c[f+4]=a(d[f+4],e[f+4]),c[f+5]=a(d[f+5],e[f+5]),c[f+6]=a(d[f+6],e[f+6]),c[f+7]=a(d[f+7],e[f+7])}},o=function(a){return function(b){b=0|b;for(var c=this.outs[0],d=this.inputs[0],e=this._b,f=this.inputs[1][0],g=(f-this._b)*this.rate.slopeFactor,h=0;b>h;h+=8)c[h]=a(d[h],e),e+=g,c[h+1]=a(d[h+1],e),e+=g,c[h+2]=a(d[h+2],e),e+=g,c[h+3]=a(d[h+3],e),e+=g,c[h+4]=a(d[h+4],e),e+=g,c[h+5]=a(d[h+5],e),e+=g,c[h+6]=a(d[h+6],e),e+=g,c[h+7]=a(d[h+7],e),e+=g;this._b=f}},p=function(a){return function(b){b=0|b;for(var c=this.outs[0],d=this.inputs[0],e=this._b,f=0;b>f;f+=8)c[f]=a(d[f],e),c[f+1]=a(d[f+1],e),c[f+2]=a(d[f+2],e),c[f+3]=a(d[f+3],e),c[f+4]=a(d[f+4],e),c[f+5]=a(d[f+5],e),c[f+6]=a(d[f+6],e),c[f+7]=a(d[f+7],e)}},q=function(a){return function(b){b=0|b;for(var c=this.outs[0],d=this._a,e=this.inputs[1],f=this.inputs[0][0],g=(f-this._a)*this.rate.slopeFactor,h=0;b>h;h+=8)c[h]=a(d,e[h]),d+=g,c[h+1]=a(d,e[h+1]),d+=g,c[h+2]=a(d,e[h+2]),d+=g,c[h+3]=a(d,e[h+3]),d+=g,c[h+4]=a(d,e[h+4]),d+=g,c[h+5]=a(d,e[h+5]),d+=g,c[h+6]=a(d,e[h+6]),d+=g,c[h+7]=a(d,e[h+7]),d+=g;this._a=f}},r=function(a){return function(){this.outs[0][0]=a(this.inputs[0][0],this.inputs[1][0])}},s=function(a){return function(b){b=0|b;for(var c=this.outs[0],d=this._a,e=this.inputs[1],f=0;b>f;f+=8)c[f]=a(d,e[f]),c[f+1]=a(d,e[f+1]),c[f+2]=a(d,e[f+2]),c[f+3]=a(d,e[f+3]),c[f+4]=a(d,e[f+4]),c[f+5]=a(d,e[f+5]),c[f+6]=a(d,e[f+6]),c[f+7]=a(d,e[f+7])}};return l["+"]=function(a,b){return a+b},l["+"].aa=function(a){a=0|a;
for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=0;a>e;e+=8)b[e]=c[e]+d[e],b[e+1]=c[e+1]+d[e+1],b[e+2]=c[e+2]+d[e+2],b[e+3]=c[e+3]+d[e+3],b[e+4]=c[e+4]+d[e+4],b[e+5]=c[e+5]+d[e+5],b[e+6]=c[e+6]+d[e+6],b[e+7]=c[e+7]+d[e+7]},l["+"].ak=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._b,e=this.inputs[1][0],f=(e-this._b)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]+d,d+=f,b[g+1]=c[g+1]+d,d+=f,b[g+2]=c[g+2]+d,d+=f,b[g+3]=c[g+3]+d,d+=f,b[g+4]=c[g+4]+d,d+=f,b[g+5]=c[g+5]+d,d+=f,b[g+6]=c[g+6]+d,d+=f,b[g+7]=c[g+7]+d,d+=f;this._b=e},l["+"].ai=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._b,e=0;a>e;e+=8)b[e]=c[e]+d,b[e+1]=c[e+1]+d,b[e+2]=c[e+2]+d,b[e+3]=c[e+3]+d,b[e+4]=c[e+4]+d,b[e+5]=c[e+5]+d,b[e+6]=c[e+6]+d,b[e+7]=c[e+7]+d},l["+"].ka=function(a){a=0|a;for(var b=this.outs[0],c=this._a,d=this.inputs[1],e=this.inputs[0][0],f=(e-this._a)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c+d[g],c+=f,b[g+1]=c+d[g+1],c+=f,b[g+2]=c+d[g+2],c+=f,b[g+3]=c+d[g+3],c+=f,b[g+4]=c+d[g+4],c+=f,b[g+5]=c+d[g+5],c+=f,b[g+6]=c+d[g+6],c+=f,b[g+7]=c+d[g+7],c+=f;this._a=e},l["+"].kk=function(){this.outs[0][0]=this.inputs[0][0]+this.inputs[1][0]},l["+"].ia=function(a){a=0|a;for(var b=this.outs[0],c=this._a,d=this.inputs[1],e=0;a>e;e+=8)b[e]=c+d[e],b[e+1]=c+d[e+1],b[e+2]=c+d[e+2],b[e+3]=c+d[e+3],b[e+4]=c+d[e+4],b[e+5]=c+d[e+5],b[e+6]=c+d[e+6],b[e+7]=c+d[e+7]},l["-"]=function(a,b){return a-b},l["-"].aa=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=0;a>e;e+=8)b[e]=c[e]-d[e],b[e+1]=c[e+1]-d[e+1],b[e+2]=c[e+2]-d[e+2],b[e+3]=c[e+3]-d[e+3],b[e+4]=c[e+4]-d[e+4],b[e+5]=c[e+5]-d[e+5],b[e+6]=c[e+6]-d[e+6],b[e+7]=c[e+7]-d[e+7]},l["-"].ak=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._b,e=this.inputs[1][0],f=(e-this._b)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]-d,d+=f,b[g+1]=c[g+1]-d,d+=f,b[g+2]=c[g+2]-d,d+=f,b[g+3]=c[g+3]-d,d+=f,b[g+4]=c[g+4]-d,d+=f,b[g+5]=c[g+5]-d,d+=f,b[g+6]=c[g+6]-d,d+=f,b[g+7]=c[g+7]-d,d+=f;this._b=e},l["-"].ai=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._b,e=0;a>e;e+=8)b[e]=c[e]-d,b[e+1]=c[e+1]-d,b[e+2]=c[e+2]-d,b[e+3]=c[e+3]-d,b[e+4]=c[e+4]-d,b[e+5]=c[e+5]-d,b[e+6]=c[e+6]-d,b[e+7]=c[e+7]-d},l["-"].ka=function(a){a=0|a;for(var b=this.outs[0],c=this._a,d=this.inputs[1],e=this.inputs[0][0],f=(e-this._a)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c-d[g],c+=f,b[g+1]=c-d[g+1],c+=f,b[g+2]=c-d[g+2],c+=f,b[g+3]=c-d[g+3],c+=f,b[g+4]=c-d[g+4],c+=f,b[g+5]=c-d[g+5],c+=f,b[g+6]=c-d[g+6],c+=f,b[g+7]=c-d[g+7],c+=f;this._a=e},l["-"].kk=function(){this.outs[0][0]=this.inputs[0][0]-this.inputs[1][0]},l["-"].ia=function(a){a=0|a;for(var b=this.outs[0],c=this._a,d=this.inputs[1],e=0;a>e;e+=8)b[e]=c-d[e],b[e+1]=c-d[e+1],b[e+2]=c-d[e+2],b[e+3]=c-d[e+3],b[e+4]=c-d[e+4],b[e+5]=c-d[e+5],b[e+6]=c-d[e+6],b[e+7]=c-d[e+7]},l["*"]=function(a,b){return a*b},l["*"].aa=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=0;a>e;e+=8)b[e]=c[e]*d[e],b[e+1]=c[e+1]*d[e+1],b[e+2]=c[e+2]*d[e+2],b[e+3]=c[e+3]*d[e+3],b[e+4]=c[e+4]*d[e+4],b[e+5]=c[e+5]*d[e+5],b[e+6]=c[e+6]*d[e+6],b[e+7]=c[e+7]*d[e+7]},l["*"].ak=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._b,e=this.inputs[1][0],f=(e-this._b)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]*d,d+=f,b[g+1]=c[g+1]*d,d+=f,b[g+2]=c[g+2]*d,d+=f,b[g+3]=c[g+3]*d,d+=f,b[g+4]=c[g+4]*d,d+=f,b[g+5]=c[g+5]*d,d+=f,b[g+6]=c[g+6]*d,d+=f,b[g+7]=c[g+7]*d,d+=f;this._b=e},l["*"].ai=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._b,e=0;a>e;e+=8)b[e]=c[e]*d,b[e+1]=c[e+1]*d,b[e+2]=c[e+2]*d,b[e+3]=c[e+3]*d,b[e+4]=c[e+4]*d,b[e+5]=c[e+5]*d,b[e+6]=c[e+6]*d,b[e+7]=c[e+7]*d},l["*"].ka=function(a){a=0|a;for(var b=this.outs[0],c=this._a,d=this.inputs[1],e=this.inputs[0][0],f=(e-this._a)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c*d[g],c+=f,b[g+1]=c*d[g+1],c+=f,b[g+2]=c*d[g+2],c+=f,b[g+3]=c*d[g+3],c+=f,b[g+4]=c*d[g+4],c+=f,b[g+5]=c*d[g+5],c+=f,b[g+6]=c*d[g+6],c+=f,b[g+7]=c*d[g+7],c+=f;this._a=e},l["*"].kk=function(){this.outs[0][0]=this.inputs[0][0]*this.inputs[1][0]},l["*"].ia=function(a){a=0|a;for(var b=this.outs[0],c=this._a,d=this.inputs[1],e=0;a>e;e+=8)b[e]=c*d[e],b[e+1]=c*d[e+1],b[e+2]=c*d[e+2],b[e+3]=c*d[e+3],b[e+4]=c*d[e+4],b[e+5]=c*d[e+5],b[e+6]=c*d[e+6],b[e+7]=c*d[e+7]},l["/"]=function(a,b){return 0===b?0:a/b},l["%"]=function(a,b){return 0===b?0:a%b},Object.keys(l).forEach(function(a){var b=l[a];b.aa||(b.aa=n(b)),b.ak||(b.ak=o(b)),b.ai||(b.ai=p(b)),b.ka||(b.ka=q(b)),b.kk||(b.kk=r(b)),b.ki||(b.ki=b.kk),b.ia||(b.ia=s(b)),b.ik||(b.ik=b.kk)}),m}(),h=function(){var a=function(){var a=this.inRates,c=b[a[0]][a[1]][a[2]];this.process=c,this._in=this.inputs[0][0],this._mul=this.inputs[1][0],this._add=this.inputs[2][0],this.process?this.process(1):this.outs[0][0]=this._in*this._mul+this._add},b={};return b[2]={},b[2][2]={},b[2][1]={},b[2][0]={},b[1]={},b[1][2]={},b[1][1]={},b[1][0]={},b[0]={},b[0][2]={},b[0][1]={},b[0][0]={},b[2][2][2]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=0;a>f;f+=8)b[f]=c[f]*d[f]+e[f],b[f+1]=c[f+1]*d[f+1]+e[f+1],b[f+2]=c[f+2]*d[f+2]+e[f+2],b[f+3]=c[f+3]*d[f+3]+e[f+3],b[f+4]=c[f+4]*d[f+4]+e[f+4],b[f+5]=c[f+5]*d[f+5]+e[f+5],b[f+6]=c[f+6]*d[f+6]+e[f+6],b[f+7]=c[f+7]*d[f+7]+e[f+7]},b[2][2][1]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this._add,f=this.inputs[2][0],g=(f-e)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d[h]+e,e+=g,b[h+1]=c[h+1]*d[h+1]+e,e+=g,b[h+2]=c[h+2]*d[h+2]+e,e+=g,b[h+3]=c[h+3]*d[h+3]+e,e+=g,b[h+4]=c[h+4]*d[h+4]+e,e+=g,b[h+5]=c[h+5]*d[h+5]+e,e+=g,b[h+6]=c[h+6]*d[h+6]+e,e+=g,b[h+7]=c[h+7]*d[h+7]+e,e+=g;this._add=f},b[2][2][0]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this._add,f=0;a>f;f+=8)b[f]=c[f]*d[f]+e,b[f+1]=c[f+1]*d[f+1]+e,b[f+2]=c[f+2]*d[f+2]+e,b[f+3]=c[f+3]*d[f+3]+e,b[f+4]=c[f+4]*d[f+4]+e,b[f+5]=c[f+5]*d[f+5]+e,b[f+6]=c[f+6]*d[f+6]+e,b[f+7]=c[f+7]*d[f+7]+e},b[2][1][2]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._mul,e=this.inputs[2],f=this.inputs[1][0],g=(f-d)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d+e[h],d+=g,b[h+1]=c[h+1]*d+e[h+1],d+=g,b[h+2]=c[h+2]*d+e[h+2],d+=g,b[h+3]=c[h+3]*d+e[h+3],d+=g,b[h+4]=c[h+4]*d+e[h+4],d+=g,b[h+5]=c[h+5]*d+e[h+5],d+=g,b[h+6]=c[h+6]*d+e[h+6],d+=g,b[h+7]=c[h+7]*d+e[h+7],d+=g;this._mul=f},b[2][1][1]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._mul,e=this._add,f=this.inputs[1][0],g=(f-d)*this.rate.slopeFactor,h=this.inputs[2][0],i=(h-e)*this.rate.slopeFactor,j=0;a>j;j+=8)b[j]=c[j]*d+e,d+=g,e+=i,b[j+1]=c[j+1]*d+e,d+=g,e+=i,b[j+2]=c[j+2]*d+e,d+=g,e+=i,b[j+3]=c[j+3]*d+e,d+=g,e+=i,b[j+4]=c[j+4]*d+e,d+=g,e+=i,b[j+5]=c[j+5]*d+e,d+=g,e+=i,b[j+6]=c[j+6]*d+e,d+=g,e+=i,b[j+7]=c[j+7]*d+e,d+=g,e+=i;this._mul=f,this._add=h},b[2][1][0]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._mul,e=this._add,f=this.inputs[1][0],g=(f-d)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d+e,d+=g,b[h+1]=c[h+1]*d+e,d+=g,b[h+2]=c[h+2]*d+e,d+=g,b[h+3]=c[h+3]*d+e,d+=g,b[h+4]=c[h+4]*d+e,d+=g,b[h+5]=c[h+5]*d+e,d+=g,b[h+6]=c[h+6]*d+e,d+=g,b[h+7]=c[h+7]*d+e,d+=g;this._mul=f},b[2][0][2]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._mul,e=this.inputs[2],f=0;a>f;f+=8)b[f]=c[f]*d+e[f],b[f+1]=c[f+1]*d+e[f+1],b[f+2]=c[f+2]*d+e[f+2],b[f+3]=c[f+3]*d+e[f+3],b[f+4]=c[f+4]*d+e[f+4],b[f+5]=c[f+5]*d+e[f+5],b[f+6]=c[f+6]*d+e[f+6],b[f+7]=c[f+7]*d+e[f+7]},b[2][0][1]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._mul,e=this._add,f=this.inputs[2][0],g=(f-e)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d+e,e+=g,b[h+1]=c[h+1]*d+e,e+=g,b[h+2]=c[h+2]*d+e,e+=g,b[h+3]=c[h+3]*d+e,e+=g,b[h+4]=c[h+4]*d+e,e+=g,b[h+5]=c[h+5]*d+e,e+=g,b[h+6]=c[h+6]*d+e,e+=g,b[h+7]=c[h+7]*d+e,e+=g;this._add=f},b[2][0][0]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._mul,e=this._add,f=this.inputs[1][0],g=(f-d)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d+e,d+=g,b[h+1]=c[h+1]*d+e,d+=g,b[h+2]=c[h+2]*d+e,d+=g,b[h+3]=c[h+3]*d+e,d+=g,b[h+4]=c[h+4]*d+e,d+=g,b[h+5]=c[h+5]*d+e,d+=g,b[h+6]=c[h+6]*d+e,d+=g,b[h+7]=c[h+7]*d+e,d+=g;this._mul=f},b[1][1][2]=function(a){a=0|a;for(var b=this.outs[0],c=this._in,d=this._mul,e=this.inputs[2],f=this.inputs[0][0],g=(f-c)*this.rate.slopeFactor,h=this.inputs[1][0],i=(h-d)*this.rate.slopeFactor,j=0;a>j;j+=8)b[j]=c*d+e[j],c+=g,d+=i,b[j+1]=c*d+e[j+1],c+=g,d+=i,b[j+2]=c*d+e[j+2],c+=g,d+=i,b[j+3]=c*d+e[j+3],c+=g,d+=i,b[j+4]=c*d+e[j+4],c+=g,d+=i,b[j+5]=c*d+e[j+5],c+=g,d+=i,b[j+6]=c*d+e[j+6],c+=g,d+=i,b[j+7]=c*d+e[j+7],c+=g,d+=i;this._in=f,this._mul=h},b[1][1][1]=function(){this.outs[0][0]=this.inputs[0][0]*this.inputs[1][0]+this.inputs[2][0]},b[1][1][0]=function(){this.outs[0][0]=this.inputs[0][0]*this.inputs[1][0]+this._add},b[1][0][2]=function(a){a=0|a;for(var b=this.outs[0],c=this._in,d=this._mul,e=this.inputs[2],f=this.inputs[0][0],g=(f-c)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c*d+e[h],c+=g,b[h+1]=c*d+e[h+1],c+=g,b[h+2]=c*d+e[h+2],c+=g,b[h+3]=c*d+e[h+3],c+=g,b[h+4]=c*d+e[h+4],c+=g,b[h+5]=c*d+e[h+5],c+=g,b[h+6]=c*d+e[h+6],c+=g,b[h+7]=c*d+e[h+7],c+=g;this._in=f},b[1][0][1]=function(){this.outs[0][0]=this.inputs[0][0]*this._mul+this.inputs[2][0]},b[1][0][0]=function(){this.outs[0][0]=this.inputs[0][0]*this._mul+this._add},b[0][2][2]=function(a){a=0|a;for(var b=this.outs[0],c=this._in,d=this.inputs[1],e=this.inputs[2],f=0;a>f;f+=8)b[f]=c*d[f]+e[f],b[f+1]=c*d[f+1]+e[f+1],b[f+2]=c*d[f+2]+e[f+2],b[f+3]=c*d[f+3]+e[f+3],b[f+4]=c*d[f+4]+e[f+4],b[f+5]=c*d[f+5]+e[f+5],b[f+6]=c*d[f+6]+e[f+6],b[f+7]=c*d[f+7]+e[f+7]},b[0][2][1]=function(a){a=0|a;for(var b=this.outs[0],c=this._in,d=this.inputs[1],e=this._add,f=this.inputs[2][0],g=(f-e)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c*d[h]+e,e+=g,b[h+1]=c*d[h+1]+e,e+=g,b[h+2]=c*d[h+2]+e,e+=g,b[h+3]=c*d[h+3]+e,e+=g,b[h+4]=c*d[h+4]+e,e+=g,b[h+5]=c*d[h+5]+e,e+=g,b[h+6]=c*d[h+6]+e,e+=g,b[h+7]=c*d[h+7]+e,e+=g;this._add=f},b[0][2][0]=function(a){a=0|a;for(var b=this.outs[0],c=this._in,d=this.inputs[1],e=this._add,f=0;a>f;f+=8)b[f]=c*d[f]+e,b[f+1]=c*d[f+1]+e,b[f+2]=c*d[f+2]+e,b[f+3]=c*d[f+3]+e,b[f+4]=c*d[f+4]+e,b[f+5]=c*d[f+5]+e,b[f+6]=c*d[f+6]+e,b[f+7]=c*d[f+7]+e},b[0][1][2]=function(a){a=0|a;for(var b=this.outs[0],c=this._in,d=this._mul,e=this.inputs[2],f=this.inputs[1][0],g=(f-d)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c*d+e[h],d+=g,b[h+1]=c*d+e[h+1],d+=g,b[h+2]=c*d+e[h+2],d+=g,b[h+3]=c*d+e[h+3],d+=g,b[h+4]=c*d+e[h+4],d+=g,b[h+5]=c*d+e[h+5],d+=g,b[h+6]=c*d+e[h+6],d+=g,b[h+7]=c*d+e[h+7],d+=g;this._mul=f},b[0][1][1]=function(){this.outs[0][0]=this._in*this.inputs[1][0]+this.inputs[2][0]},b[0][1][0]=function(){this.outs[0][0]=this._in*this.inputs[1][0]+this._add},b[0][0][2]=function(a){a=0|a;for(var b=this.outs[0],c=this._in,d=this._mul,e=this.inputs[2],f=0;a>f;f+=8)b[f]=c*d+e[f],b[f+1]=c*d+e[f+1],b[f+2]=c*d+e[f+2],b[f+3]=c*d+e[f+3],b[f+4]=c*d+e[f+4],b[f+5]=c*d+e[f+5],b[f+6]=c*d+e[f+6],b[f+7]=c*d+e[f+7]},b[0][0][1]=function(){this.outs[0][0]=this._in*this._mul+this.inputs[2][0]},a},i=function(){var a=function(){var a=this.inRates,c=b[a[0]][a[1]][a[2]];this.process=c,this._in0=this.inputs[0][0],this._in1=this.inputs[1][0],this._in2=this.inputs[2][0],this.process?this.process(1):this.outs[0][0]=this._in0*this._in1+this._in2},b={};return b[2]={},b[2][2]={},b[2][1]={},b[2][0]={},b[1]={},b[1][1]={},b[1][0]={},b[2][2][2]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=0;a>f;f+=8)b[f]=c[f]+d[f]+e[f],b[f+1]=c[f+1]+d[f+1]+e[f+1],b[f+2]=c[f+2]+d[f+2]+e[f+2],b[f+3]=c[f+3]+d[f+3]+e[f+3],b[f+4]=c[f+4]+d[f+4]+e[f+4],b[f+5]=c[f+5]+d[f+5]+e[f+5],b[f+6]=c[f+6]+d[f+6]+e[f+6],b[f+7]=c[f+7]+d[f+7]+e[f+7]},b[2][2][1]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this._in2,f=this.inputs[2][0],g=(f-e)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]+d[h]+e,e+=g,b[h+1]=c[h+1]+d[h+1]+e,e+=g,b[h+2]=c[h+2]+d[h+2]+e,e+=g,b[h+3]=c[h+3]+d[h+3]+e,e+=g,b[h+4]=c[h+4]+d[h+4]+e,e+=g,b[h+5]=c[h+5]+d[h+5]+e,e+=g,b[h+6]=c[h+6]+d[h+6]+e,e+=g,b[h+7]=c[h+7]+d[h+7]+e,e+=g;this._in2=f},b[2][2][0]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this._in2,f=0;a>f;f+=8)b[f]=c[f]+d[f]+e,b[f+1]=c[f+1]+d[f+1]+e,b[f+2]=c[f+2]+d[f+2]+e,b[f+3]=c[f+3]+d[f+3]+e,b[f+4]=c[f+4]+d[f+4]+e,b[f+5]=c[f+5]+d[f+5]+e,b[f+6]=c[f+6]+d[f+6]+e,b[f+7]=c[f+7]+d[f+7]+e},b[2][1][1]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._in1+this._in2,e=this.inputs[1][0]+this.inputs[2][0],f=(e-d)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]+d,d+=f,b[g+1]=c[g+1]+d,d+=f,b[g+2]=c[g+2]+d,d+=f,b[g+3]=c[g+3]+d,d+=f,b[g+4]=c[g+4]+d,d+=f,b[g+5]=c[g+5]+d,d+=f,b[g+6]=c[g+6]+d,d+=f,b[g+7]=c[g+7]+d,d+=f;this._in1=this.inputs[1][0],this._in2=this.inputs[2][0]},b[2][1][0]=b[2][1][1],b[2][0][0]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._in1+this._in2,e=0;a>e;e+=8)b[e]=c[e]+d,b[e+1]=c[e+1]+d,b[e+2]=c[e+2]+d,b[e+3]=c[e+3]+d,b[e+4]=c[e+4]+d,b[e+5]=c[e+5]+d,b[e+6]=c[e+6]+d,b[e+7]=c[e+7]+d},b[1][1][1]=function(){this.outs[0][0]=this.inputs[0][0]+this.inputs[1][0]+this.inputs[2][0]},b[1][1][0]=b[1][1][1],b[1][0][0]=b[1][1][1],a},j=function(){var a=function(){var a=this.inRates,c=b[a[0]][a[1]][a[2]][a[3]];this.process=c,this._in0=this.inputs[0][0],this._in1=this.inputs[1][0],this._in2=this.inputs[2][0],this._in3=this.inputs[3][0],this.process?this.process(1):this.outs[0][0]=this._in0*this._in1+this._in2+this._in3},b={};return b[2]={},b[2][2]={},b[2][2][2]={},b[2][2][1]={},b[2][2][0]={},b[2][1]={},b[2][1][1]={},b[2][1][0]={},b[2][0]={},b[2][0][0]={},b[1]={},b[1][1]={},b[1][1][1]={},b[1][1][0]={},b[1][0]={},b[1][0][0]={},b[0]={},b[0][0]={},b[0][0][0]={},b[2][2][2][2]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=this.inputs[3],g=0;a>g;g+=8)b[g]=c[g]+d[g]+e[g]+f[g],b[g+1]=c[g+1]+d[g+1]+e[g+1]+f[g+1],b[g+2]=c[g+2]+d[g+2]+e[g+2]+f[g+2],b[g+3]=c[g+3]+d[g+3]+e[g+3]+f[g+3],b[g+4]=c[g+4]+d[g+4]+e[g+4]+f[g+4],b[g+5]=c[g+5]+d[g+5]+e[g+5]+f[g+5],b[g+6]=c[g+6]+d[g+6]+e[g+6]+f[g+6],b[g+7]=c[g+7]+d[g+7]+e[g+7]+f[g+7]},b[2][2][2][1]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=this._in3,g=this.inputs[3][0],h=(g-f)*this.rate.slopeFactor,i=0;a>i;i+=8)b[i]=c[i]+d[i]+e[i]+f,f+=h,b[i+1]=c[i+1]+d[i+1]+e[i+1]+f,f+=h,b[i+2]=c[i+2]+d[i+2]+e[i+2]+f,f+=h,b[i+3]=c[i+3]+d[i+3]+e[i+3]+f,f+=h,b[i+4]=c[i+4]+d[i+4]+e[i+4]+f,f+=h,b[i+5]=c[i+5]+d[i+5]+e[i+5]+f,f+=h,b[i+6]=c[i+6]+d[i+6]+e[i+6]+f,f+=h,b[i+7]=c[i+7]+d[i+7]+e[i+7]+f,f+=h;this._in3=g},b[2][2][2][0]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=this._in3,g=0;a>g;g+=8)b[g]=c[g]+d[g]+e[g]+f,b[g+1]=c[g+1]+d[g+1]+e[g+1]+f,b[g+2]=c[g+2]+d[g+2]+e[g+2]+f,b[g+3]=c[g+3]+d[g+3]+e[g+3]+f,b[g+4]=c[g+4]+d[g+4]+e[g+4]+f,b[g+5]=c[g+5]+d[g+5]+e[g+5]+f,b[g+6]=c[g+6]+d[g+6]+e[g+6]+f,b[g+7]=c[g+7]+d[g+7]+e[g+7]+f},b[2][2][1][1]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this._in2+this._in3,f=this.inputs[2][0]+this.inputs[3][0],g=(f-e)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]+d[h]+e,e+=g,b[h+1]=c[h+1]+d[h+1]+e,e+=g,b[h+2]=c[h+2]+d[h+2]+e,e+=g,b[h+3]=c[h+3]+d[h+3]+e,e+=g,b[h+4]=c[h+4]+d[h+4]+e,e+=g,b[h+5]=c[h+5]+d[h+5]+e,e+=g,b[h+6]=c[h+6]+d[h+6]+e,e+=g,b[h+7]=c[h+7]+d[h+7]+e,e+=g;this._in2=this.inputs[2][0],this._in3=this.inputs[2][0]},b[2][2][1][0]=b[2][2][1][1],b[2][2][0][0]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this.inputs[1],e=this._in2+this._in3,f=0;a>f;f+=8)b[f]=c[f]+d[f]+e,b[f+1]=c[f+1]+d[f+1]+e,b[f+2]=c[f+2]+d[f+2]+e,b[f+3]=c[f+3]+d[f+3]+e,b[f+4]=c[f+4]+d[f+4]+e,b[f+5]=c[f+5]+d[f+5]+e,b[f+6]=c[f+6]+d[f+6]+e,b[f+7]=c[f+7]+d[f+7]+e},b[2][1][1][1]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._in1+this._in2+this._in3,e=this.inputs[1][0]+this.inputs[2][0]+this.inputs[3][0],f=(e-d)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]+d,d+=f,b[g+1]=c[g+1]+d,d+=f,b[g+2]=c[g+2]+d,d+=f,b[g+3]=c[g+3]+d,d+=f,b[g+4]=c[g+4]+d,d+=f,b[g+5]=c[g+5]+d,d+=f,b[g+6]=c[g+6]+d,d+=f,b[g+7]=c[g+7]+d,d+=f;this._in1=this.inputs[1][0],this._in2=this.inputs[2][0],this._in3=this.inputs[3][0]},b[2][1][1][0]=b[2][1][1][1],b[2][1][0][0]=b[2][1][1][1],b[2][0][0][0]=function(a){a=0|a;for(var b=this.outs[0],c=this.inputs[0],d=this._in1+this._in2+this._in3,e=0;a>e;e+=8)b[e]=c[e]+d,b[e+1]=c[e+1]+d,b[e+2]=c[e+2]+d,b[e+3]=c[e+3]+d,b[e+4]=c[e+4]+d,b[e+5]=c[e+5]+d,b[e+6]=c[e+6]+d,b[e+7]=c[e+7]+d},b[1][1][1][1]=function(){this.outs[0][0]=this.inputs[0][0]+this.inputs[1][0]+this.inputs[2][0]+this.inputs[3][0]},b[1][1][1][0]=b[1][1][1][1],b[1][1][0][0]=b[1][1][1][1],b[1][0][0][0]=b[1][1][1][1],a};c.exports={install:function(){d.register("UnaryOpUGen",f),d.register("BinaryOpUGen",g),d.register("MulAdd",h),d.register("Sum3",i),d.register("Sum4",j)}}}),e("cc/server/unit/bufio",function(a,b,c){var d=a("./unit"),e=function(a,b,c,d){if(b>=c){if(!d)return a.done=!0,c;if(b-=c,c>b)return b}else{if(!(0>b))return b;if(!d)return a.done=!0,0;if(b+=c,b>=0)return b}return b-c*Math.floor(b/c)},f=function(a,b,c,d,e){var f=c,g=.5*(d-b),h=b-2.5*c+2*d-.5*e,i=.5*(e-b)+1.5*(c-d);return((i*a+h)*a+g)*a+f},g=function(){var a=function(){this._buffer=null,this._phase=this.inputs[3][0],this._trig=0,this.process=b},b=function(a,b){this._buffer=b.buffers[this.specialIndex],this._buffer&&null!==this._buffer.samples&&(this.process=2===this.inRates[1]?2===this.inRates[2]?c:c:2===this.inRates[2]?c:c,this.process.call(this,a))},c=function(a){a=0|a;var b,c,d,g,h,i,j,k,l,m,n=this._buffer,o=this.outs,p=this._phase,q=this.inputs[1][0],r=this.inputs[2][0],s=this.inputs[4][0],t=n.samples,u=n.numChannels,v=n.numFrames,w=v-1;r>0&&this._trig<=0&&(this.done=!1,p=this.inputs[3][0]),this._trig=r;for(var x=0;a>x;++x){p=e(this,p,w,s),c=0|p,b=c-1,d=c+1,g=d+1,0===c?b=s?w:c:g>w&&(d>w?s?(d=0,g=1):d=g=w:g=s?0:w),h=p-(0|p);for(var y=0,z=o.length;z>y;++y)m=v*(y%u),i=t[b+m],j=t[c+m],k=t[d+m],l=t[g+m],o[y][x]=f(h,i,j,k,l);p+=q}this.done&&this.doneAction(0|this.inputs[5][0],this.tag),this._phase=p};return a};c.exports={install:function(){d.register("PlayBuf",g)}}}),e("cc/server/unit/delay",function(a,b,c){var d=a("./unit"),e=Math.log(.001),f=function(a,b,c){return Math.max(c,Math.min(b*a.rate.sampleRate,a._fdelaylen))},g=function(a,b){return 0===a||0===b?0:b>0?+Math.exp(e*a/+b):-Math.exp(e*a/-b)},h=function(a,b,c,d,e){var f=c,g=.5*(d-b),h=b-2.5*c+2*d-.5*e,i=.5*(e-b)+1.5*(c-d);return((i*a+h)*a+g)*a+f},i=function(){var a;this._maxdelaytime=this.inputs[1][0],this._delaytime=this.inputs[2][0],this._decaytime=this.inputs[3][0],a=Math.ceil(this._maxdelaytime*this.rate.sampleRate+1),a+=this.rate.bufLength,a=1<<Math.ceil(Math.log(a)*Math.LOG2E),this._fdelaylen=this._idelaylen=a,this._dlybuf=new Float32Array(a),this._mask=a-1,this._dsamp=f(this,this._delaytime,1),this._iwrphase=0,this._feedbk=g(this._delaytime,this._decaytime)},j=function(){var a=function(){this.process=b,i.call(this)},b=function(a){a=0|a;var b,c,d,e,h,i,j,k=this.outs[0],l=this.inputs[0],m=this.inputs[2][0],n=this.inputs[3][0],o=this._dlybuf,p=this._iwrphase,q=this._dsamp,r=this._feedbk,s=this._mask;if(m===this._delaytime)if(b=p-(0|q),n===this._decaytime)for(j=0;a>j;++j)c=o[b&s],o[p&s]=l[j]+r*c,k[j]=c,b++,p++;else{for(d=g(m,n),e=(d-r)*this.rate.slopeFactor,j=0;a>j;++j)c=o[b&s],o[p&s]=l[j]+r*c,k[j]=c,r+=e,b++,p++;this._feedbk=d,this._decaytime=n}else{for(h=f(this,m,1),i=(h-q)*this.rate.slopeFactor,d=g(m,n),e=(d-r)*this.rate.slopeFactor,j=0;a>j;++j)b=p-(0|q),c=o[b&s],o[p&s]=l[j]+r*c,k[j]=c,q+=i,r+=e,b++,p++;this._feedbk=r,this._dsamp=q,this._delaytime=m,this._decaytime=n}this._iwrphase=p};return a},k=function(){var a=function(){this.process=b,i.call(this)},b=function(a){a=0|a;var b,c,d,e,h,i,j,k,l,m,n=this.outs[0],o=this.inputs[0],p=this.inputs[2][0],q=this.inputs[3][0],r=this._dlybuf,s=this._iwrphase,t=this._dsamp,u=this._feedbk,v=this._mask;if(p===this._delaytime)if(b=s-(0|t),c=t-(0|t),q===this._decaytime)for(m=0;a>m;++m)e=r[b&v],h=r[b-1&v],d=e+c*(h-e),r[s&v]=o[m]+u*d,n[m]=d,b++,s++;else{for(i=g(p,q),j=(i-u)*this.rate.slopeFactor,m=0;a>m;++m)e=r[b&v],h=r[b-1&v],d=e+c*(h-e),r[s&v]=o[m]+u*d,n[m]=d,u+=j,b++,s++;this._feedbk=i,this._decaytime=q}else{for(k=f(this,p,1),l=(k-t)*this.rate.slopeFactor,i=g(p,q),j=(i-u)*this.rate.slopeFactor,m=0;a>m;++m)b=s-(0|t),e=r[b&v],h=r[b-1&v],d=e+c*(h-e),r[s&v]=o[m]+u*d,n[m]=d,t+=l,u+=j,b++,s++;this._feedbk=u,this._dsamp=t,this._delaytime=p,this._decaytime=q}this._iwrphase=s};return a},l=function(){var a=function(){this.process=b,i.call(this)},b=function(a){a=0|a;var b,c,d,e,i,j,k,l,m,n,o,p,q=this.outs[0],r=this.inputs[0],s=this.inputs[2][0],t=this.inputs[3][0],u=this._dlybuf,v=this._iwrphase,w=this._dsamp,x=this._feedbk,y=this._mask;if(s===this._delaytime)if(b=v-(0|w),c=w-(0|w),t===this._decaytime)for(p=0;a>p;++p)e=u[b+1&y],i=u[b&y],j=u[b-1&y],k=u[b-2&y],d=h(c,e,i,j,k),u[v&y]=r[p]+x*d,q[p]=d,b++,v++;else{for(l=g(s,t),m=(l-x)*this.rate.slopeFactor,p=0;a>p;++p)e=u[b+1&y],i=u[b&y],j=u[b-1&y],k=u[b-2&y],d=h(c,e,i,j,k),u[v&y]=r[p]+x*d,q[p]=d,x+=m,b++,v++;this._feedbk=l,this._decaytime=t}else{for(n=f(this,s,1),o=(n-w)*this.rate.slopeFactor,l=g(s,t),m=(l-x)*this.rate.slopeFactor,p=0;a>p;++p)b=v-(0|w),e=u[b+1&y],i=u[b&y],j=u[b-1&y],k=u[b-2&y],d=h(c,e,i,j,k),u[v&y]=r[p]+x*d,q[p]=d,w+=o,x+=m,b++,v++;this._feedbk=x,this._dsamp=w,this._delaytime=s,this._decaytime=t}this._iwrphase=v};return a};c.exports={install:function(){d.register("CombN",j),d.register("CombL",k),d.register("CombC",l)}}}),e("cc/server/unit/line",function(a,b,c){var d=a("./unit"),e=function(){var a=function(){this.process=b;var a=this.inputs[0][0],c=this.inputs[1][0],d=this.inputs[2][0],e=Math.round(d*this.rate.sampleRate);this._counter=Math.max(1,e),0===e?(this._level=c,this._slope=0):(this._slope=(c-a)/this._counter,this._level=a+this._slope),this._endLevel=c,this._doneAction=this.inputs[3][0],this.outs[0][0]=this._level},b=function(a){a=0|a;var b,c=this.outs[0],d=this._level,e=this._counter,f=this._slope,g=a;do{var h;if(0===e){h=g,g=0;var i=this._endLevel;for(b=0;h>b;++b)c[b]=i}else{for(h=Math.min(g,e),e-=h,g-=h,b=0;h>b;++b)c[b]=d,d+=f;0===e&&this.doneAction(this._doneAction)}}while(g);this._counter=e,this._level=d};return a};c.exports={install:function(){d.register("Line",e)}}}),e("cc/server/unit/osc",function(a,b,c){var d=a("./unit"),e=a("./table"),f=2*Math.PI,g=e.kSineSize,h=e.kSineMask,i=e.gSineWavetable,j=function(){var a=function(){this._freq=this.inputs[0][0],this._phase=this.inputs[1][0],this._radtoinc=g/f,this._cpstoinc=g*this.rate.sampleDur,this._mask=h,this._table=i,2===this.inRates[0]?(this.process=2===this.inRates[1]?b:1===this.inRates[1]?c:d,this._x=0):2===this.inRates[1]?(this.process=e,this._x=0):(this.process=j,this._x=this._phase*this._radtoinc),j.call(this,1)},b=function(a){a=0|a;var b,c,d,e=this.outs[0],f=this.inputs[0],g=this.inputs[1],h=this._mask,i=this._table,j=this._cpstoinc,k=this._radtoinc,l=this._x;for(d=0;a>d;++d)b=l+k*g[d],c=(b&h)<<1,e[d]=i[c]+(b-(0|b))*i[c+1],l+=f[d]*j;this._x=l},c=function(a){a=0|a;var b,c,d,e=this.outs[0],f=this.inputs[0],g=this.inputs[1][0],h=this._mask,i=this._table,j=this._radtoinc,k=this._cpstoinc,l=this._phase,m=this._x;if(g===l)for(l*=j,d=0;a>d;++d)b=m+l,c=(b&h)<<1,e[d]=i[c]+(b-(0|b))*i[c+1],m+=f[d]*k;else{var n=(g-l)*this.rate.slopeFactor;for(d=0;a>d;++d)b=m+j*l,c=(b&h)<<1,e[d]=i[c]+(b-(0|b))*i[c+1],l+=n,m+=f[d]*k;this._phase=g}this._x=m},d=function(a){a=0|a;var b,c,d,e=this.outs[0],f=this.inputs[0],g=this._phase*this._radtoinc,h=this._mask,i=this._table,j=this._cpstoinc,k=this._x;for(d=0;a>d;++d)b=k+g,c=(b&h)<<1,e[d]=i[c]+(b-(0|b))*i[c+1],k+=j*f[d];this._x=k},e=function(a){a=0|a;var b,c,d,e=this.outs[0],f=this.inputs[0][0],g=this.inputs[1],h=this._mask,i=this._table,j=this._radtoinc,k=this._cpstoinc,l=this._freq,m=this._x;if(f===l)for(l*=k,d=0;a>d;++d)b=m+j*g[d],c=(b&h)<<1,e[d]=i[c]+(b-(0|b))*i[c+1],m+=l;else{var n=(f-l)*this.rate.slopeFactor;for(d=0;a>d;++d)b=m+j*g[d],c=(b&h)<<1,e[d]=i[c]+(b-(0|b))*i[c+1],m+=l*k,l+=n;this._freq=f}this._x=m},j=function(a){a=0|a;var b,c,d,e=this.outs[0],f=this.inputs[0][0],g=this.inputs[1][0],h=this._mask,i=this._table,j=this._radtoinc,k=this._cpstoinc,l=this._freq,m=this._phase,n=this._x;if(f===l&&g===m)for(l*=k,m*=j,d=0;a>d;++d)b=n+m,c=(b&h)<<1,e[d]=i[c]+(b-(0|b))*i[c+1],n+=l;else{var o=(f-l)*this.rate.slopeFactor,p=(g-m)*this.rate.slopeFactor;for(d=0;a>d;++d)b=n+j*m,c=(b&h)<<1,e[d]=i[c]+(b-(0|b))*i[c+1],n+=l*k,l+=o,m+=p;this._freq=f,this._phase=g}this._x=n};return a};c.exports={install:function(){d.register("SinOsc",j)}}}),e("cc/server/unit/table",function(a,b,c){var d=2*Math.PI,e=8192,f=e-1,g=new Float32Array([1e20])[0],h=new Float32Array(e+1),i=new Float32Array(e+1),j=new Float32Array(2*e);!function(){var a;for(a=0;e>a;++a){var b=Math.sin(d*(a/e));h[a]=b,i[a]=1/b}h[e]=h[0],i[0]=i[e>>1]=i[e]=g;var c=e,f=c>>1;for(a=1;8>=a;++a)i[a]=i[c-a]=i[f-a]=i[f+a]=g}(),function(){!function(a,b,c){var d,e,f,g;for(f=g=0;c-1>f;++f)d=a[f],e=a[f+1],b[g++]=2*d-e,b[g++]=e-d;d=a[c-1],e=a[0],b[g++]=2*d-e,b[g++]=e-d}(h,j,e)}(),c.exports={kSineSize:e,kSineMask:f,gSine:h,gInvSine:i,gSineWavetable:j}}),e("cc/server/unit/pan",function(a,b,c){var d=a("./unit"),e=a("./table"),f=e.gSine,g=function(){var a=function(){this.process=2===this.inRates[1]?c:b,this._pos=this.inputs[1][0],this._level=this.inputs[2][0];var a=0|1024*this._pos+1024+.5;a=Math.max(0,Math.min(a,2048)),this._leftAmp=this._level*f[2048-a],this._rightAmp=this._level*f[a],c.call(this,1)},b=function(a){a=0|a;var b,c,d=this.outs[0],e=this.outs[1],g=this.inputs[0],h=this.inputs[1][0],i=this.inputs[2][0],j=this._leftAmp,k=this._rightAmp;if(h!==this._pos||i!==this._level){var l=0|1024*h+1024+.5;l=Math.max(0,Math.min(l,2048));var m=i*f[2048-l],n=i*f[l],o=this.rate.slopeFactor,p=(m-j)*o,q=(n-k)*o;for(b=0;a>b;++b)c=g[b],d[b]=c*j,e[b]=c*k,j+=p,k+=q;this._pos=h,this._level=i,this._leftAmp=m,this._rightAmp=n}else for(b=0;a>b;++b)c=g[b],d[b]=c*j,e[b]=c*k},c=function(a){a=0|a;var b,c,d,e,g,h=this.outs[0],i=this.outs[1],j=this.inputs[0],k=this.inputs[1],l=this.inputs[2][0],m=this._level;if(m!==l){var n=(l-m)*this.rate.slopeFactor;for(b=0;a>b;++b)d=0|1024*k[b]+1024+.5,d=Math.max(0,Math.min(d,2048)),e=m*f[2048-d],g=m*f[d],c=j[b],h[b]=c*e,i[b]=c*g,m+=n;this._level=l}else for(b=0;a>b;++b)d=0|1024*k[b]+1024+.5,d=Math.max(0,Math.min(d,2048)),e=m*f[2048-d],g=m*f[d],c=j[b],h[b]=c*e,i[b]=c*g};return a};c.exports={install:function(){d.register("Pan2",g)}}}),e("cc/server/unit/ui",function(a,b,c){var d=a("../cc"),e=a("./unit"),f=Math.log(.001),g=function(){var a=function(){this.process=b,this._y1=0,this._b1=0,this._lag=0,this.process(1)},b=function(a,b){var c=this.inputs[0][0]||.01,d=this.inputs[1][0],e=this.inputs[2][0],g=this.inputs[3][0],h=this._y1,i=this._b1;g!==this._lag&&(this._b1=0===g?0:Math.exp(f/(g*this.rate.sampleRate)),this._lag=g);var j=b?b.syncItems[2]:0;j=0===e?(d-c)*j+c:Math.pow(d/c,j)*c,this.outs[0][0]=h=j+i*(h-j),this._y1=h};return a},h=function(){var a=function(){this.process=b,this._y1=0,this._b1=0,this._lag=0,this.process(1)},b=function(a,b){var c=this.inputs[0][0]||.01,d=this.inputs[1][0],e=this.inputs[2][0],g=this.inputs[3][0],h=this._y1,i=this._b1;g!==this._lag&&(this._b1=0===g?0:Math.exp(f/(g*this.rate.sampleRate)),this._lag=g);var j=b?b.syncItems[3]:0;j=0===e?(d-c)*j+c:Math.pow(d/c,j)*c,this.outs[0][0]=h=j+i*(h-j),this._y1=h};return a},i=function(){var a=function(){this.process=b,this._y1=0,this._b1=0,this._lag=0,this._mouse=d.server.syncItems,this.process(1)},b=function(a,b){var c=this.inputs[0][0],d=this.inputs[1][0],e=this.inputs[2][0],g=this._y1,h=this._b1;e!==this._lag&&(this._b1=0===e?0:Math.exp(f/(e*this.rate.sampleRate)),this._lag=e);var i=b?b.syncItems[1]?d:c:c;this.outs[0][0]=g=i+h*(g-i),this._y1=g};return a};c.exports={install:function(){e.register("MouseX",g),e.register("MouseY",h),e.register("MouseButton",i)}}});var f=c("cc/cc","cc/loader");"undefined"!=typeof module&&(module.exports=f)}(this.self||global);
//# sourceMappingURL=coffee-collider-min.map