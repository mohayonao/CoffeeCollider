!function(a){"use strict";var b=function(a,c){b.modules||(b.modules={},b.payloads={}),b.payloads[a]=c,b.modules[a]=null},c=function(a,e){e=d(a,e);var f=b.modules[e];if(!f){f=b.payloads[e];var g={},h={id:e,exports:g},i=function(a){return c(e,a)},j=null;f?(f(i,g,h),g=j||h.exports):g=-1,b.modules[e]=g,delete b.payloads[e]}return f=b.modules[e]=g||f},d=function(a,b){if("."===b.charAt(0)){var c=a.split("/").slice(0,-1).join("/");b=c+"/"+b;for(var d;-1!==b.indexOf(".")&&d!==b;)d=b,b=b.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return b};"function"==typeof require&&(a.require=require);var e=b;e("cc/loader",function(b,c,d){var e=b("./cc");if("undefined"!=typeof document){var f=document.getElementsByTagName("script");if(f&&f.length)for(var g=0;g<f.length;g++){var h=/^(.*\/)coffee-collider(?:-dev)?\.js(\#.*)?$/.exec(f[g].src);if(h){e.rootPath=h[1],e.coffeeColliderPath=h[0],e.coffeeColliderHash=h[2];break}}e.opmode="client",e.context="client",b("./client/client"),a.CoffeeCollider=function(a){return e.createSynthClient(a)},a.CoffeeCollider.version=e.version}else"undefined"!=typeof WorkerLocation?"#socket"===location.hash?(e.opmode="socket",e.context="lang",b("./lang/lang"),e.lang=e.createSynthLang()):(e.opmode="worker",e.context="lang/server",b("./lang/lang"),b("./server/server"),e.lang=e.createSynthLang(),e.server=e.createSynthServer(),e.lang.sendToServer=e.server.recvFromLang.bind(e.server),e.server.sendToLang=e.lang.recvFromServer.bind(e.lang),e.server.connect()):"undefined"!=typeof a.GLOBAL&&(e.global.CoffeeCollider=function(){return e.opmode="nodejs",e.context="client/lang/server",b("./client/client"),b("./lang/lang"),b("./server/server"),e.client=e.createSynthClient({nodejs:!0}),e.lang=e.createSynthLang(),e.server=e.createSynthServer(),e.client.impl.sendToLang=e.lang.recvFromClient.bind(e.lang),e.lang.sendToServer=e.server.recvFromLang.bind(e.server),e.server.sendToLang=e.lang.recvFromServer.bind(e.lang),e.lang.sendToClient=e.client.impl.recvFromLang.bind(e.client.impl),e.server.connect(),e.client},e.global.SocketSynthServer=function(a){return e.opmode="socket",e.context="server",b("./server/server"),e.server=e.createSynthServer(),e.server.exports.createServer(a)},e.global.version=e.version,d.exports=e.global)}),e("cc/cc",function(a,b,c){c.exports={version:"0.1.0",global:{},Object:function(){},ugen:{specs:{}},unit:{specs:{}}}}),e("cc/client/client",function(a,b,c){var d=a("../cc"),e=a("../common/emitter"),f=a("../common/pack").unpack,g={},h=[].slice,i=function(){function a(a){e.mixin(this),a=a||{},this.version=d.version,this.impl=a.socket?d.createSynthClientSocketImpl(this,a):a.nodejs?d.createSynthClientNodeJSImpl(this,a):d.createSynthClientWorkerImpl(this,a),this.sampleRate=this.impl.sampleRate,this.channels=this.impl.channels}return a.prototype.play=function(){return this.impl.play(),this},a.prototype.pause=function(){return this.impl.pause(),this},a.prototype.reset=function(){return this.impl.reset(),this},a.prototype.execute=function(){return this.impl.execute.apply(this.impl,arguments),this},a.prototype.compile=function(){return this.impl.compile.apply(this.impl,arguments)},a.prototype.getStream=function(){return this.impl.getStream()},a.prototype.importScripts=function(){return this.impl.importScripts(h.call(arguments)),this},a.prototype.getWebAudioComponents=function(){return this.impl.getWebAudioComponents()},a}(),j=function(){function a(a,b){this.exports=a,this.compiler=d.createCompiler("coffee"),this.isPlaying=!1,this.execId=0,this.execCallbacks={},this.sampleRate=44100,this.channels=2,this.api=d.createAudioAPI(this,b),this.sampleRate=this.api.sampleRate,this.channels=this.api.channels,this.api.strmLength&&(this.strmLength=this.api.strmLength),this.strm=new Int16Array(this.strmLength*this.channels),this.clear=new Int16Array(this.strmLength*this.channels),this.strmList=new Array(16),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.syncCount=0,this.speaker=b.speaker!==!1,this.api.init();var c=new Uint8Array(20);if("undefined"!=typeof window&&b.mouse!==!1){var e=new Float32Array(c.buffer);window.addEventListener("mousemove",function(a){e[2]=a.pageX/window.innerWidth,e[3]=a.pageY/window.innerHeight},!0),window.addEventListener("mousedown",function(){e[4]=1},!0),window.addEventListener("mouseup",function(){e[4]=0},!0)}this.syncItems=c,this.syncItemsUInt32=new Uint32Array(c.buffer)}return a.prototype.play=function(){this.isPlaying||(this.isPlaying=!0,this.sendToLang(["/play"]),this.api&&this.api.play())},a.prototype._played=function(a){if(this.api){for(var b=this.strm,c=0,d=b.length;d>c;++c)b[c]=0;this.strmList.splice(0),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.syncCount=a}this.exports.emit("play")},a.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,this.sendToLang(["/pause"]))},a.prototype._paused=function(){this.api&&this.api.pause(),this.exports.emit("pause")},a.prototype.reset=function(){this.execId=0,this.execCallbacks={};for(var a=this.strm,b=0,c=a.length;c>b;++b)a[b]=0;this.strmList.splice(0),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.sendToLang(["/reset"]),this.exports.emit("reset")},a.prototype.process=function(){var a=this.strmList[15&this.strmListReadIndex];a&&(this.strmListReadIndex+=1,this.strm.set(a)),this.syncCount+=1,this.syncItemsUInt32[1]=this.syncCount,this.sendToLang(this.syncItems)},a.prototype.execute=function(a,b){b=b||{};var c,d,e=1;c="boolean"==typeof arguments[e]?arguments[e++]:!1,"function"==typeof arguments[e]&&(d=arguments[e++]),"string"==typeof a&&(b.lang&&"js"===b.lang||(a=this.compiler.compile(a.trim())),d&&(this.execCallbacks[this.execId]=d),this.sendToLang(["/execute",this.execId,a,c,!!d]),this.execId+=1)},a.prototype.compile=function(a){return a="string"==typeof a?this.compiler.compile(a.trim()):""},a.prototype.getStream=function(){for(var a=new Float32Array(this.strm),b=a.length;b--;)a[b]*=30517578125e-15;var c=this.strmLength;return{getChannelData:function(b){return 0===b?new Float32Array(a.buffer,0,c):1===b?new Float32Array(a.buffer,4*c):void 0}}},a.prototype.importScripts=function(a){this.sendToLang(["/importScripts",a])},a.prototype.sendToLang=function(a){this.lang&&this.lang.postMessage(a)},a.prototype.recvFromLang=function(a){if(a instanceof Int16Array)this.strmList[15&this.strmListWriteIndex]=a,this.strmListWriteIndex+=1;else{var b=g[a[0]];if(!b)throw new Error("Unknown command: "+a[0]);b.call(this,a)}},a.prototype.readAudioFile=function(a,b){var c=this.api;if(this.api){if("string"!=typeof a)throw new TypeError("readAudioFile: first argument must be a String.");if("function"!=typeof b)throw new TypeError("readAudioFile: second argument must be a Function.");if(!c.decodeAudioFile)return b("Audio decoding not supported",null),void 0;var e=d.createXMLHttpRequest();e.open("GET",a),e.responseType="arraybuffer",e.onreadystatechange=function(){4===e.readyState&&(200===e.status&&e.response?c.decodeAudioFile(e.response,function(a,c){b(a,c)}):b("error",null))},e.send()}},a.prototype.getWebAudioComponents=function(){return this.api&&"Web Audio API"===this.api.type?[this.api.context,this.api.jsNode]:[]},a}();g["/connected"]=function(a){var b=a[3];b&&b.forEach(function(a){d.global[a]=!0}),this.sendToLang(["/init",this.sampleRate,this.channels,this.strmLength]),this.exports.emit("connected")},g["/played"]=function(a){var b=a[1];this._played(b)},g["/paused"]=function(a){var b=a[1];this._paused(b)},g["/executed"]=function(a){var b=a[1],c=a[2],d=this.execCallbacks[b];d&&(void 0!==c&&(c=f(c)),d(c),delete this.execCallbacks[b])},g["/buffer/request"]=function(a){var b=this,c=a[2];this.readAudioFile(a[1],function(a,d){a||b.sendToLang(["/buffer/response",d,c])})},g["/socket/sendToClient"]=function(a){this.exports.emit("message",a[1])},g["/console/log"]=function(a){console.log.apply(console,f(a[1]))},d.SynthClientImpl=j,d.createSynthClient=function(a){return new i(a)},d.createSynthClientImpl=function(a,b){return new j(a,b)},a("../common/browser"),a("../common/audioapi"),a("./compiler"),a("./client-worker"),a("./client-nodejs"),a("./client-socket"),c.exports={SynthClient:i,SynthClientImpl:j}}),e("cc/common/emitter",function(a,b,c){var d=function(){function a(a){this.__context=a||this,this.__callbacks={}}return a.prototype.getListeners=function(a){return this.__callbacks[a]||(this.__callbacks[a]=[])},a.prototype.hasListeners=function(a){return this.getListeners(a).length>0},a.prototype.on=function(a,b){var c=this.getListeners(a);return-1===c.indexOf(b)&&c.push(b),this},a.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(d.__context,arguments)}var d=this;return c.callback=b,this.on(a,c),this},a.prototype.off=function(a,b){if(0===arguments.length)return this.__callbacks={},this;var c=this.getListeners(a);if(1===arguments.length)return c.splice(0),this;var d=c.indexOf(b);if(-1===d)for(var e=0,f=c.length;f>e;++e)if(c[e].callback===b){d=e;break}return-1!==d&&c.splice(d,1),this},a.prototype.emit=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=this.getListeners(a).slice(0),d=0,e=c.length;e>d;++d)c[d].apply(this.__context,b);return this},a}(),e=function(a){return["getListeners","hasListeners","on","once","off","emit"].forEach(function(b){a[b]||(a[b]=d.prototype[b])}),d.call(a),a};c.exports={Emitter:d,mixin:e}}),e("cc/common/pack",function(a,b,c){var d=function(){var a=function(b,c){if(!b)return b;if(-1!==c.indexOf(b))return{klassName:"Circular"};var d;if("object"==typeof b){if(b.buffer instanceof ArrayBuffer)return b;c.push(b),Array.isArray(b)?d=b.filter(function(a){return"function"!=typeof a}).map(function(b){return a(b,c)}):(d={},Object.keys(b).forEach(function(e){"_"!==e.charAt(0)&&"function"!=typeof b[e]&&(d[e]=a(b[e],c))})),c.pop()}else d=b;return d};return function(b){return a(b,[])}}(),e=function(){var a=function(b){if(!b)return b;if("string"==typeof b)return b;var c;if("object"==typeof b){if(b.buffer instanceof ArrayBuffer)return b;Array.isArray(b)?c=b.map(function(b){return a(b)}):(b.klassName&&/^[_a-z$][_a-z0-9$]*$/i.test(b.klassName)?(c=eval.call(null,"new (function "+b.klassName+"(){})"),delete b.klassName):c={},Object.keys(b).forEach(function(d){c[d]=a(b[d])}))}else c=b;return c};return function(b){return a(b)}}();c.exports={pack:d,unpack:e}}),e("cc/common/browser",function(a,b,c){var d=a("../cc");d.createWebWorker=function(a){return new Worker(a)},d.createWebSocket=function(a){return new WebSocket(a)},d.createXMLHttpRequest=function(){return new XMLHttpRequest},c.exports={}}),e("cc/common/audioapi",function(a,b,c){var d=a("../cc");a("./audioapi-webaudio"),a("./audioapi-audiodata"),a("./audioapi-flashfallback"),a("./audioapi-nodeaudio"),d.createAudioAPI=function(a,b){return d.createWebAudioAPI(a,b)||d.createAudioDataAPI(a,b)||d.createFlashAudioAPI(a,b)||d.createNodeAudioAPI(a,b)},c.exports={}}),e("cc/common/audioapi-webaudio",function(b,c,d){var e,f=b("../cc");if("undefined"!=typeof document){var g=a.AudioContext||a.webkitAudioContext;g&&(e=function(){function a(a,b){this.sys=a,this.context=b.AudioContext||new g,this.sampleRate=this.context.sampleRate,this.channels=2,this.type="Web Audio API",this.delegate=!!b.AudioContext}return a.prototype.init=function(){var a,b=this.sys,c=b.strm,d=b.strmLength;this.sys.speaker?this.sys.sampleRate===this.sampleRate&&(a=function(a){var e=a.outputBuffer,f=e.getChannelData(0),g=e.getChannelData(1),h=d,i=d<<1;for(b.process();i--,h--;)f[h]=30517578125e-15*c[h],g[h]=30517578125e-15*c[i]}):a=function(){b.process()},this.bufSrc=this.context.createBufferSource(),this.jsNode=this.context.createScriptProcessor?this.context.createScriptProcessor(d,2,this.channels):this.context.createJavaScriptNode(d,2,this.channels),this.jsNode.onaudioprocess=a},a.prototype.play=function(){this.bufSrc&&(this.bufSrc.noteOn&&(this.bufSrc.noteOn(0),this.bufSrc.connect(this.jsNode)),this.delegate||this.jsNode.connect(this.context.destination))},a.prototype.pause=function(){this.bufSrc&&(this.bufSrc.disconnect(),this.delegate||this.jsNode.disconnect())},a.prototype.decodeAudioFile=function(a,b){a=this.context.createBuffer(a,!1);var c,d,e=a.length,f=a.numberOfChannels,g=e*f,h=new Float32Array(g),i=0,j=new Array(f);for(d=0;f>d;++d)j[d]=a.getChannelData(d);for(c=0;e>c;++c)for(d=0;f>d;++d)h[i++]=j[d][c];b(null,{sampleRate:a.sampleRate,numChannels:a.numberOfChannels,numFrames:a.length,samples:h})},a}())}f.createWebAudioAPI=function(a,b){return e?new e(a,b):void 0},d.exports={}}),e("cc/common/audioapi-audiodata",function(a,b,c){var d,e=a("../cc");"undefined"!=typeof document&&"function"==typeof Audio&&"function"==typeof(new Audio).mozSetup&&(d=function(){function a(a){this.sys=a,this.sampleRate=44100,this.channels=2,this.type="Audio Data API"}var b=function(){var a="var t=0;onmessage=function(e){if(t)t=clearInterval(t),0;if(typeof e.data=='number'&&e.data>0)t=setInterval(function(){postMessage(0);},e.data);};",b=new Blob([a],{type:"text/javascript"}),c=URL.createObjectURL(b);return new Worker(c)}();return a.prototype.init=function(){this.audio=new Audio,this.interleaved=new Float32Array(this.sys.strmLength*this.sys.channels)},a.prototype.play=function(){if(this.audio){var a=this.sys,c=this.audio,d=this.interleaved,e=a.strmLength/a.sampleRate*1e3,f=0,g=Date.now(),h=new Int16Array(a.strm.buffer,0,a.strmLength),i=new Int16Array(a.strm.buffer,2*a.strmLength),j=function(){if(!(f-20>Date.now()-g)){var b=d.length,j=h.length;for(a.process();j--;)d[--b]=30517578125e-15*i[j],d[--b]=30517578125e-15*h[j];c.mozWriteAudio(d),f+=e}};c.mozSetup(a.channels,a.sampleRate),b.onmessage=j,b.postMessage(.8*e)}},a.prototype.pause=function(){this.audio&&b.postMessage(0)},a}()),e.createAudioDataAPI=function(a,b){return d?new d(a,b):void 0},c.exports={}}),e("cc/common/audioapi-flashfallback",function(a,b,c){var d,e=a("../cc");"undefined"!=typeof document&&(d=function(){function a(a){this.sys=a,this.sampleRate=44100,this.channels=2,this.strmLength=Math.max(2048,a.strmLength),this.type="Fallback"}a.prototype.init=function(){},a.prototype.play=function(){b.play&&(this.play=b.play,this.play())},a.prototype.pause=function(){b.pause&&(this.pause=b.pause,this.pause())};var b={};return window.addEventListener("load",function(){var a=e.rootPath+"coffee-collider-fallback.swf",c=a+"?"+Date.now(),d="coffee-collider-fallback",f=document.createElement("div");f.style.display="inline",f.width=1,f.height=1,f.innerHTML='<object id="'+d+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1" height="1"><param name="movie" value="'+c+'"/><param name="bgcolor" value="#FFFFFF"/><param name="quality" value="high"/><param name="allowScriptAccess" value="always"/></object>',document.body.appendChild(f),window.coffeecollider_flashfallback_init=function(){var a=document.getElementById(d),c=0;b.play=function(){if(0===c){var b=this.sys,d=b.strmLength/b.sampleRate*1e3,e=0,f=Date.now(),g=new Array(b.strmLength*b.channels),h=g.length,i=function(){if(!(e>Date.now()-f)){b.process();for(var c=b.strm,i=0;h>i;++i)g[i]=String.fromCharCode((c[i]+32768>>1)+16384);a.writeAudio(g.join("")),e+=d}};c=setInterval(i,.8*d),a.play()}},b.pause=function(){0!==c&&(a.pause(),clearInterval(c),c=0)}}}),a}()),e.createFlashAudioAPI=function(a,b){return d?new d(a,b):void 0},c.exports={}}),e("cc/common/audioapi-nodeaudio",function(b,c,d){var e,f=b("../cc");"undefined"!=typeof a.GLOBAL&&(e=function(){function b(a){this.sys=a,this.sampleRate=44100,this.channels=2,this.node=null,this.isPlaying=!1}var c=a.require("stream").Readable,d=a.require("speaker");return c||(c=a.require("readable-stream/readable")),b.prototype.init=function(){},b.prototype.play=function(){var a=this.sys;this.isPlaying=!0,this.node=new c,this.node._read=function(b){var c,d,e,f=a._strm,g=a.strmLength,h=new Buffer(b),i=0;for(b=(b>>2)/a.strmLength,c=f;b--;)for(a._process(),d=0,e=g;g>d;++d,++e)h.writeInt16LE(f[d],i),i+=2,h.writeInt16LE(f[e],i),i+=2;this.push(h)},this.node.pipe(new d({sampleRate:this.sampleRate}))},b.prototype.pause=function(){this.node&&process.nextTick(this.node.emit.bind(this.node,"end")),this.node=null,this.isPlaying=!1},b}()),f.createNodeAudioAPI=function(a,b){return e?new e(a,b):void 0},d.exports={}}),e("cc/client/compiler",function(b,c,d){var e=a.CoffeeScript||a.require("coffee-script"),f=b("../cc"),g=b("../common/numericstring"),h=g.timevalue,i=g.notevalue,j=[].push,k=0,l=1,m={},n=function(a){return!!a&&("."===a[k]||"@"===a[k])},o=function(a){var b=a[l];return b.reserved?b[0]+b[1]+(b[2]||"")+(b[3]||"")+(b[4]||"")+(b[5]||"")+(b[6]||"")+(b[7]||""):b},p=function(a,b){for(var c=0,d=b,e=a.length;e>d;++d)switch(a[d][k]){case"PARAM_START":c+=1;break;case"PARAM_END":if(c-=1,0===c)return d}return-1},q=function(a,b){for(var c=0,d=b,e=a.length;e>d;++d){switch(a[d][k]){case"TERMINATOR":if(0===c)return-1;break;case"PARAM_START":if(0===c)return d;c+=1;break;case"PARAM_END":c-=1;break;case"->":case"=>":if(0===c)return d;break;case"[":case"{":case"(":case"CALL_START":case"INDEX_START":c+=1;break;case")":case"}":case"]":case"CALL_END":case"INDEX_END":case"PARAM_END":c-=1}if(0>c)break}return-1},r=function(a){return a.tokens.slice(a.begin,a.end+1).map(function(b,c){return"STRING"===b[k]&&"'"===b[l].charAt(0)?'"'+b[l].substr(1,b[l].length-2)+'"':"IDENTIFIER"===b[k]&&":"===a.tokens[a.begin+c+1][k]?'"'+b[l]+'"':b[l]}).join("")},s=function(a){if(a.cc_plusminus)return a;for(var b="",c=0,d=a.length;d>c;++c){var e=a[c][k];if("+"===e||"-"===e)switch(b){case"IDENTIFIER":case"NUMBER":case"STRING":case"BOOL":case"REGEX":case"NULL":case"UNDEFINED":case"]":case"}":case")":case"CALL_END":case"INDEX_END":a[c][k]="MATH";break;default:a[c][k]="UNARY"}b=e}return a.cc_plusminus=!0,a},t=function(a){if(!a.cc_plusminus){for(var b=0,c=a.length;c>b;++b){var d=a[b][l];("+"===d||"-"===d)&&(a[b][k]=d)}return a}return delete a.cc_plusminus,a},u=function(a,b){a=s(a);for(var c=0,d=0,e=b;b>1;){switch(a[b][k]){case"(":case"[":case"{":case"PARAM_START":case"CALL_START":case"INDEX_START":c-=1;break;case"}":case"]":case")":case"PARAM_END":case"CALL_END":case"INDEX_END":c+=1;break;case"OUTDENT":d+=1;break;case"INDENT":d-=1}switch(a[b-1][k]){case"PARAM_END":case"CALL_END":case"INDEX_END":case".":case"@":b-=1;continue}switch(a[b][k]){case"(":case"[":case"{":case"PARAM_START":case"IDENTIFIER":case"NUMBER":case"BOOL":case"STRING":case"REGEX":case"UNDEFINED":case"NULL":case"@":case"THIS":case"SUPER":case"->":case"=>":if(0===c&&0===d){for(var f;(f=a[b-1])&&"UNARY"===f[k];)b-=1;return{tokens:a,begin:b,end:e}}}b-=1}return{tokens:a,begin:0,end:e}},v=function(a,b){a=s(a);var c=0,d=0,e=b,f=a.length-2;if(a[b]&&"@"===a[b][k]&&"IDENTIFIER"!==a[b+1][k])return{tokens:a,begin:b,end:b};for(;f>b;){var g=a[b][k];switch(g){case"(":case"[":case"{":case"PARAM_START":c+=1;break;case"}":case"]":case")":case"PARAM_END":case"CALL_END":case"INDEX_END":c-=1;break;case"INDENT":d+=1;break;case"OUTDENT":d-=1}switch(a[b+1][k]){case"CALL_START":case"INDEX_START":c+=1,b+=1;continue;case".":case"@":case"ELSE":b+=1;continue}switch(g){case"}":case"]":case")":case"CALL_END":case"INDEX_END":case"IDENTIFIER":case"NUMBER":case"BOOL":case"STRING":case"REGEX":case"UNDEFINED":case"NULL":case"OUTDENT":if(0===c&&0===d)return{tokens:a,begin:e,end:b}}b+=1}return{tokens:a,begin:e,end:Math.max(0,a.length-2)}},w={},x=function(a){if(a.cc_funcParams)return a;var b=[{declared:[],args:[],local:[],outer:[]}];b.setVariables=w.setVariables(b);for(var c=0,d=[],e=[],f=0,g=a.length-1;g>f;++f){var h,i=a[f];switch(b.peek=b[b.length-1],i[k]){case"PARAM_START":d=w.getInfoOfArguments(a,f),f=d.end+1,e=d.vars,d=d.args;case"->":case"=>":var j={declared:b.peek.declared.concat(b.peek.local),args:e.splice(0),local:[],outer:[],indent:c};a[f].cc_funcParams={args:d.splice(0),local:j.local,outer:j.outer},i.cc_funcRef=a[f],b.push(j);break;case"FOR":do h=v(a,f+1),w.getVariables(h).forEach(b.setVariables),f=h.end+1;while(g>f&&","===a[f][k]);break;case"INDENT":c+=1;break;case"OUTDENT":c-=1,b.peek.indent===c&&b.pop();break;case"[":h=v(a,f),w.getVariables(h).forEach(b.setVariables);break;case"IDENTIFIER":if("CALL_START"===a[f+1][k]||/^[A-Z]/.test(i[l]))break;h=v(a,f),(h.begin===h.end&&":"!==a[h.end+1][k]||"."===a[h.begin+1][k])&&w.getVariables(h).forEach(b.setVariables)}}return a.cc_funcParams={local:b[0].local},a};w.setVariables=function(a){var b=["cc","global","console","setInterval","setTimeout","clearInterval","clearTimeout"];return function(c){if(-1===b.indexOf(c)){if(-1===a.peek.declared.indexOf(c))return-1===a.peek.args.indexOf(c)&&-1===a.peek.local.indexOf(c)&&a.peek.local.push(c),void 0;if(-1===a.peek.outer.indexOf(c)){a.peek.outer.push(c);for(var d=a.length-2;d>=0;d--){if(-1!==a[d].local.indexOf(c))return;-1===a[d].outer.indexOf(c)&&a[d].outer.push(c)}}}}},w.getInfoOfArguments=function(a,b){for(var c=b,d=p(a,b),e=[],f=[],g=c+1;d>g;++g){var h=v(a,g);f.push(r(h)),e=w.getVariables(h,e),g+=h.end-h.begin+1,"="===a[g][k]?(h=v(a,g+1),f.push(r(h)),g+=h.end-h.begin+1):f.push(null),","!==a[g][k]&&(g+=1)}return{vars:e,args:f,end:d}},w.getVariables=function(a,b){var c=a.tokens;if(b=b||[],"["===c[a.begin][k]&&"]"===c[a.end][k])for(var d=a.begin+1,e=a.end;e>d;++d){var f=v(c,d);b=w.getVariables(f,b),d+=f.end-f.begin+1,","!==c[d][k]&&(d+=1)}else n(c[a.begin-1])||/^[a-z][a-zA-Z0-9_$]*$/.test(c[a.begin][l])&&b.push(c[a.begin][l]);return b};var y=function(a){for(var b,c,d=0,e=a.length;e>d;++d){var f=a[d];"STRING"===f[k]&&'"'===f[l].charAt(0)&&(b=f[l].substr(1,f[l].length-2),c=h(b),"number"!=typeof c&&(c=i(b)),"number"==typeof c&&(f[k]="NUMBER",f[l]=c.toString()))}return a},z=function(a){a=s(a);for(var b=a.length-1;b>0;b--){var c=a[b];if("MATH"===c[k]&&"+"!==c[l]&&"-"!==c[l]){var d=u(a,b),e=v(a,b);a.splice(e.end+1,0,[")",")",m]),a.splice(d.begin,0,["(","(",m])}}return a},A={operatorDict:{"+":"__plus__","-":"__minus__"}},B=function(a){a=s(a);for(var b=a.length-1;b>=0;b--){var c=a[b];if("UNARY"===c[k]&&A.operatorDict.hasOwnProperty(c[l])){var d=A.operatorDict[c[l]],e=v(a,b);a.splice(e.end+1,0,[".",".",m],["IDENTIFIER",d,m],["CALL_START","(",m],["CALL_END",")",m]),a.splice(b,1)}}return a},C={operatorDict:{"+":"__add__","-":"__sub__","*":"__mul__","/":"__div__","%":"__mod__"},adverbs:{W:"WRAP",S:"SHORT",C:"CLIP",F:"FOLD",T:"TABLE",X:"FLAT",WRAP:"WRAP",SHORT:"SHORT",CLIP:"CLIP",FOLD:"FOLD",TABLE:"TABLE",FLAT:"FLAT"}},D=function(a){return Object.keys(C.adverbs).forEach(function(b){var c=new RegExp("([+\\-*/%])("+b+")\\1","g"),d='$1 "#!'+b.charAt(0)+'" $1';a=a.replace(c,d)}),a},E=function(a){a=s(a);for(var b=a.length-1;b>=0;b--){var c=a[b];if("MATH"===c[k]&&C.operatorDict.hasOwnProperty(c[l])){var d=C.operatorDict[c[l]],e=C.checkAdvarb(a,b),f=v(a,b);e?(b-=2,a.splice(b,3,[".",".",m],["IDENTIFIER",d,m],["CALL_START","(",m]),a.splice(f.end+1,0,[",",",",m],["IDENTIFIER",e,m],["CALL_END",")",m])):(a.splice(b,1,[".",".",m],["IDENTIFIER",d,m],["CALL_START","(",m]),a.splice(f.end+3,0,["CALL_END",")",m]))}}return a};C.checkAdvarb=function(a,b){var c=a[b],d=a[b-1],e=a[b-2];if(c&&d&&e&&/^"#![WSCFTX]"$/.test(d[l])){var f=d[l].charAt(3);if(c[l]===e[l]&&C.adverbs.hasOwnProperty(f))return C.adverbs[f]}};var F={operatorDict:{"+=":"__add__","-=":"__sub__","*=":"__mul__","/=":"__div__","%=":"__mod__"}},G=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];if(F.operatorDict.hasOwnProperty(c[l])){var d=F.operatorDict[c[l]],e=u(a,b),f=v(a,b);a.splice(b,1,["=","=",m],[".",".",m],["IDENTIFIER",d,m],["CALL_START","(",m]),a.splice(f.end+4,0,["CALL_END",")",m]);for(var g=[b+1,0],h=e.begin;b>h;++h)g.push(a[h]);a.splice.apply(a,g)}}return a},H={operatorDict:{"&&":"__and__","||":"__or__"}},I=function(a){for(var b=!1,c=1;c<a.length;++c){var d=a[c];if("wait"!==d[l]||"@"!==a[c-1][k])if(","!==d[k]){if(b&&"LOGIC"===d[k]&&H.operatorDict.hasOwnProperty(d[l])){var e=H.operatorDict[d[l]],f=v(a,c);a.splice(c,1,[".",".",m],["IDENTIFIER",e,m],["CALL_START","(",m]),a.splice(f.end+3,0,["CALL_END",")",m]),c=f.end+3}}else b=!1;else b=!0}return a},J={},K=function(a){a=x(a);for(var b=a.length-5;b>=0;b--)if(!(b&&"."===a[b-1][k]||"SynthDef"!==a[b][l])){for(var c=b;c<a.length&&"CALL_START"!==a[c][k];)c+=1;if(c=q(a,c+1),-1!==c){var d;d=a[c].cc_funcRef?a[c].cc_funcRef.cc_funcParams.args:[],J.replaceSynthDefDefaultArguments(a,c,d),c=v(a,c).end+1,J.insertSynthDefArgumentsToAfterFunction(a,c,d)}}return a};J.replaceSynthDefDefaultArguments=function(a,b,c){if(c.length){var d=p(a,b)-b+1,e=[b,d];e.push(["PARAM_START","(",m]);for(var f=0,g=c.length;g>f;f+=2)f&&e.push([",",",",m]),e.push(["IDENTIFIER",c[f],m]);e.push(["PARAM_END",")",m]),a.splice.apply(a,e)}},J.insertSynthDefArgumentsToAfterFunction=function(a,b,c){var d=[b,0];d.push([",",",",m],["[","[",m]);for(var e=0,f=c.length;f>e;++e)e&&d.push([",",",",m]),d.push(["STRING","'"+(c[e]||0)+"'",m]);d.push(["]","]",m]),a.splice.apply(a,d)};var L={target:["Task","syncblock"]},M=function(a){a=x(a);for(var b,c=a.length-1;c>=0;c--)if("IDENTIFIER"===a[c][k]&&"CALL_START"===a[c+1][k]&&(b=o(a[c]),-1!==L.target.indexOf(b))){var d=q(a,c+2);-1!==d&&L.makeSyncBlock(v(a,d),"syncblock"===b)}return a};L.makeSyncBlock=function(a,b){var c,d,f,g=a.tokens,h=g.splice(a.begin,a.end-a.begin+1),i=g.splice(a.begin),k=h[0].cc_funcRef;k?(c=k.cc_funcParams.local,d=k.cc_funcParams.outer,f=k.cc_funcParams.args.filter(function(a,b){return!(1&b)}).map(function(a){var b=e.tokens(a);return b.pop(),b})):c=d=f=[],f.length&&h.splice(0,p(h,0)+1),h.splice(0,2),h.pop();for(var l=L.createSyncBlock(h,f,c,b),m=l.length;m--;)l[m].cc_segmented=!0;return j.apply(g,l),j.apply(g,i),a},L.createSyncBlock=function(a,b,c,d){var e=[];d||e.push(["IDENTIFIER","syncblock",m],["CALL_START","(",m]),e.push(["->","->",m],["INDENT",2,m]),L.insertLocalVariables(e,c),e.push(["[","[",m],["INDENT",2,m]);for(var f=0;a.length;)f++&&e.push(["TERMINATOR","\n",m]),L.beginOfSegment(e,b),L.insertSegment(e,a),L.endOfSegment(e,b);return e.push(["OUTDENT",2,m],["]","]",m]),e.push(["OUTDENT",2,m]),d||e.push(["CALL_END",")",m]),e},L.insertLocalVariables=function(a,b){if(b&&b.length){for(var c=0,d=b.length;d>c;c++)a.push(["IDENTIFIER",b[c],m],["=","=",m]);a.push(["UNDEFINED","undefined",m],["TERMINATOR","\n",m])}},L.beginOfSegment=function(a,b){if(b&&b.length){a.push(["PARAM_START","(",m]);for(var c=0,d=b.length;d>c;++c)c&&a.push([",",",",m]),j.apply(a,b[c]);a.push(["PARAM_END",")",m])}a.push(["->","->",m],["INDENT",2,m])},L.splitIdentifiers=["Task","syncblock","wait"],L.insertSegment=function(a,b){for(;b.length;){var c=L.fetchLine(b);j.apply(a,c);for(var d=0,e=c.length;e>d;++d){var f=c[d];if("IDENTIFIER"===f[k]&&-1!==L.splitIdentifiers.indexOf(f[l]))return}}},L.endOfSegment=function(a){a.push(["OUTDENT",2,m])},L.fetchLine=function(a){for(var b=0,c=0,d=a.length;d>c;++c)switch(a[c][k]){case"(":case"{":case"[":case"CALL_START":case"PARAM_START":case"INDEX_START":b+=1;break;case"]":case"}":case")":case"CALL_END":case"PARAM_END":case"INDEX_END":b-=1;break;case"TERMINATOR":if(0===b)return a.splice(0,c+1);break;case"INDENT":b+=1;break;case"OUTDENT":if(0===b)return a.splice(0,c);b-=1}return a.splice(0)},L.fetchBlock=function(a){for(var b=0,c=0,d=a.length;d>c;++c)switch(a[c][k]){case"INDENT":b+=1;break;case"OUTDENT":if(0===b){var e=a.splice(0,c+1);return e.pop(),e}b-=1}return a.splice(0)};var N=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];if("IDENTIFIER"===c[k]&&/^\$[a-z][a-zA-Z0-9_]*$/.test(c[l])){if(":"===a[b+1][k])continue;if(n(a[b-1]))continue;a.splice(b,1,["IDENTIFIER","global",m],[".",".",m],["IDENTIFIER",c[l].substr(1),m])}}return a},O=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];if("IDENTIFIER"===c[k]&&f.global.hasOwnProperty(c[l])){if(":"===a[b+1][k])continue;if(n(a[b-1]))continue;a.splice(b,0,["IDENTIFIER","cc",m],[".",".",m])}}return a},P=function(a){return a.unshift(["(","(",m],["PARAM_START","(",m],["IDENTIFIER","global",m],[",",",",m],["IDENTIFIER","cc",m],[",",",",m],["IDENTIFIER","undefined",m],["PARAM_END",")",m],["->","->",m],["INDENT",2,m]),a.push(["OUTDENT",2,m],[")",")",m],[".",".",m],["IDENTIFIER","call",m],["CALL_START","(",m],["IDENTIFIER","cc",m],[".",".",m],["IDENTIFIER","__context__",m],[",",",",m],["THIS","this",m],[".",".",m],["IDENTIFIER","self",m],["LOGIC","||",m],["IDENTIFIER","global",m],[",",",",m],["IDENTIFIER","cc",m],["CALL_END",")",m]),a},Q=function(a){for(var b="",c=0;a>c;++c)b+="  ";return b},R=function(a){var b=0;return a=s(a),a.map(function(a){switch(a[k]){case"TERMINATOR":return"\n"+Q(b);case"INDENT":return b+=1,"\n"+Q(b);case"OUTDENT":return b-=1,"\n"+Q(b);case"RETURN":return"return ";case"UNARY":return a[l]+(a[l].length>1?" ":"");case"{":return"{";case",":case"RELATION":case"IF":case"ELSE":case"SWITCH":case"LEADING_WHEN":return a[l]+" ";case"=":case"COMPARE":case"MATH":case"LOGIC":return" "+a[l]+" ";case"HERECOMMENT":return"/* "+a[l]+" */";default:return a[l]}}).join("").split("\n").filter(function(a){return!/^\s*$/.test(a)}).join("\n").trim()},S=function(){function a(){}return a.prototype.tokens=function(a){a=D(a);var b=e.tokens(a);return b.length&&(b=N(b),b=y(b),b=z(b),b=B(b),b=E(b),b=G(b),b=I(b),b=K(b),b=M(b),b=O(b),b=P(b)),b},a.prototype.compile=function(a){var b=this.tokens(a);return e.nodes(b).compile({bare:!0}).trim()},a.prototype.toString=function(a){return"string"==typeof a&&(a=this.tokens(a)),R(a)},a}();f.createCompiler=function(){return new S},d.exports={CoffeeCompiler:S,detectPlusMinusOperator:s,revertPlusMinusOperator:t,getPrevOperand:u,getNextOperand:v,detectFunctionParameters:x,replaceTextBinaryAdverb:D,replaceNumericString:y,replaceStrictlyPrecedence:z,replaceUnaryOperator:B,replaceBinaryOperator:E,replaceCompoundAssign:G,replaceLogicOperator:I,replaceSynthDefinition:K,replaceSyncBlock:M,replaceGlobalVariables:N,replaceCCVariables:O,finalize:P,prettyPrint:R,notevalue:i}}),e("cc/common/numericstring",function(a,b,c){var d=a("../cc"),e=function(a){var b,c=null;"~"===a.charAt(0)&&(b=!0,a=a.substr(1));do{if(c=f(a),null!==c)break;if(c=g(a),null!==c)break;if(c=h(a),null!==c)break;if(c=i(a),null!==c)break;if(c=k(a),null!==c)break;if(c=m(a),null!==c)break;c=o(a)}while(!1);if(null!==c){if(!b)return c;if(0!==c)return 1/c}return a},f=function(a){var b=/^(\d+(?:\.\d+)?)hz$/i.exec(a);return b?0===+b[1]?0:1/+b[1]:null},g=function(a){var b=/^(\d+(?:\.\d+)?)(min|sec|m)s?$/i.exec(a);if(b)switch(b[2]){case"min":return 60*+(b[1]||0);case"sec":return+(b[1]||0);case"m":return+(b[1]||0)/1e3}return null},h=function(a){var b=/^(?:([1-9][0-9]*):)?([0-5]?[0-9]):([0-5][0-9])(?:\.(\d{1,3}))?$/.exec(a);if(b){var c=0;return c+=3600*(0|b[1]),c+=60*(0|b[2]),c+=0|b[3],c+=(0|((b[4]||"")+"00").substr(0,3))/1e3}return null},i=function(a){var b=/^(\d+)samples(?:\/(\d+)hz)?$/i.exec(a);return b?b[1]/(0|b[2]||d.sampleRate):null},j=function(a,b,c){var d=60/a*(4/b);return d*=[1,1.5,1.75,1.875][c]||1},k=function(a){var b=/^bpm([1-9]\d+(?:\.\d+)?)\s*l([1-9]\d*)(\.*)$/i.exec(a);return b?j(+b[1],+b[2],b[3].length):null},l=function(a,b,c,d){var e=480*(4*b+c)+d;return 60/a*(e/480)},m=function(a){var b=/^bpm([1-9]\d+(?:\.\d+)?)\s*(\d+)\.(\d+).(\d{1,3})$/i.exec(a);return b?l(+b[1],+b[2],+b[3],+b[4]):null},n=function(a,b){return 60/a*b/480},o=function(a){var b=/^bpm([1-9]\d+(?:\.\d+)?)\s*(\d+)ticks$/i.exec(a);return b?n(+b[1],+b[2]):null},p=function(a){var b=/^([CDEFGAB])([-+#b])?(\d)$/.exec(a);if(b){var c={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[b[1]]+12*b[3]+12,d=b[2];return"-"===d||"b"===d?c--:("+"===d||"#"===d)&&c++,c}return a};c.exports={hz:f,time:g,hhmmss:h,samples:i,note:k,beat:m,ticks:o,calcNote:j,calcBeat:l,calcTicks:n,timevalue:e,notevalue:p}}),e("cc/client/client-worker",function(a,b,c){var d=a("../cc"),e=a("../common/extend"),f=function(){function a(a,b){d.opmode="worker",this.strmLength=1024,this.bufLength=128,d.SynthClientImpl.call(this,a,b);var c=this;this.lang=d.createWebWorker(d.coffeeColliderPath),this.lang.onmessage=function(a){c.recvFromLang(a.data)}}return e(a,d.SynthClientImpl),a}();d.createSynthClientWorkerImpl=function(a,b){return new f(a,b)},c.exports={}}),e("cc/common/extend",function(a,b,c){var d=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a};c.exports=d}),e("cc/client/client-nodejs",function(a,b,c){var d=a("../cc"),e=a("../common/extend"),f=function(){function a(a,b){d.opmode="nodejs",this.strmLength=4096,this.bufLength=128,d.SynthClientImpl.call(this,a,b),this.api=null
}return e(a,d.SynthClientImpl),a}();d.createSynthClientNodeJSImpl=function(a,b){return new f(a,b)},c.exports={}}),e("cc/client/client-socket",function(a,b,c){var d=a("../cc"),e=a("../common/extend"),f=function(){function a(a,b){d.opmode="socket",this.strmLength=4096,this.bufLength=128,d.SynthClientImpl.call(this,a,b);var c=this;this.lang=d.createWebWorker(d.coffeeColliderPath+"#socket"),this.lang.onmessage=function(a){c.recvFromLang(a.data)},a.socket={open:function(){c.sendToLang(["/socket/open",b.socket])},close:function(){c.sendToLang(["/socket/close"])},send:function(a){c.sendToLang(["/socket/sendToServer",a])}}}return e(a,d.SynthClientImpl),a}();d.createSynthClientSocketImpl=function(a,b){return new f(a,b)},c.exports={}}),e("cc/lang/lang",function(b,c,d){var e=b("./cc"),f=b("../common/pack").pack,g=b("../common/random"),h={},i=function(){function a(){this.klassName="SynthLang",this.sampleRate=0,this.channels=0,this.strmLength=0,this.bufLength=0,this.rootNode=e.createRootNode(),this.taskManager=e.createTaskManager(),this.timelineResult=[],this.bufferRequestId=0,this.bufferRequestCallback={},this.phase=0,this.random=new g.Random,this.currentTime=0,this.extendCommands(h)}return a.prototype.sendToClient=function(){throw"SynthLang#sendToClient: should be overridden["+e.opmode+"]"},a.prototype.recvFromClient=function(a){if(a){var b=h[a[0]];b&&b.call(this,a)}},a.prototype.sendToServer=function(){throw"SynthLang#sendToServer: should be overridden["+e.opmode+"]"},a.prototype.recvFromServer=function(a){if(a instanceof Int16Array)this.sendToClient(a);else{var b=h[a[0]];if(!b)throw new Error("Unknown command: "+a[0]);b.call(this,a)}},a.prototype.pushToTimeline=function(a){this.timelineResult.push(a)},a.prototype.play=function(a){this.currentTimeIncr=this.bufLength/this.sampleRate*1e3,this.taskManager.start(this.currentTimeIncr),this.sendToServer(a)},a.prototype.pause=function(a){this.sendToServer(a)},a.prototype.reset=function(a){this.currentTime=0,e.resetBuffer(),e.resetNode(),e.resetBuiltin(),this.taskManager.reset(),this.sendToServer(a)},a.prototype.requestBuffer=function(a,b){if("string"==typeof a&&"function"==typeof b){var c=this.bufferRequestId++;this.bufferRequestCallback[c]=b,this.sendToClient(["/buffer/request",a,c])}},a.prototype.process=function(){throw"SynthLang#process: should be overridden"},a.prototype.extendCommands=function(){},a}();h["/connected"]=function(a){"nodejs"!==e.opmode&&a.push(Object.keys(e.global)),this.sendToClient(a)},h["/init"]=function(a){this.sampleRate=0|a[1],this.channels=0|a[2],this.sendToServer(a)},h["/play"]=function(a){this.play(a)},h["/played"]=function(a){this.sendToClient(a)},h["/pause"]=function(a){this.pause(a)},h["/paused"]=function(a){this.sendToClient(a)},h["/reset"]=function(a){this.reset(a)},h["/process"]=function(){this.process()},h["/execute"]=function(b){var c=b[1],d=b[2],g=b[3],h=b[4];g||this.reset(["/reset"]),e.global!==a&&(a.cc=e.global),a.cc.__context__={version:e.version};var i=eval.call(a,d);h&&this.sendToClient(["/executed",c,f(i)])},h["/buffer/response"]=function(a){var b=a[1],c=a[2],d=this.bufferRequestCallback[c];d&&(d(b),delete this.bufferRequestCallback[c])},h["/importScripts"]=function(a){importScripts(a[1])},e.SynthLang=i,e.createSynthLang=function(){switch(e.opmode){case"worker":return e.createWorkerSynthLang();case"nodejs":return e.createNodeJSSynthLang();case"socket":return e.createSocketSynthLang()}throw new Error("A SynthLang is not defined for: "+e.opmode)},b("./array"),b("./boolean"),b("./buffer"),b("./builtin"),b("./bus"),b("./date"),b("./env"),b("./function"),b("./mix"),b("./node"),b("./number"),b("./object"),b("./pattern"),b("./scale"),b("./string"),b("./syncblock"),b("./synthdef"),b("./task"),b("./ugen"),b("./basic_ugen"),b("../plugins/installer"),b("./lang-worker"),b("./lang-nodejs"),b("./lang-socket"),Object.keys(e.ugen.specs).forEach(function(a){e.ugen.register(a,e.ugen.specs[a])}),e.global.System={},e.global.System.currentTime=function(){return e.lang.currentTime},d.exports={}}),e("cc/lang/cc",function(a,b,c){c.exports=a("../cc")}),e("cc/common/random",function(a,b,c){var d=function(){function a(a){"number"!=typeof a&&(a=Date.now()),a=new Uint32Array([a]),a[0]+=~(a[0]<<15),a[0]^=a[0]>>>10,a[0]+=a[0]<<3,a[0]^=a[0]>>>6,a[0]+=~(a[0]<<11),a[0]^=a[0]>>>16,this.s1=new Uint32Array([1243598713^a[0]]),this.s2=new Uint32Array([3093459404^a[0]]),this.s3=new Uint32Array([1821928721^a[0]]),this.s1[0]<2&&(this.s1[0]=1243598713),this.s2[0]<8&&(this.s2[0]=3093459404),this.s3[0]<16&&(this.s3[0]=1821928721)}a.prototype.trand=function(){return this.s1[0]=(4294967294&this.s1[0])<<12^(this.s1[0]<<13^this.s1[0])>>>19,this.s2[0]=(4294967288&this.s2[0])<<4^(this.s2[0]<<2^this.s2[0])>>>25,this.s3[0]=(4294967280&this.s3[0])<<17^(this.s3[0]<<3^this.s3[0])>>>11,this.s1[0]^this.s2[0]^this.s3[0]};var b=new Uint32Array(1),c=new Float32Array(b.buffer);return a.prototype.next=function(){return b[0]=1065353216|this.trand()>>>9,c[0]-1},a}();c.exports={Random:d}}),e("cc/lang/array",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("../common/ops"),g=a("./utils"),h=[].slice;e.defineProperty(Array.prototype,"copy",function(){return this.slice()}),e.defineProperty(Array.prototype,"dup",e(function(a){for(var b=new Array(0|a),c=0,d=b.length;d>c;++c)b[c]=this.slice();return b}).defaults(f.COMMONS.dup).build()),e.defineProperty(Array.prototype,"do",function(a){var b=this;return d.instanceOfSyncBlock(a)?d.currentSyncBlockHandler?d.currentSyncBlockHandler.__sync__(a,d.createTaskArgumentsArray(b)):b.forEach(function(b,c){a.clone().perform([b,c])}):b.forEach(a),this}),e.defineProperty(Array.prototype,"wait",function(a){var b=this;return d.currentTask&&d.currentTask.__wait__(d.createTaskWaitTokenArray(b,a)),this}),e.defineProperty(Array.prototype,"asUGenInput",function(){return this.map(g.asUGenInput)}),["__plus__","__minus__"].concat(Object.keys(f.UNARY_OPS)).forEach(function(a){e.defineProperty(Array.prototype,a,function(){return this.map(function(b){return b[a]()})})});var i=function(a,b){var c=a.length;return b%=2*c-2,b>=c&&(b=2*(c-1)-b),a[b]},j=function(a,b,c,d){var e=b.length-c.length;switch(d){case 1:e>0?b.splice(c.length):0>e&&c.splice(b.length);break;case 2:if(e>0)return b.map(function(b,d){return b[a](i(c,d))});if(0>e)return c.map(function(c,d){return i(b,d)[a](c)});break;case 3:case 4:var f=b.map(function(b){return c.map(function(c){return b[a](c)})});return 4===d?g.flatten(f):f}return b.length===c.length?b.map(function(b,d){return b[a](c[d])}):b.length>c.length?b.map(function(b,d){return b[a](c[d%c.length])}):c.map(function(c,d){return b[d%b.length][a](c)})};d.global.SHORT=1,d.global.FOLD=2,d.global.TABLE=3,d.global.FLAT=4,["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(f.BINARY_OPS)).forEach(function(a){var b;b=f.ALIASES.hasOwnProperty(a)?f.ALIASES[a]:a,e.defineProperty(Array.prototype,a,function(c,e){return Array.isArray(c)?j(a,this,c,e):d.instanceOfUGen(c)?this.map(function(a){return d.createBinaryOpUGen(b,a,c)}):this.map(function(b){return b[a](c)})})}),e.defineProperty(Array.prototype,"__and__",function(a){return d.createTaskWaitLogic("and",this.concat(a))}),e.defineProperty(Array.prototype,"__or__",function(a){return d.createTaskWaitLogic("or",this.concat(a))}),Object.keys(f.ARITY_OPS).forEach(function(a){e.defineProperty(Array.prototype,a,e(function(){var b=h.call(arguments);return this.map(function(c){return c[a]?c[a].apply(c,b):c})}).defaults(f.ARITY_OPS[a]).multiCall().build())}),e.defineProperty(Array.prototype,"chord",e(function(a,b){return this.map(function(c){return"number"==typeof c?c.chord(a,b):c})}).defaults('name="",inversion=0').multiCall().build()),e.defineProperty(Array.prototype,"chordcps",e(function(a,b){return this.map(function(c){return"number"==typeof c?c.chordcps(a,b):c})}).defaults('name="",inversion=0').multiCall().build()),e.defineProperty(Array.prototype,"chordratio",e(function(a,b){return this.map(function(c){return"number"==typeof c?c.chordratio(a,b):c})}).defaults('name="",inversion=0').multiCall().build());var k=function(a){return"function"==typeof a?a:function(){return a}},l=function(){return d.lang.random.next()},m=function(a){return d.lang.random.next()*a|0};e.defineProperty(Array,"series",e(function(a,b,c){a|=0;for(var d=new Array(a),e=b,f=0,g=d.length;g>f;f++)d[f]=e,e+=c;return d}).defaults("size=0,start=0,step=1").build()),e.defineProperty(Array,"geom",e(function(a,b,c){a|=0;for(var d=new Array(a),e=b,f=0,g=d.length;g>f;f++)d[f]=e,e*=c;return d}).defaults("size=0,start=1,grow=2").build()),e.defineProperty(Array,"fill",e(function(a,b){a|=0;var c=new Array(a);b=k(b);for(var d=0,e=c.length;e>d;++d)c[d]=b(d);return c}).defaults("size=0,func=0").build()),e.defineProperty(Array,"fill2D",e(function(a,b,c){a|=0,b|=0,c=k(c);var d,e,f,g;for(d=new Array(a),f=0;a>f;++f)for(e=d[f]=new Array(b),g=0;b>g;++g)e[g]=c(f,g);return d}).defaults("rows=0,cols=0,func=0").build()),e.defineProperty(Array,"fillND",function(){var a=function(b,c,d){var e,f,g,h;if(e=b[0],f=[],g=d.length,d=d.concat(0),b.length<=1)for(h=0;e>h;++h)d[g]=h,f.push(c.apply(null,d));else for(b=b.slice(1),h=0;e>h;++h)d[g]=h,f.push(a(b,c,d));return f};return e(function(b,c){return a(b,k(c),[])}).defaults("dimensions=[],func=0").build()}()),e.defineProperty(Array,"fib",e(function(a,b,c){for(var d,e=new Array(0|a),f=0,g=e.length;g>f;f++)e[f]=c,d=c,c=b+c,b=d;return e}).defaults("size=0,a=0,b=1").build()),e.defineProperty(Array,"rand",e(function(a,b,c){for(var d=new Array(0|a),e=0,f=d.length;f>e;e++)d[e]=b.rrand(c);return d}).defaults("size=0,minVal=0,maxVal=1").build()),e.defineProperty(Array,"rand2",e(function(a,b){for(var c=new Array(0|a),d=0,e=c.length;e>d;d++)c[d]=b.rand2();return c}).defaults("size=0,val=1").build()),e.defineProperty(Array,"linrand",e(function(a,b,c){for(var d=new Array(0|a),e=0,f=d.length;f>e;e++)d[e]=b.linrand(c);return d}).defaults("size=0,minVal=0,maxVal=1").build()),e.defineProperty(Array,"exprand",e(function(a,b,c){for(var d=new Array(0|a),e=0,f=d.length;f>e;e++)d[e]=b.exprand(c);return d}).defaults("size=0,minVal=0.001,maxVal=1").build()),e.defineProperty(Array,"interpolation",e(function(a,b,c){if(1===a)return[b];for(var d=new Array(0|a),e=(c-b)/(a-1),f=0,g=d.length;g>f;f++)d[f]=b+f*e;return d}).defaults("size=0,start=0,end=1").build());var n=function(a,b){var c=2*b-2;return a=(0|a)%c,0>a&&(a+=c),a>=b&&(a=c-a),a};e.defineProperty(Array.prototype,"size",function(){return this.length});var o=function(a){var b,c,d,e,f;if(a)for(a=k(a),f=this[0],e=a(this[0],0),b=1,c=this.length;c>b;++b)d=a(this[b],b),e>d&&(f=this[b],e=d);else for(f=this[0],b=1,c=this.length;c>b;++b)this[b]<f&&(f=this[b]);return f};e.defineProperty(Array.prototype,"minItem",o),e.defineProperty(Array.prototype,"minValue",o);var p=function(a){var b,c,d,e,f;if(a)for(a=k(a),f=this[0],e=a(this[0],0),b=1,c=this.length;c>b;++b)d=a(this[b],b),d>e&&(f=this[b],e=d);else for(f=this[0],b=1,c=this.length;c>b;++b)f<this[b]&&(f=this[b]);return f};e.defineProperty(Array.prototype,"maxItem",p),e.defineProperty(Array.prototype,"maxValue",p),e.defineProperty(Array.prototype,"at",e(function(a){return this[0|a]}).multiCall().build()),e.defineProperty(Array.prototype,"clipAt",e(function(a){return this[0|Math.max(0,Math.min(a,this.length-1))]}).multiCall().build()),e.defineProperty(Array.prototype,"wrapAt",e(function(a){return a=(0|a)%this.length,0>a&&(a+=this.length),this[a]}).multiCall().build()),e.defineProperty(Array.prototype,"foldAt",e(function(a){return this[n(a,this.length)]}).multiCall().build()),e.defineProperty(Array.prototype,"blendAt",e(function(a,b){switch(b){case"clipAt":case"wrapAt":case"foldAt":break;default:b="clipAt"}var c=0|a,d=this[b](c),e=this[b](c+1);return d+Math.abs(a-c)*(e-d)}).multiCall().build()),e.defineProperty(Array.prototype,"put",function(a,b){return Array.isArray(a)?a.forEach(function(a){this.put(a,b)},this):(a|=0,a>=0&&a<this.length&&(this[a]=b)),this}),e.defineProperty(Array.prototype,"clipPut",function(a,b){return Array.isArray(a)?a.forEach(function(a){this.clipPut(a,b)},this):this[0|Math.max(0,Math.min(a,this.length-1))]=b,this}),e.defineProperty(Array.prototype,"wrapPut",function(a,b){return Array.isArray(a)?a.forEach(function(a){this.wrapPut(a,b)},this):(a=(0|a)%this.length,0>a&&(a+=this.length),this[a]=b),this}),e.defineProperty(Array.prototype,"foldPut",function(a,b){return Array.isArray(a)?a.forEach(function(a){this.foldPut(a,b)},this):this[n(a,this.length)]=b,this}),e.defineProperty(Array.prototype,"insert",function(a,b){return this.splice(Math.max(0,a),0,b),this}),e.defineProperty(Array.prototype,"swap",function(a,b){if(a|=0,b|=0,a>=0&&a<this.length&&b>=0&&b<this.length){var c=this[a];this[a]=this[b],this[b]=c}return this}),e.defineProperty(Array.prototype,"clipSwap",function(a,b){return a=0|Math.max(0,Math.min(a,this.length-1)),b=0|Math.max(0,Math.min(b,this.length-1)),this.swap(a,b)}),e.defineProperty(Array.prototype,"wrapSwap",function(a,b){return a=(0|a)%this.length,0>a&&(a+=this.length),b=(0|b)%this.length,0>b&&(b+=this.length),this.swap(a,b)}),e.defineProperty(Array.prototype,"foldSwap",function(a,b){return a=n(a,this.length),b=n(b,this.length),this.swap(a,b)}),e.defineProperty(Array.prototype,"sum",function(){for(var a=0,b=0,c=this.length;c>b;++b)a+=this[b];return a}),e.defineProperty(Array.prototype,"normalize",e(function(a,b){var c=this.minItem(),d=this.maxItem();return this.map(function(e){return e.linlin(c,d,a,b)})}).defaults("min=0,max=1").build()),e.defineProperty(Array.prototype,"normalizeSum",function(){var a=this.sum();return this.map(function(b){return b/a})}),e.defineProperty(Array.prototype,"mirror",function(){var a=2*this.length-1;if(2>a)return this.slice(0);var b,c,d,e=new Array(a);for(b=0,d=this.length;d>b;++b)e[b]=this[b];for(c=d-2,d=a;d>b;++b,--c)e[b]=this[c];return e}),e.defineProperty(Array.prototype,"mirror1",function(){var a=2*this.length-2;if(2>a)return this.slice(0);var b,c,d,e=new Array(a);for(b=0,d=this.length;d>b;++b)e[b]=this[b];for(c=d-2,d=a;d>b;++b,--c)e[b]=this[c];return e}),e.defineProperty(Array.prototype,"mirror2",function(){var a=2*this.length;if(2>a)return this.slice(0);var b,c,d,e=new Array(a);for(b=0,d=this.length;d>b;++b)e[b]=this[b];for(c=d-1,d=a;d>b;++b,--c)e[b]=this[c];return e}),e.defineProperty(Array.prototype,"stutter",e(function(a){a=Math.max(0,0|a);for(var b=new Array(this.length*a),c=0,d=0,e=this.length;e>c;++c)for(var f=0;a>f;++f,++d)b[d]=this[c];return b}).defaults("n=2").build()),e.defineProperty(Array.prototype,"rotate",e(function(a){a|=0;var b=new Array(this.length),c=b.length;a%=c,0>a&&(a+=c);for(var d=0,e=a;c>d;++d)b[e]=this[d],++e>=c&&(e=0);return b}).defaults("n=1").build()),e.defineProperty(Array.prototype,"sputter",e(function(a,b){for(var c=[],d=0,e=0,f=this.length;f>d&&b>e;)c[e++]=this[d],l()<a&&(d+=1);return c}).defaults("probability=0.25,maxlen=100").build()),e.defineProperty(Array.prototype,"clipExtend",function(a){if(a=Math.max(0,0|a),this.length<a){for(var b=new Array(a),c=0,d=this.length;d>c;++c)b[c]=this[c];for(var e=b[c-1];a>c;++c)b[c]=e;return b}return this.slice(0,a)}),e.defineProperty(Array.prototype,"wrapExtend",function(a){if(a=Math.max(0,0|a),this.length<a){for(var b=new Array(a),c=0;a>c;++c)b[c]=this[c%this.length];return b}return this.slice(0,a)}),e.defineProperty(Array.prototype,"foldExtend",function(a){if(a=Math.max(0,0|a),this.length<a){for(var b=new Array(a),c=0;a>c;++c)b[c]=this[n(c,this.length)];return b}return this.slice(0,a)}),e.defineProperty(Array.prototype,"resamp0",function(a){for(var b=(this.length-1)/(a-1),c=new Array(a),d=0;a>d;++d)c[d]=this[Math.round(d*b)];return c}),e.defineProperty(Array.prototype,"resamp1",function(a){for(var b=(this.length-1)/(a-1),c=new Array(a),d=0;a>d;++d)c[d]=this.blendAt(d*b);return c}),e.defineProperty(Array.prototype,"scramble",function(){var a,b,c,d,e,f=this.slice();for(c=f.length,a=0,d=c;c-1>a;++a,--d)b=a+m(d),e=f[a],f[a]=f[b],f[b]=e;return f}),e.defineProperty(Array.prototype,"choose",function(){return this[m(this.length)]}),c.exports={}}),e("cc/lang/fn",function(a,b,c){var d=a("./cc"),e=a("./utils"),f=a("../common/ops"),g=[].slice,h=function(){function a(a){this.func=a,this.def=null,this.multi=0}a.prototype.defaults=function(a){return this.def=a,this},a.prototype.multiCall=function(a){return this.multi=void 0===a?1/0:a,this},a.prototype.build=function(){var a=this.func,d=[],f=[];this.def&&this.def.split(",").forEach(function(a){a=a.trim().split("="),d.push(a[0].trim()),2===a.length?"Infinity"===a[1]?f.push(1/0):f.push(JSON.parse(a[1])):f.push(void 0)});var h=a,i=this.multi;return 1/0===i?h=this.def?function(){var i=g.call(arguments);return i=c(d,f,g.call(arguments)),b(i)?e.flop(i).map(function(a){return h.apply(this,a)},this):a.apply(this,i)}:function(){var c=g.call(arguments);return b(c)?e.flop(c).map(function(a){return h.apply(this,a)},this):a.apply(this,c)}:i>0?h=this.def?function(){var j=g.call(arguments);j=c(d,f,g.call(arguments));var k=g.call(j,0,i);if(b(k)){var l=g.call(j,i);return e.flop(k).map(function(a){return h.apply(this,a.concat(l))},this)}return a.apply(this,j)}:function(){var c=g.call(arguments,0,i);if(b(c)){var d=g.call(arguments,i);return e.flop(c).map(function(a){return h.apply(this,a.concat(d))},this)}return a.apply(this,arguments)}:0>i?h=this.def?function(){var j=g.call(arguments);j=c(d,f,g.call(arguments));var k=g.call(j,i);if(b(k)){var l=g.call(j,0,i);return e.flop(k).map(function(a){return h.apply(this,l.concat(a))},this)}return a.apply(this,j)}:function(){var c=g.call(arguments,i);if(b(c)){var d=g.call(arguments,0,i);return e.flop(c).map(function(a){return h.apply(this,d.concat(a))},this)}return a.apply(this,arguments)}:this.def&&(h=function(){return a.apply(this,c(d,f,g.call(arguments)))}),h};var b=function(a){for(var b=0,c=a.length;c>b;++b)if(Array.isArray(a[b]))return!0;return!1},c=function(a,b,c){var d,f=b.slice();e.isDict(c[c.length-1])&&(d=c.pop(),Object.keys(d).forEach(function(b){var c=a.indexOf(b);-1!==c&&(f[c]=d[b])}));for(var g=0,h=Math.min(c.length,f.length);h>g;++g)f[g]=c[g];return d&&a.length<=f.length&&e.isDict(b[b.length-1])&&f.splice(f.length-1,1,d),f};return function(b){return new a(b)}}();h.defineProperty=function(a,b,c){Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:c})},h.defineBinaryProperty=function(a,b,c){var e;e=f.ALIASES.hasOwnProperty(b)?f.ALIASES[b]:b,Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:function(a){return Array.isArray(a)?a.map(function(a){return c.call(this,a)},this):d.instanceOfUGen(a)?d.createBinaryOpUGen(e,this,a):c.call(this,a)}})},h.defineArityProperty=function(a,b,c){Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:function(){var a=g.call(arguments);return a.some(d.instanceOfUGen)?c.apply(d.global.DC(0,this),a):c.apply(this,a)}})},c.exports=h}),e("cc/lang/utils",function(a,b,c){var d=a("./cc"),e=function(a){return!(!a||a.constructor!==Object)},f=function(a){return a=+a,isNaN(a)&&(a=0),a},g=function(a){return"null"===a?"null":void 0===a?"undefined":Array.isArray(a)?"[ "+a.map(function(a){return g(a)}).join(", ")+" ]":a.toString()},h=function(a){return null===a||void 0===a?a=[]:Array.isArray(a)||(a=[a]),a},i=function(a){return null===a||void 0===a?0:"function"==typeof a.asUGenInput?a.asUGenInput():d.instanceOfUGen(a)?a:Array.isArray(a)?a.map(i):(a=+a,isNaN(a)&&(a=0),a)},j=function(a){var b=a.reduce(function(a,b){return Math.max(a,Array.isArray(b)?b.length:1)},0),c=new Array(b),d=a.length;if(d)for(var e=0;b>e;++e)for(var f=c[e]=new Array(d),g=0;d>g;++g)f[g]=Array.isArray(a[g])?a[g][e%a[g].length]:a[g];return c},k=function(){var a=function(b,c){for(var d=0,e=b.length;e>d;++d)Array.isArray(b[d])?c=a(b[d],c):c.push(b[d]);return c};return function(b){return a(b,[])}}(),l=function(a,b){for(var c=[],d=[],e=0,f=a.length;f>e;++e)d.push(a[e]),d.length>=b&&(c.push(d),d=[]);return d.length&&c.push(d),c},m=function(a,b){for(var c,d=new Array(b),e=a.length,f=0;b>f;++f)c=a[f%e],d[f]=c[(f/e|0)%c.length]||0;return d},n=function(a,b){if(b<a.length)return a.slice(0,b);for(var c=new Array(b),d=0;b>d;++d)c[d]=a[d%a.length];return c},o=function(a){var b=a.data;b instanceof Uint8Array?d.lang.sendToServer(b):d.lang.recvFromClient(b)};c.exports={isDict:e,asNumber:f,asString:g,asArray:h,asUGenInput:i,flop:j,flatten:k,clump:l,lace:m,wrapExtend:n,lang_onmessage:o}}),e("cc/common/ops",function(a,b,c){var d={},e=[];"neg not isNil notNil bitNot abs asFloat asInt ceil floor frac sign squared cubed sqrt exp reciprocal midicps cpsmidi midiratio ratiomidi dbamp ampdb octcps cpsoct log log2 log10 sin cos tan asin acos atan sinh cosh tanh rand rand2 linrand bilinrand sum3rand distort softclip coin digitvalue silence thru rectWindow hanWindow welWindow triWindow ramp scurve numunaryselectors num tilde pi to_i half twice".split(" ").forEach(function(a,b){d[a]=b,e[b]=a});var f={},g=[];"+ - * / / % eq ne lt gt le ge min max bitAnd bitOr bitXor lcm gcd round roundUp trunc atan2 hypot hypotApx pow leftShift rightShift unsignedRightShift fill ring1 ring2 ring3 ring4 difsqr sumsqr sqrsum sqrdif absdif thresh amclip scaleneg clip2 excess fold2 wrap2 firstarg randrange exprandrange numbinaryselectors roundDown".split(" ").forEach(function(a,b){f[a]=b,g[b]=a});var h={madd:"mul=1,add=0",range:"lo=0,hi=1",exprange:"lo=0.01,hi=1",curverange:"lo=0.01,hi=1,curve=-4",unipolar:"mul=1",bipolar:"mul=1",clip:"lo=1,hi=1",fold:"lo=1,hi=1",wrap:"lo=1,hi=1",blend:"that=0,blendFrac=0.5",lag:"t1=0.1,t2",lag2:"t1=0.1,t2",lag3:"t1=0.1,t2",lagud:"lagTimeU=0.1,lagTimeD=0.1",lag2ud:"lagTimeU=0.1,lagTimeD=0.1",lag3ud:"lagTimeU=0.1,lagTimeD=0.1",varlag:"time=0.1,curvature=0,warp=5,start=0",slew:"up=1,down=1",linlin:'inMin=0,inMax=1,outMin=1,outMax=2,clip="minmax"',linexp:'inMin=0,inMax=1,outMin=1,outMax=2,clip="minmax"',explin:'inMin=0,inMax=1,outMin=1,outMax=2,clip="minmax"',expexp:'inMin=0,inMax=1,outMin=1,outMax=2,clip="minmax"',lincurve:'inMin=0,inMax=1,outMin=0,outMax=1,curve=-4,clip="minmax"',curvelin:'inMin=0,inMax=1,outMin=0,outMax=1,curve=-4,clip="minmax"',bilin:'inCenter=0.5,inMin=0,inMax=1,outCenter=0.5,outMin=0,outMax=1,clip="minmax"',rrand:"num=1",exprand:"num=1"},i={copy:"",dup:"n=2","do":"",wait:"",asUGenInput:""},j={__plus__:"num",__minus__:"neg",__add__:"+",__sub__:"-",__mul__:"*",__div__:"/",__mod__:"%"};c.exports={UNARY_OPS:d,UNARY_OPS_MAP:e,BINARY_OPS:f,BINARY_OPS_MAP:g,ARITY_OPS:h,ALIASES:j,COMMONS:i}}),e("cc/lang/boolean",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("../common/ops"),g=[].slice;e.defineProperty(Boolean.prototype,"copy",function(){return this}),e.defineProperty(Boolean.prototype,"dup",e(function(a){for(var b=new Array(0|a),c=0,d=b.length;d>c;++c)b[c]=this;return b}).defaults(f.COMMONS.dup).build()),e.defineProperty(Boolean.prototype,"do",function(a){var b=this;return b&&(d.instanceOfSyncBlock(a)?d.currentSyncBlockHandler?d.currentSyncBlockHandler.__sync__(a,d.createTaskArgumentsBoolean(!0)):a.clone().perform(b):a(b)),this}),e.defineProperty(Boolean.prototype,"wait",function(){var a=this;return a&&d.currentTask&&d.currentTask.__wait__(d.createTaskWaitTokenBoolean(a)),this}),e.defineProperty(Boolean.prototype,"asUGenInput",function(){return!!this}),["__plus__","__minus__"].concat(Object.keys(f.UNARY_OPS)).forEach(function(a){e.defineProperty(Boolean.prototype,a,function(){return(this?1:0)[a]()})}),["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(f.BINARY_OPS)).forEach(function(a){e.defineProperty(Boolean.prototype,a,function(b){return(this?1:0)[a](b)})}),e.defineBinaryProperty(Boolean.prototype,"__and__",function(a){return d.createTaskWaitLogic("and",[this].concat(a))}),e.defineBinaryProperty(Boolean.prototype,"__or__",function(a){return d.createTaskWaitLogic("or",[this].concat(a))}),Object.keys(f.ARITY_OPS).forEach(function(a){e.defineProperty(Boolean.prototype,a,e(function(){var b=g.call(arguments);return 0[a].apply(this?1:0,b)}).defaults(f.ARITY_OPS[a]).multiCall().build())}),c.exports={}}),e("cc/lang/buffer",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("./utils"),g=a("../common/extend"),h=a("../common/emitter"),i=[].slice,j=function(){function a(a,e){this.bufSrcId=b++;var f=new Uint8Array(16+4*a.samples.length),g=new Uint16Array(f.buffer),h=new Uint32Array(f.buffer),i=new Float32Array(f.buffer);g[0]=1,g[1]=this.bufSrcId,g[3]=a.numChannels,h[2]=a.sampleRate,h[3]=a.numFrames,i.set(a.samples,4),d.lang.sendToServer(f),e&&(c[e]=this)}var b=0,c={};return a.prototype.bind=function(a,b,c){d.lang.pushToTimeline(["/b_bind",a.bufnum,this.bufSrcId,b,c])},a.get=function(a){return c[a]},a.reset=function(){c={}},a}(),k=function(){function a(a,c){h.mixin(this),this.klassName="Buffer",this.bufnum=b++,this.frames=0|a,this.channels=0|c,this._blocking=!0,d.lang.pushToTimeline(["/b_new",this.bufnum,this.frames,this.channels])}var b=0;return g(a,d.Object),a.prototype.free=function(){return d.lang.pushToTimeline(["/b_free",this.bufnum]),this},a.prototype.zero=function(){return d.lang.pushToTimeline(["/b_zero",this.bufnum]),this},a.prototype.set=function(){var a=i.call(arguments);return d.lang.pushToTimeline(["/b_set",this.bufnum,a]),this},a.prototype.setn=function(){var a=i.call(arguments);return d.lang.pushToTimeline(["/b_set",this.bufnum,a]),this},a.prototype.sine1=e(function(a,b,c,e){a=f.asArray(a);var g=(b?1:0)+(c?2:0)+(e?4:0);return d.lang.pushToTimeline(["/b_gen",this.bufnum,"sine1",g].concat(a)),this}).defaults("amps=[],normalize=true,asWavetable=true,clearFirst=true").build(),a.prototype.sine2=e(function(a,b,c,e,g){a=f.asArray(a),b=f.asArray(b);var h=(c?1:0)+(e?2:0)+(g?4:0),i=2*Math.max(a.length,b.length);return d.lang.pushToTimeline(["/b_gen",this.bufnum,"sine2",h].concat(f.lace([a,b],i))),this}).defaults("freqs=[],amps=[],normalize=true,asWavetable=true,clearFirst=true").build(),a.prototype.sine3=e(function(a,b,c,e,g,h){a=f.asArray(a),b=f.asArray(b),c=f.asArray(c);var i=(e?1:0)+(g?2:0)+(h?4:0),j=3*Math.max(a.length,b.length,c.length);return d.lang.pushToTimeline(["/b_gen",this.bufnum,"sine3",i].concat(f.lace([a,b,c],j))),this}).defaults("freqs=[],amps=[],phases=[],normalize=true,asWavetable=true,clearFirst=true").build(),a.prototype.cheby=e(function(a,b,c,e){a=f.asArray(a);var g=(b?1:0)+(c?2:0)+(e?4:0);return d.lang.pushToTimeline(["/b_gen",this.bufnum,"cheby",g].concat(a)),this}).defaults("amplitudes=[],normalize=true,asWavetable=true,clearFirst=true").build(),a.prototype.performWait=function(){return this._blocking},a.prototype.asUGenInput=function(){return this.bufnum},a}();d.global.Buffer=e(function(a,b,c){Array.isArray(a)&&(a=new Float32Array(a)),a instanceof Float32Array&&(c={sampleRate:d.lang.sampleRate,numChannels:1,numFrames:a.length,samples:a},a=c.numFrames,b=c.numChannels);var e=new k(a,b);return c&&new j(c).bind(e,0,-1),e}).defaults("numFrames=0,numChannels=1,source").build(),d.global.Buffer.read=e(function(a,b,c){if("string"!=typeof a)throw new TypeError("Buffer.Read: path should be a string.");var e=j.get(a),f=new k;return e?e.bind(f,b,c):d.lang.requestBuffer(a,function(d){d&&new j(d,a).bind(f,b,c)}),f}).defaults("path,startFrame=0,numFrames=-1").build(),d.instanceOfBuffer=function(a){return a instanceof k},d.resetBuffer=function(){j.reset()},c.exports={Buffer:k}}),e("cc/lang/builtin",function(a,b,c){var d=a("./cc"),e=a("../common/pack").pack,f=[].slice;d.global.console={},d.global.console.log=function(){d.lang&&d.lang.sendToClient(["/console/log",f.call(arguments).map(e)])};var g=[];d.global.setInterval=function(a,b){var c=setInterval(a,b);return g.push(c),c},d.global.setTimeout=function(a,b){var c=setTimeout(a,b);return g.push(c),c},d.global.clearInterval=function(a){clearInterval(a);var b=g.indexOf(a);-1!==b&&g.splice(b,1)},d.global.clearTimeout=function(a){clearTimeout(a);var b=g.indexOf(a);-1!==b&&g.splice(b,1)},d.resetBuiltin=function(){g.splice(0).forEach(function(a){clearInterval(a),clearTimeout(a)})},c.exports={}}),e("cc/lang/bus",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("../common/extend"),g={audio:2,control:0},h=function(){function a(a,b,c){this.rate=a,this.index=b,this.numChannels=c}return f(a,d.Object),a.prototype.asUGenInput=function(){return this.index},a}();d.global.Bus=function(){},d.global.Bus.control=e(function(a){var b=g.control;if("number"==typeof a){if(128<g.control+a)throw new Error("Bus: failed to get a control bus allocated.");g.control+=a}else a=0;return new h(2,b,a)}).defaults("numChannels=1").build(),d.global.Bus.audio=e(function(a){var b=g.audio;if("number"==typeof a){if(16<g.audio+a)throw new Error("Bus: failed to get an audio bus allocated.");g.audio+=a}else a=0;return new h(2,b,a)}).defaults("numChannels=1").build(),d.resetBus=function(){g.audio=2,g.control=0},c.exports={}}),e("cc/lang/date",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("../common/ops"),g=[].slice;e.defineProperty(Date.prototype,"copy",function(){return new Date(+this)}),e.defineProperty(Date.prototype,"dup",e(function(a){for(var b=new Array(0|a),c=0,d=b.length;d>c;++c)b[c]=this;return b}).defaults(f.COMMONS.dup).build()),e.defineProperty(Date.prototype,"do",function(a){var b=Date.now()>+this;return b&&(d.instanceOfSyncBlock(a)?d.currentSyncBlockHandler?d.currentSyncBlockHandler.__sync__(a,d.createTaskArgumentsBoolean(!0)):a.clone().perform(b):a(b)),this}),e.defineProperty(Date.prototype,"wait",function(){var a=Date.now()>+this;return a&&d.currentTask&&d.currentTask.__wait__(d.createTaskWaitTokenDate(this)),this}),e.defineProperty(Date.prototype,"asUGenInput",function(){return+this}),["__plus__","__minus__"].concat(Object.keys(f.UNARY_OPS)).forEach(function(a){e.defineProperty(Date.prototype,a,function(){return(+this)[a]()})}),["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(f.BINARY_OPS)).forEach(function(a){e.defineProperty(Date.prototype,a,function(b){return(+this)[a](b)})}),e.defineBinaryProperty(Date.prototype,"__and__",function(a){return d.createTaskWaitLogic("and",[this].concat(a))}),e.defineBinaryProperty(Date.prototype,"__or__",function(a){return d.createTaskWaitLogic("or",[this].concat(a))}),Object.keys(f.ARITY_OPS).forEach(function(a){e.defineProperty(Date.prototype,a,e(function(){var b=g.call(arguments);return 0[a].apply(+this,b)}).defaults(f.ARITY_OPS[a]).multiCall().build())}),c.exports={}}),e("cc/lang/env",function(a,b,c){var d=a("./cc"),e=a("../common/extend"),f=a("./fn"),g=a("./utils"),h={step:0,lin:1,linear:1,exp:2,exponential:2,sin:3,sine:3,wel:4,welch:4,sqr:6,squared:6,cub:7,cubed:7},i=function(a){return"number"==typeof a?5:h[a]||0},j=function(a){return"number"==typeof a?a:0},k=function(){function a(a,b,c,d,e,f){this._levels=a,this._times=g.wrapExtend(b,a.length-1),this._curve=c||"lin",this._releaseNode=d,this._loopNode=e,this._offset=f,this._array=null}return e(a,d.Object),a.prototype.ar=f(function(a,b,c,e,f){return d.global.EnvGen(2,this,b,e,f,c,a)}).defaults("doneAction=0,gate=1,timeScale=1,mul=1,add=0").multiCall().build(),a.prototype.kr=f(function(a,b,c,e,f){return d.global.EnvGen(1,this,b,e,f,c,a)}).defaults("doneAction=0,gate=1,timeScale=1,mul=1,add=0").multiCall().build(),a.prototype.asMultichannelArray=function(){return this._array||(this._array=this.asArray()),this._array},a.prototype.asArray=function(){var a,b=this._levels,c=this._times,d=this._curve,e=this._times.length;Array.isArray(d)||(d=[d]);var f,h="number"==typeof this._releaseNode?this._releaseNode:-99,k="number"==typeof this._loopNode?this._loopNode:-99;a=[b[0],e,h,k];for(var l=0;e>l;++l)f=l%d.length,a.push(b[l+1],c[l],i(d[f]),j(d[f]));return g.flop(a)},a}();d.global.Env=f(function(a,b,c,d,e,f){return Array.isArray(a)||(a=[0,1,0]),Array.isArray(b)||(b=[1,1]),new k(a,b,c,d,e,f)}).defaults('levels=0,times=0,curve="lin",releaseNode,loopNode,offset=0').build(),d.global.Env.triangle=f(function(a,b){return a=a.__mul__(.5),new k([0,b,0],[a,a])}).defaults("dur=1,level=1").build(),d.global.Env.sine=f(function(a,b){return a=a.__mul__(.5),new k([0,b,0],[a,a],"sine")}).defaults("dur=1,level=1").build(),d.global.Env.perc=f(function(a,b,c,d){return new k([0,c,0],[a,b],d)
}).defaults("attackTime=0.01,releaseTime=1,level=1,curve=-4").build(),d.global.Env.linen=f(function(a,b,c,d,e){return new k([0,d,d,0],[a,b,c],e)}).defaults('attackTime=0.01,sustainTime=1,releaseTime=1,level=1,curve="lin"').build(),d.global.Env.xyc=function(){throw"not implemented"},d.global.Env.pairs=function(){throw"not implemented"},d.global.Env.cutoff=f(function(a,b,c){var d=i(c),e=2===d?1e-5:0;return new k([b,e],[a],c,0)}).defaults('releaseTime=0.1,level=1,curve="lin"').build(),d.global.Env.dadsr=f(function(a,b,c,d,e,f,g,h){return new k([0,0,f,f.__mul__(d),0].__add__(h),[a,b,c,e],g,3)}).defaults("delayTime=0.1,attackTime=0.01,decayTime=0.3,sustainLevel=0.5,releaseTime=1,peakLevel=1,curve=-4,bias=0").build(),d.global.Env.adsr=f(function(a,b,c,d,e,f,g){return new k([0,e,e.__mul__(c),0].__add__(g),[a,b,d],f,2)}).defaults("attackTime=0.01,decayTime=0.3,sustainLevel=0.5,releaseTime=1,peakLevel=1,curve=-4,bias=0").build(),d.global.Env.asr=f(function(a,b,c,d){return new k([0,b,0],[a,c],d,1)}).defaults("attackTime=0.01,sustainLevel=1,releaseTime=1,curve=-4").build(),d.global.Env.circle=function(){throw"not implemented"},c.exports={}}),e("cc/lang/function",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("../common/ops"),g=a("./utils"),h=[].slice,i=function(a){return a=a(),"number"!=typeof a||isNaN(a)?0:a};e.defineProperty(Function.prototype,"copy",function(){return this}),e.defineProperty(Function.prototype,"dup",e(function(a){a|=0;for(var b=new Array(a),c=0;a>c;++c)b[c]=this(c);return b}).defaults(f.COMMONS.dup).build()),e.defineProperty(Function.prototype,"do",function(){throw"not implemented"}),e.defineProperty(Function.prototype,"wait",function(){return d.currentTask&&d.currentTask.__wait__(d.createTaskWaitTokenFunction(this)),this}),e.defineProperty(Function.prototype,"asUGenInput",function(){return g.asUGenInput(this())}),["__plus__","__minus__"].concat(Object.keys(f.UNARY_OPS)).forEach(function(a){e.defineProperty(Function.prototype,a,function(){return i(this)[a]()}),/^[a-z]/.test(a)&&!d.global.hasOwnProperty(a)&&(d.global[a]=function(b){return"function"==typeof b[a]?b[a]():b})}),["__sub__","__div__","__mod__"].concat(Object.keys(f.BINARY_OPS)).forEach(function(a){e.defineProperty(Function.prototype,a,function(b){return i(this)[a](b)}),/^[a-z]/.test(a)&&!d.global.hasOwnProperty(a)&&(d.global[a]=function(b,c){return"function"==typeof b[a]?b[a](c):b})}),e.defineProperty(Function.prototype,"__add__",function(a){return this.toString()+a}),e.defineProperty(Function.prototype,"__mul__",function(a){if("function"==typeof a){var b=this,c=a;return function(){return b.call(null,c.apply(null,arguments))}}return 0}),e.defineBinaryProperty(Function.prototype,"__and__",function(a){return d.createTaskWaitLogic("and",[this].concat(a))}),e.defineBinaryProperty(Function.prototype,"__or__",function(a){return d.createTaskWaitLogic("or",[this].concat(a))}),Object.keys(f.ARITY_OPS).forEach(function(a){e.defineProperty(Function.prototype,a,e(function(){var b=h.call(arguments);return 0[a].apply(i(this),b)}).defaults(f.ARITY_OPS[a]).multiCall().build()),/^[a-z]/.test(a)&&!d.global.hasOwnProperty(a)&&(d.global[a]=function(b){return"function"==typeof b[a]?b[a].apply(b,h.call(arguments,1)):b})}),e.defineProperty(Function.prototype,"play",function(){var a=this;return d.global.SynthDef(function(){d.global.Out(2,0,a())},[]).play()}),c.exports={}}),e("cc/lang/mix",function(a,b,c){var d=a("./cc"),e=a("./utils"),f=function(a){Array.isArray(a)||(a=[a]);var b=e.clump(a,4),c=b.map(function(a){switch(a.length){case 4:return d.createSum4(a[0],a[1],a[2],a[3]);case 3:return d.createSum3(a[0],a[1],a[2]);case 2:return d.createBinaryOpUGen("+",a[0],a[1]);case 1:return a[0]}});switch(c.length){case 4:return d.createSum4(c[0],c[1],c[2],c[3]);case 3:return d.createSum3(c[0],c[1],c[2]);case 2:return d.createBinaryOpUGen("+",c[0],c[1]);case 1:return c[0];default:return f(c)}};d.global.Mix=function(a){return f(a)||[]},d.global.Mix.fill=function(a,b){a=0|a;for(var c=new Array(a),d=0;a>d;++d)c[d]=b(d);return f(c)},d.global.Mix.ar=function(){},c.exports={}}),e("cc/lang/node",function(a,b,c){var d=a("./cc"),e=a("./utils"),f=a("../common/extend"),g={},h=function(){function a(){this.klassName="Node",this.nodeId=b++,this._blocking=!0,g[this.nodeId]=this}var b=0;return f(a,d.Object),a.prototype.play=function(){return d.lang.pushToTimeline(["/n_run",this.nodeId,!0]),this},a.prototype.pause=function(){return d.lang.pushToTimeline(["/n_run",this.nodeId,!1]),this},a.prototype.stop=function(){return d.lang.pushToTimeline(["/n_free",this.nodeId]),this._blocking=!1,this},a.prototype.set=function(a){var b=k(a,this.params);return b.length&&d.lang.pushToTimeline(["/n_set",this.nodeId,b]),this},a.prototype.release=function(a){a=-1-e.asNumber(a);var b=k({gate:a},this.params);return b.length&&d.lang.pushToTimeline(["/n_set",this.nodeId,b]),this},a.prototype.performWait=function(){return this._blocking},a}(),i=function(){function a(a,b){h.call(this),this.klassName="Group",a instanceof h&&d.lang.pushToTimeline(["/g_new",this.nodeId,b,a.nodeId])}return f(a,h),a}(),j=function(){function a(a,b,c,e){if(h.call(this),this.klassName="Synth",a instanceof h&&d.instanceOfSynthDef(c)){this.params=c.specs.params;var f=this.nodeId,g=k(e,this.params);d.lang.pushToTimeline(["/s_new",f,b,a.nodeId,c._defId,g])}}return f(a,h),a}(),k=function(a,b){var c=[];return e.isDict(a)&&b&&Object.keys(a).forEach(function(d){var e=a[d],f=b.names.indexOf(d);if(-1!==f){var g=b.length[f];f=b.indices[f],Array.isArray(e)?e.forEach(function(a,b){g>b&&("number"!=typeof a||isNaN(a)||c.push(f+b,a))}):"number"!=typeof e||isNaN(e)||c.push(f,e)}}),c},l=function(a){var b,c,e;return d.instanceOfSynthDef(a[0])?(b=d.lang.rootNode,c=a[0],e=a[1]||{}):d.instanceOfSynthDef(a[1])?(b=a[0],c=a[1],e=a[2]||{}):(b=d.lang.rootNode,c=null,e={}),[b,c,e]};d.global.Group=function(){var a,b=0,c=0;return a=d.instanceOfNode(arguments[c])?arguments[c++]:d.lang.rootNode,"string"==typeof arguments[c]?b={addToHead:0,addToTail:1,addBefore:2,addAfter:3,replace:4}[arguments[c++]]||0:"number"==typeof arguments[c]&&0<=arguments[c]&&arguments[c]<=4&&(b=arguments[c++]),new i(a,b)},d.global.Group.after=function(a){return new i(a||d.lang.rootNode,3)},d.global.Group.before=function(a){return new i(a||d.lang.rootNode,2)},d.global.Group.head=function(a){return new i(a||d.lang.rootNode,0)},d.global.Group.tail=function(a){return new i(a||d.lang.rootNode,1)},d.global.Group.replace=function(a){return new i(a,4)},d.global.Synth=function(a){var b,c,f=0,g=1;return b=e.isDict(arguments[g])?arguments[g++]:{},c=d.instanceOfNode(arguments[g])?arguments[g++]:d.lang.rootNode,"string"==typeof arguments[g]?f={addToHead:0,addToTail:1,addBefore:2,addAfter:3,replace:4}[arguments[g++]]||0:"number"==typeof arguments[g]&&0<=arguments[g]&&arguments[g]<=4&&(f=arguments[g++]),new j(c,f,a,b)},d.global.Synth.after=function(){var a=l(arguments);return new j(a[0],3,a[1],a[2])},d.global.Synth.before=function(){var a=l(arguments);return new j(a[0],2,a[1],a[2])},d.global.Synth.head=function(){var a=l(arguments);return new j(a[0],0,a[1],a[2])},d.global.Synth.tail=function(){var a=l(arguments);return new j(a[0],1,a[1],a[2])},d.global.Synth.replace=function(a,b,c){return new j(a,4,b,c)},d.createRootNode=function(){return new i},d.instanceOfNode=function(a){return a instanceof h},d.instanceOfGroup=function(a){return a instanceof i},d.instanceOfSynth=function(a){return a instanceof j},d.getNode=function(a){return g[a]},d.resetNode=function(){g={}},c.exports={Node:h,Group:i,Synth:j,args2controls:k}}),e("cc/lang/number",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("../common/ops"),g=function(){return d.lang.random.next()};e.defineProperty(Number.prototype,"copy",function(){return this}),e.defineProperty(Number.prototype,"dup",e(function(a){for(var b=new Array(0|a),c=0,d=b.length;d>c;++c)b[c]=this;return b}).defaults(f.COMMONS.dup).build()),e.defineProperty(Number.prototype,"do",function(a){var b,c=this;if(d.instanceOfSyncBlock(a))if(d.currentSyncBlockHandler)c>0&&d.currentSyncBlockHandler.__sync__(a,d.createTaskArgumentsNumber(0,c-1,1));else for(b=0;c>b;++b)a.clone().perform(b);else for(b=0;c>b;++b)a(b);return this}),e.defineProperty(Number.prototype,"wait",function(){var a=this;return a>=0&&d.currentTask&&d.currentTask.__wait__(d.createTaskWaitTokenNumber(a)),this}),e.defineProperty(Number.prototype,"asUGenInput",function(){return this}),e.defineProperty(Number.prototype,"__plus__",function(){return+this}),e.defineProperty(Number.prototype,"__minus__",function(){return-this}),e.defineProperty(Number.prototype,"neg",function(){return-this}),e.defineProperty(Number.prototype,"not",function(){return 0===this?1:0}),e.defineProperty(Number.prototype,"isNil",function(){return 0}),e.defineProperty(Number.prototype,"notNil",function(){return 1}),e.defineProperty(Number.prototype,"bitNot",function(){return~this}),e.defineProperty(Number.prototype,"abs",function(){return Math.abs(this)}),e.defineProperty(Number.prototype,"asFloat",function(){return+this}),e.defineProperty(Number.prototype,"asInt",function(){return 0|this}),e.defineProperty(Number.prototype,"ceil",function(){return Math.ceil(this)}),e.defineProperty(Number.prototype,"floor",function(){return Math.floor(this)}),e.defineProperty(Number.prototype,"frac",function(){return 0>this?1+(this-(0|this)):this-(0|this)}),e.defineProperty(Number.prototype,"sign",function(){return 0===this?0:this>0?1:-1}),e.defineProperty(Number.prototype,"squared",function(){return this*this}),e.defineProperty(Number.prototype,"cubed",function(){return this*this*this}),e.defineProperty(Number.prototype,"sqrt",function(){return Math.sqrt(Math.abs(this))}),e.defineProperty(Number.prototype,"exp",function(){return Math.exp(this)}),e.defineProperty(Number.prototype,"reciprocal",function(){return 1/this}),e.defineProperty(Number.prototype,"midicps",function(){return 440*Math.pow(2,1*(this-69)/12)}),e.defineProperty(Number.prototype,"cpsmidi",function(){return Math.log(1*Math.abs(this)/440)*Math.LOG2E*12+69}),e.defineProperty(Number.prototype,"midiratio",function(){return Math.pow(2,1*this/12)}),e.defineProperty(Number.prototype,"ratiomidi",function(){return Math.log(Math.abs(this))*Math.LOG2E*12}),e.defineProperty(Number.prototype,"dbamp",function(){return Math.pow(10,.05*this)}),e.defineProperty(Number.prototype,"ampdb",function(){return Math.log(Math.abs(this))*Math.LOG10E*20}),e.defineProperty(Number.prototype,"octcps",function(){return 440*Math.pow(2,this-4.75)}),e.defineProperty(Number.prototype,"cpsoct",function(){return Math.log(1*Math.abs(this)/440)*Math.LOG2E+4.75}),e.defineProperty(Number.prototype,"log",function(){return Math.log(Math.abs(this))}),e.defineProperty(Number.prototype,"log2",function(){return Math.log(Math.abs(this))*Math.LOG2E}),e.defineProperty(Number.prototype,"log10",function(){return Math.log(Math.abs(this))*Math.LOG10E}),e.defineProperty(Number.prototype,"sin",function(){return Math.sin(this)}),e.defineProperty(Number.prototype,"cos",function(){return Math.cos(this)}),e.defineProperty(Number.prototype,"tan",function(){return Math.tan(this)}),e.defineProperty(Number.prototype,"asin",function(){return Math.asin(Math.max(-1,Math.min(this,1)))}),e.defineProperty(Number.prototype,"acos",function(){return Math.acos(Math.max(-1,Math.min(this,1)))}),e.defineProperty(Number.prototype,"atan",function(){return Math.atan(this)}),e.defineProperty(Number.prototype,"sinh",function(){return.5*(Math.pow(Math.E,this)-Math.pow(Math.E,-this))}),e.defineProperty(Number.prototype,"cosh",function(){return.5*(Math.pow(Math.E,this)+Math.pow(Math.E,-this))}),e.defineProperty(Number.prototype,"tanh",function(){return this.sinh()/this.cosh()}),e.defineProperty(Number.prototype,"rand",function(){return g()*this}),e.defineProperty(Number.prototype,"rand2",function(){return(2*g()-1)*this}),e.defineProperty(Number.prototype,"linrand",function(){return Math.min(g(),g())*this}),e.defineProperty(Number.prototype,"bilinrand",function(){return(g()-g())*this}),e.defineProperty(Number.prototype,"sum3rand",function(){return.666666667*(g()+g()+g()-1.5)*this}),e.defineProperty(Number.prototype,"distort",function(){return this/(1+Math.abs(this))}),e.defineProperty(Number.prototype,"softclip",function(){var a=Math.abs(this);return.5>=a?this:(a-.25)/this}),e.defineProperty(Number.prototype,"coin",function(){return g()<this}),e.defineProperty(Number.prototype,"digitvalue",function(){return 0}),e.defineProperty(Number.prototype,"silence",function(){return 0}),e.defineProperty(Number.prototype,"thru",function(){return 0}),e.defineProperty(Number.prototype,"rectWindow",function(){return 0}),e.defineProperty(Number.prototype,"hanWindow",function(){return 0}),e.defineProperty(Number.prototype,"welWindow",function(){return 0}),e.defineProperty(Number.prototype,"triWindow",function(){return 0}),e.defineProperty(Number.prototype,"ramp",function(){return 0}),e.defineProperty(Number.prototype,"scurve",function(){return 0}),e.defineProperty(Number.prototype,"numunaryselectors",function(){return 0}),e.defineProperty(Number.prototype,"num",function(){return+this}),e.defineProperty(Number.prototype,"tilde",function(){return~this}),e.defineProperty(Number.prototype,"pi",function(){return this*Math.PI}),e.defineProperty(Number.prototype,"to_i",function(){return 0|this}),e.defineProperty(Number.prototype,"half",function(){return.5*this}),e.defineProperty(Number.prototype,"twice",function(){return 2*this}),e.defineBinaryProperty(Number.prototype,"__add__",function(a){return this+a}),e.defineBinaryProperty(Number.prototype,"__sub__",function(a){return this-a}),e.defineBinaryProperty(Number.prototype,"__mul__",function(a){return this*a}),e.defineBinaryProperty(Number.prototype,"__div__",function(a){return 0===this&&0===a?0:this/a}),e.defineBinaryProperty(Number.prototype,"__mod__",function(a){return 0===a?0:this%a}),e.defineBinaryProperty(Number.prototype,"__and__",function(a){return d.createTaskWaitLogic("and",[this].concat(a))}),e.defineBinaryProperty(Number.prototype,"__or__",function(a){return d.createTaskWaitLogic("or",[this].concat(a))}),e.defineBinaryProperty(Number.prototype,"eq",function(a){return this===a?1:0}),e.defineBinaryProperty(Number.prototype,"ne",function(a){return this!==a?1:0}),e.defineBinaryProperty(Number.prototype,"lt",function(a){return a>this?1:0}),e.defineBinaryProperty(Number.prototype,"gt",function(a){return this>a?1:0}),e.defineBinaryProperty(Number.prototype,"le",function(a){return a>=this?1:0}),e.defineBinaryProperty(Number.prototype,"ge",function(a){return this>=a?1:0}),e.defineBinaryProperty(Number.prototype,"bitAnd",function(a){return this&a}),e.defineBinaryProperty(Number.prototype,"bitOr",function(a){return this|a}),e.defineBinaryProperty(Number.prototype,"bitXor",function(a){return this^a}),e.defineBinaryProperty(Number.prototype,"min",function(a){return Math.min(this,a)}),e.defineBinaryProperty(Number.prototype,"max",function(a){return Math.max(this,a)});var h=function(a,b,c){for(a=0|a,b=0|b;0!==b;)c=a%b,a=b,b=c;return Math.abs(a)};e.defineBinaryProperty(Number.prototype,"lcm",function(a){return 0===this&&0===a?0:Math.abs(this*a)/h(this,a)}),e.defineBinaryProperty(Number.prototype,"gcd",function(a){return h(this,a)}),e.defineBinaryProperty(Number.prototype,"round",function(a){return 0===a?this:Math.round(this/a)*a}),e.defineBinaryProperty(Number.prototype,"roundUp",function(a){return 0===a?this:Math.ceil(this/a)*a}),e.defineBinaryProperty(Number.prototype,"roundDown",function(a){return 0===a?this:Math.floor(this/a)*a}),e.defineBinaryProperty(Number.prototype,"trunc",function(a){return 0===a?this:Math.floor(this/a)*a}),e.defineBinaryProperty(Number.prototype,"atan2",function(a){return Math.atan2(this,a)}),e.defineBinaryProperty(Number.prototype,"hypot",function(a){return Math.sqrt(this*this+a*a)}),e.defineBinaryProperty(Number.prototype,"hypotApx",function(a){var b=Math.abs(this),c=Math.abs(a),d=Math.min(b,c);return b+c-(Math.sqrt(2)-1)*d}),e.defineBinaryProperty(Number.prototype,"pow",function(a){return Math.pow(Math.abs(this),a)}),e.defineBinaryProperty(Number.prototype,"leftShift",function(a){return 0>a?(0|this)>>(0|-a):(0|this)<<(0|a)}),e.defineBinaryProperty(Number.prototype,"rightShift",function(a){return 0>a?(0|this)<<(0|-a):(0|this)>>(0|a)}),e.defineBinaryProperty(Number.prototype,"unsignedRightShift",function(a){return 0>a?(0|this)<<(0|-a):(0|this)>>(0|a)}),e.defineBinaryProperty(Number.prototype,"fill",function(){return 0}),e.defineBinaryProperty(Number.prototype,"ring1",function(a){return this*a+this}),e.defineBinaryProperty(Number.prototype,"ring2",function(a){return this*a+this+a}),e.defineBinaryProperty(Number.prototype,"ring3",function(a){return this*this*a}),e.defineBinaryProperty(Number.prototype,"ring4",function(a){return this*this*a-this*a*a}),e.defineBinaryProperty(Number.prototype,"difsqr",function(a){return this*this-a*a}),e.defineBinaryProperty(Number.prototype,"sumsqr",function(a){return this*this+a*a}),e.defineBinaryProperty(Number.prototype,"sqrsum",function(a){return(this+a)*(this+a)}),e.defineBinaryProperty(Number.prototype,"sqrdif",function(a){return(this-a)*(this-a)}),e.defineBinaryProperty(Number.prototype,"absdif",function(a){return Math.abs(this-a)}),e.defineBinaryProperty(Number.prototype,"thresh",function(a){return a>this?0:this}),e.defineBinaryProperty(Number.prototype,"amclip",function(a){return.5*this*(a+Math.abs(a))}),e.defineBinaryProperty(Number.prototype,"scaleneg",function(a){return a=.5*a+.5,(Math.abs(this)-this)*a+this}),e.defineBinaryProperty(Number.prototype,"clip2",function(a){return Math.max(-a,Math.min(this,a))}),e.defineBinaryProperty(Number.prototype,"excess",function(a){return this-Math.max(-a,Math.min(this,a))}),e.defineBinaryProperty(Number.prototype,"fold2",function(a){var b,c,d,e,f=this;if(b=f+a,f>=a){if(f=a+a-f,f>=-a)return f}else{if(!(-a>f))return f;if(f=-a-a-f,a>f)return f}return a===-a?-a:(d=a+a,e=d+d,c=b-e*Math.floor(b/e),c>=d&&(c=e-c),c-a)}),e.defineBinaryProperty(Number.prototype,"wrap2",function(a){var b,c=this;if(c>=a){if(b=a+a,c-=b,a>c)return c}else{if(!(-a>c))return c;if(b=a+a,c+=b,c>=-a)return c}return a===-a?-a:c-b*Math.floor((c+a)/b)}),e.defineBinaryProperty(Number.prototype,"firstarg",function(){return 0}),e.defineBinaryProperty(Number.prototype,"randrange",function(){return 0}),e.defineBinaryProperty(Number.prototype,"exprandrange",function(){return 0}),e.defineBinaryProperty(Number.prototype,"numbinaryselectors",function(){return 0}),e.defineProperty(Number.prototype,"madd",e(function(a,b){return d.createMulAdd(this,a,b)}).defaults(f.ARITY_OPS.madd).build()),e.defineArityProperty(Number.prototype,"range",e(function(a,b){return this.linlin(0,1,a,b)}).defaults(f.ARITY_OPS.range).build()),e.defineArityProperty(Number.prototype,"exprange",e(function(a,b){return this.linexp(0,1,a,b)}).defaults(f.ARITY_OPS.exprange).build()),e.defineArityProperty(Number.prototype,"curverange",e(function(a,b,c){return this.lincurve(0,1,a,b,c)}).defaults(f.ARITY_OPS.curverange).build()),e.defineArityProperty(Number.prototype,"unipolar",e(function(a){return this.__mul__(a)}).defaults(f.ARITY_OPS.unipolar).build()),e.defineArityProperty(Number.prototype,"bipolar",e(function(a){return(2*this-1).__mul__(a)}).defaults(f.ARITY_OPS.bipolar).build()),e.defineArityProperty(Number.prototype,"clip",e(function(a,b){return Math.max(a,Math.min(this,b))}).defaults(f.ARITY_OPS.clip).multiCall().build()),e.defineArityProperty(Number.prototype,"fold",e(function(a,b){var c,d,e,f=this;if(b===a)return a;if(f>=b){if(f=2*b-f,f>=a)return f}else{if(!(a>f))return f;if(f=2*a-f,b>f)return f}return d=b-a,e=2*d,c=f-a,c-=e*Math.floor(c/e),c>=d?e-c+a:c+a}).defaults(f.ARITY_OPS.fold).multiCall().build()),e.defineArityProperty(Number.prototype,"wrap",e(function(a,b){var c=this;if(b===a)return a;var d=b-a;if(c>=b){if(c-=d,b>c)return c}else{if(!(a>c))return c;if(c+=d,c>=a)return c}return c-d*Math.floor((c-a)/d)}).defaults(f.ARITY_OPS.wrap).multiCall().build()),e.defineArityProperty(Number.prototype,"blend",e(function(a,b){return this+b*(a-this)}).defaults(f.ARITY_OPS.wrap).multiCall().build()),e.defineProperty(Number.prototype,"lag",function(){return this}),e.defineProperty(Number.prototype,"lag2",function(){return this}),e.defineProperty(Number.prototype,"lag3",function(){return this}),e.defineProperty(Number.prototype,"lagud",function(){return this}),e.defineProperty(Number.prototype,"lag2ud",function(){return this}),e.defineProperty(Number.prototype,"lag3ud",function(){return this}),e.defineProperty(Number.prototype,"varlag",function(){return this}),e.defineProperty(Number.prototype,"slew",function(){return this}),e.defineArityProperty(Number.prototype,"linlin",e(function(a,b,c,d,e){switch(e){case"min":if(a>=this)return c;break;case"max":if(this>=b)return d;break;case"minmax":default:if(a>=this)return c;if(this>=b)return d}return this.__sub__(a).__div__(b.__sub__(a)).__mul__(d.__sub__(c)).__add__(c)}).defaults(f.ARITY_OPS.linlin).multiCall().build()),e.defineArityProperty(Number.prototype,"linexp",e(function(a,b,c,d,e){switch(e){case"min":if(a>=this)return c;break;case"max":if(this>=b)return d;break;case"minmax":default:if(a>=this)return c;if(this>=b)return d}return d.__div__(c).pow(this.__sub__(a).__div__(b.__sub__(a))).__mul__(c)}).defaults(f.ARITY_OPS.linexp).multiCall().build()),e.defineArityProperty(Number.prototype,"explin",e(function(a,b,c,d,e){switch(e){case"min":if(a>=this)return c;break;case"max":if(this>=b)return d;break;case"minmax":default:if(a>=this)return c;if(this>=b)return d}return this.__div__(a).log().__div__(b.__div__(a).log()).__mul__(d.__sub__(c)).__add__(c)}).defaults(f.ARITY_OPS.explin).multiCall().build()),e.defineArityProperty(Number.prototype,"expexp",e(function(a,b,c,d,e){switch(e){case"min":if(a>=this)return c;break;case"max":if(this>=b)return d;break;case"minmax":default:if(a>=this)return c;if(this>=b)return d}return d.__div__(c).pow(this.__div__(a).log().__div__(b.__div__(a).log())).__mul__(c)}).defaults(f.ARITY_OPS.expexp).multiCall().build()),e.defineArityProperty(Number.prototype,"lincurve",e(function(a,b,c,d,e,f){switch(f){case"min":if(a>=this)return c;break;case"max":if(this>=b)return d;break;case"minmax":default:if(a>=this)return c;if(this>=b)return d}if(Math.abs(e)<.001)return this.linlin(a,b,c,d,f);var g=e.exp(),h=d.__sub__(c).__div__(1..__sub__(g)),i=c.__add__(h),j=this.__sub__(a).__div__(b.__sub__(a));return i.__sub__(h.__mul__(g.pow(j)))}).defaults(f.ARITY_OPS.lincurve).multiCall().build()),e.defineArityProperty(Number.prototype,"curvelin",e(function(a,b,c,d,e,f){switch(f){case"min":if(a>=this)return c;break;case"max":if(this>=b)return d;break;case"minmax":default:if(a>=this)return c;if(this>=b)return d}if(Math.abs(e)<.001)return this.linlin(a,b,c,d,f);var g=e.exp(),h=d.__sub__(c).__div__(1..__sub__(g)),i=c.__add__(h),j=this.__sub__(a).__div__(b.__sub__(a));return i.__sub__(j).__div__(h).log().__div__(e)}).defaults(f.ARITY_OPS.curvelin).multiCall().build()),e.defineArityProperty(Number.prototype,"bilin",e(function(a,b,c,d,e,f,g){switch(g){case"min":if(b>=this)return e;break;case"max":if(this>=c)return f;break;case"minmax":default:if(b>=this)return e;if(this>=c)return f}return this>=a?this.linlin(a,c,d,f):this.linlin(b,a,e,d)}).defaults(f.ARITY_OPS.bilin).multiCall().build()),e.defineArityProperty(Number.prototype,"rrand",e(function(a){var b=this,c=a;return b+g()*(c-b)}).defaults(f.ARITY_OPS.rrand).multiCall().build()),e.defineArityProperty(Number.prototype,"exprand",e(function(a){var b=this,c=a;return 0===b?0:b*Math.exp(Math.log(c/b)*g())}).defaults(f.ARITY_OPS.exprand).multiCall().build());var i={"":[4,7],major:[4,7],minor:[3,7],major7:[4,7,11],dom7:[4,7,10],minor7:[3,7,10],aug:[4,8],dim:[3,6],dim7:[3,6,9],1:[],5:[7],"+5":[4,8],"m+5":[3,8],sus2:[2,7],sus4:[5,7],6:[4,7,9],m6:[3,7,9],"7sus2":[2,7,10],"7sus4":[5,7,10],"7-5":[4,6,10],"m7-5":[3,6,10],"7+5":[4,8,10],"m7+5":[3,8,10],9:[4,7,10,14],m9:[3,7,10,14],"m7+9":[3,7,10,14],maj9:[4,7,11,14],"9sus4":[5,7,10,14],"6*9":[4,7,9,14],"m6*9":[3,9,7,14],"7-9":[4,7,10,13],"m7-9":[3,7,10,13],"7-10":[4,7,10,15],"9+5":[10,13],"m9+5":[10,14],"7+5-9":[4,8,10,13],"m7+5-9":[3,8,10,13],11:[4,7,10,14,17],m11:[3,7,10,14,17],maj11:[4,7,11,14,17],"11+":[4,7,10,14,18],"m11+":[3,7,10,14,18],13:[4,7,10,14,17,21],m13:[3,7,10,14,17,21]};i.M=i.major,i.m=i.minor,i["7"]=i.dom7,i.M7=i.major7,i.m7=i.minor7,i.augmented=i.aug,i.a=i.aug,i.diminished=i.dim,i.i=i.dim,i.diminished7=i.dim7,i.i7=i.dim7;var j=function(a,b,c,d){var e,f,g=i[b]||[],h=[a];for(e=0,f=g.length;f>e;++e)h.push(a+g[e]);if(c>=0)for(c=Math.max(0,Math.min(+c,h.length-1));c--;)h.push(h.shift()+12);else for(c=Math.max(0,Math.min(-c,h.length-1));c--;)h.unshift(h.pop()-12);if(d>=0)if(d<h.length)h=h.slice(0,d);else for(d-=h.length,e=0,f=d;f>e;++e)h.push(h[e]+12);return h};e.defineProperty(Number.prototype,"chord",e(function(a,b,c){return j(this,a,b,c)}).defaults('name="",inversion=0,length=-1').multiCall().build()),e.defineProperty(Number.prototype,"chordcps",e(function(a,b,c){var d=this;return j(0,a,b,c).map(function(a){return d*Math.pow(2,1*a/12)})}).defaults('name="",inversion=0,length=-1').multiCall().build()),e.defineProperty(Number.prototype,"chordratio",e(function(a,b,c){var d=Math.pow(2,1*this/12);return j(0,a,b,c).map(function(a){return d*Math.pow(2,1*a/12)})}).defaults('name="",inversion=0,length=-1').multiCall().build()),function(){var a={C:0,D:2,E:4,F:5,G:7,A:9,B:11};Object.keys(a).forEach(function(b){for(var c=a[b],e=0;9>=e;++e)d.global[b+e]=c+12*e})}(),c.exports={}}),e("cc/lang/object",function(a,b,c){var d=a("./cc"),e=a("./fn");d.Object.prototype.__and__=function(a){return d.createTaskWaitLogic("and",[this].concat(a))},d.Object.prototype.__or__=function(a){return d.createTaskWaitLogic("or",[this].concat(a))},e.defineProperty(d.Object.prototype,"dup",e(function(a){for(var b=new Array(0|a),c=0,d=b.length;d>c;++c)b[c]=this;return b}).defaults("n=2").build()),c.exports={}}),e("cc/lang/pattern",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("../common/extend"),g=a("../common/ops"),h=a("./utils"),i=function(a){return null!==a&&void 0!==a},j=function(a){return a instanceof l?a.next():a},k=function(a){return a instanceof l?a:new t(h.asArray(a),1,0)},l=function(){function a(){this.klassName="Pattern",this._finished=!1}return f(a,d.Object),a.prototype.clone=function(){return this},a.prototype.next=function(){return null},a.prototype.nextN=function(a,b){for(var c=new Array(a),d=0;a>d;++d)c[d]=this.next(b);return c},a.prototype.reset=function(){return this},a.prototype.performWait=function(){return!this._finished},a.prototype.concat=function(a){return new t([this,a.clone()],1)},a.prototype["do"]=function(a){var b=0,c=!0;if(d.instanceOfSyncBlock(a))if(d.currentSyncBlockHandler)d.currentSyncBlockHandler.__sync__(a,d.createTaskArgumentsPattern(this));else for(;c;)c=this.next(),i(c)&&a.clone().perform([c,b++]);else for(;c;)c=this.next(),i(c)&&a.clone().perform([c,b++]);return this},["__plus__","__minus__"].concat(Object.keys(g.UNARY_OPS)).forEach(function(b){/^[a-z_][a-zA-Z0-9_]*$/.test(b)&&(a.prototype[b]=function(){return new m(this,b)})}),["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(g.BINARY_OPS)).forEach(function(b){/^[a-z_][a-zA-Z0-9_]*$/.test(b)&&(a.prototype[b]=function(a){return new n(this,b,a)})}),a}(),m=function(){function a(a,b){if(!Number.prototype.hasOwnProperty(b))throw new TypeError("Puop: operator '"+b+"' not supported");l.call(this),this.klassName="Puop",this._pattern=a,this._selector=b}return f(a,l),a.prototype.clone=function(){return new a(this._pattern.clone(),this._selector)},a.prototype.next=function(){if(!this._finished){var a=this._pattern.next();if(i(a))return a[this._selector].call(a);this._finished=!0}return null},a}(),n=function(){function a(a,b,c){if(!Number.prototype.hasOwnProperty(b))throw new TypeError("Pbop: operator '"+b+"' not supported");l.call(this),this.klassName="Pbop",this._pattern=a,this._selector=b,this._b=c}return f(a,l),a.prototype.clone=function(){return new a(this._pattern.clone(),this._selector)},a.prototype.next=function(){if(!this._finished){var a=this._pattern.next();if(i(a))return a[this._selector].call(a,this._b);this._finished=!0}return null},a}(),o=function(){function a(a,b,c){l.call(this),this.klassName="Pgeom",this._start=h.asNumber(a),this._grow=h.asNumber(b),this._length=h.asNumber(c),this._pos=0,this._value=this._start}return f(a,l),a.prototype.clone=function(){return new a(this._start,this._grow,this._length)},a.prototype.next=function(){if(this._pos<this._length){var a=this._value;return this._value*=this._grow,this._pos+=1,a}return this._pos=1/0,this._finished=!0,null},a.prototype.reset=function(){return this._pos=0,this._value=this._start,this._finished=!1,this},a}(),p=function(){function a(a,b,c){l.call(this),this.klassName="Pseries",this._start=h.asNumber(a),this._step=h.asNumber(b),this._length=h.asNumber(c),this._pos=0,this._value=this._start}return f(a,l),a.prototype.clone=function(){return new a(this._start,this._start,this._length)},a.prototype.next=function(){if(this._pos<this._length){var a=this._value;return this._value+=this._step,this._pos+=1,a}return this._pos=1/0,this._finished=!0,null},a.prototype.reset=function(){return this._pos=0,this._value=this._start,this._finished=!1,this},a}(),q=function(){function a(a,b,c){l.call(this),this.klassName="Pwhite",this._lo=h.asNumber(a),this._hi=h.asNumber(b),this._length=h.asNumber(c),this._pos=0}return f(a,l),a.prototype.clone=function(){return new a(this._lo,this._hi,this._length)},a.prototype.next=function(){return this._pos<this._length?(this._pos+=1,Math.random()*(this._hi-this._lo)+this._lo):(this._pos=1/0,this._finished=!0,null)},a}(),r=function(){function a(a,b,c){l.call(this),this.klassName="ListPattern",this.list=h.asArray(a),this.repeats=h.asNumber(b),this.offset=h.asNumber(c),this._pos=0,this._posMax=this.repeats,this._list=this.list}return f(a,l),a.prototype.clone=function(){return new this.constructor(this.list,this.repeats,this.offset)},a.prototype.next=function(){if(this._pos<this._posMax){var a=this._calcIndex(),b=this._list[a],c=j(b);return i(c)?(b instanceof l||(this._pos+=1),c):(b instanceof l&&b.reset(),this._pos+=1,this.next())}return this._pos=1/0,this._finished=!0,null},a.prototype.reset=function(){this._pos=0,this._finished=!1;for(var a=this.list,b=0,c=a.length;c>b;++b)a[b]instanceof l&&a[b].reset();return this},a}(),s=function(){function a(a,b,c){r.call(this,a,b,c),this.klassName="Pser"}return f(a,r),a.prototype._calcIndex=function(){return(this._pos+this.offset)%this.list.length},a}(),t=function(){function a(a,b,c){s.call(this,a,b,c),this.klassName="Pseq",this._posMax=this.repeats*this.list.length}return f(a,s),a}(),u=function(){function a(a,c){t.call(this,a,c,0),this.klassName="Pshuf",this._list=this.list.slice().sort(b)}f(a,t);var b=function(){return Math.random()-.5};return a}(),v=function(){function a(a,b){r.call(this,a,b,0),this.klassName="Prand"}return f(a,r),a.prototype._calcIndex=function(){return this.list.length*Math.random()|0},a}(),w=function(){function a(a,b){l.call(this),this._pattern=k(a),this._repeats=h.asNumber(b),this._i=0}return f(a,l),a.prototype.clone=function(){return new a(this._pattern.clone(),this._repeats)},a.prototype.next=function(){if(!this._finished){var a=this._pattern.next();if(i(a))return a;if(this._i+=1,this._i!==this._repeats)return this._pattern.reset(),this.next();this._finished=!0}return null},a.prototype.reset=function(){return this._finished=!1,this._i=0,this._pattern.reset(),this},a}(),x=function(){function a(a,b){l.call(this),this.klassName="Pfin",this._count=h.asNumber(a),this._pattern=k(b),this._pos=0}return f(a,l),a.prototype.clone=function(){return new a(this._count,this._pattern.clone())},a.prototype.next=function(){if(this._pos<this._count){var a=this._pattern.next();if(i(a))return this._pos+=1,a;this._pos=1/0,this._finished=!0}return null},a.prototype.reset=function(){return this._finished=!1,this._pos=0,this._pattern.reset(),this
},a}(),y=function(){function a(a,b){l.call(this),this.klassName="Pstutter",this._n=h.asNumber(a),this._pattern=k(b),this._i=a,this._val=null,0===this._n&&(this._finished=!0)}return f(a,l),a.prototype.clone=function(){return new a(this._n,this._p.clone())},a.prototype.next=function(){if(!this._finished){if(!(this._i>=this._n))return this._i+=1,this._val;var a=this._pattern.next();if(i(a))return this._val=a,this._i=1,a;this._finished=!0}return null},a.prototype.reset=function(){return this._i=this._n,this._pattern.reset(),0!==this._n&&(this._finished=!1),this},a}();d.global.Pgeom=e(function(a,b,c){return new o(a,b,c)}).defaults("start=0,grow=1,length=Infinity").build(),d.global.Pseries=e(function(a,b,c){return new p(a,b,c)}).defaults("start=0,step=1,length=Infinity").build(),d.global.Pwhite=e(function(a,b,c){return new q(a,b,c)}).defaults("lo=0,hi=1,length=Infinity").build(),d.global.Pser=e(function(a,b,c){return new s(a,b,c)}).defaults("list=[],repeats=1,offset=0").build(),d.global.Pseq=e(function(a,b,c){return new t(a,b,c)}).defaults("list,repeats=1,offset=0").build(),d.global.Pshuf=e(function(a,b){return new u(a,b)}).defaults("list=[],repeats=1").build(),d.global.Prand=e(function(a,b){return new v(a,b)}).defaults("list=[],repeats=1").build(),d.global.Pn=e(function(a,b){return new w(a,b)}).defaults("pattern=[],repeats=Infinity").build(),d.global.Pfin=e(function(a,b){return new x(a,b)}).defaults("count=1,pattern=[]").build(),d.global.Pstutter=e(function(a,b){return new y(a,b)}).defaults("n=1,pattern=[]").build(),c.exports={Pattern:l,Puop:m,Pbop:n,Pgeom:o,Pseries:p,Pwhite:q,ListPattern:r,Pser:s,Pseq:t,Pshuf:u,Prand:v,Pn:w,Pfin:x,Pstutter:y}}),e("cc/lang/scale",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("../common/extend"),g=function(a){return a.map(function(a){return Math.log(a)*Math.LOG2E*12})},h=function(a){for(var b=new Array(a),c=0;a>=c;++c)b[c]=c;return b},i=function(){function a(a,b,c){this.klassName="Tuning",this._tuning=a,this._octaveRatio=b,this.name=c}return f(a,d.Object),a.prototype.semitones=function(){return this._tuning.slice()},a.prototype.cents=function(){return this._tuning.map(function(a){return 100*a})},a.prototype.ratios=function(){return this._tuning.map(function(a){return Math.pow(2,1*a/12)})},a.prototype.at=e(function(a){return this._tuning[a]}).multiCall().build(),a.prototype.wrapAt=e(function(a){return a%=this._tuning.length,0>a&&(a=this._tuning.length+a),this._tuning[a]}).multiCall().build(),a.prototype.octaveRatio=function(){return this._octaveRatio},a.prototype.size=function(){return this._tuning.length},a.prototype.stepsPerOctave=function(){return Math.log(this._octaveRatio)*Math.LOG2E*12},a.prototype.tuning=function(){return this._tuning},a.prototype.equals=function(b){return b instanceof a&&this._octaveRatio===b._octaveRatio&&this._tuning.every(function(a,c){return a===b._tuning[c]},this)},a.prototype.copy=function(){return new a(this._tuning.slice(0),this._octaveRatio,this.name)},a}(),j={et12:[[0,1,2,3,4,5,6,7,8,9,10,11],2,"ET12"],pythagorean:[g([1,256/243,9/8,32/27,81/64,4/3,729/512,1.5,128/81,27/16,16/9,243/128]),2,"Pythagorean"],just:[g([1,16/15,9/8,1.2,5/4,4/3,45/32,1.5,1.6,5/3,1.8,15/8]),2,"Limit Just Intonation"],sept1:[g([1,16/15,9/8,1.2,5/4,4/3,1.4,1.5,1.6,5/3,1.8,15/8]),2,"Septimal Tritone Just Intonation"],sept2:[g([1,16/15,9/8,1.2,5/4,4/3,1.4,1.5,1.6,5/3,7/4,15/8]),2,"7-Limit Just Intonation"],mean4:[[0,.755,1.93,3.105,3.86,5.035,5.79,6.965,7.72,8.895,10.07,10.82],2,"Meantone, 1/4 Syntonic Comma"],mean5:[[0,.804,1.944,3.084,3.888,5.028,5.832,6.972,7.776,8.916,10.056,10.86],2,"Meantone, 1/5 Pythagorean Comma"],mean6:[[0,.86,1.96,3.06,3.92,5.02,5.88,6.98,7.84,8.94,10.04,10.9],2,"Meantone, 1/6 Pythagorean Comma"],kirnberger:[g([1,256/243,Math.sqrt(5)/2,32/27,5/4,4/3,45/32,Math.pow(5,.25),128/81,Math.pow(5,.75)/2,16/9,15/8]),2,"Kirnberger III"],werckmeister:[[0,.92,1.93,2.94,3.915,4.98,5.9,6.965,7.93,8.895,9.96,10.935],2,"Werckmeister III"],vallotti:[[0,.94135,1.9609,2.98045,3.9218,5.01955,5.9218,6.98045,7.9609,8.94135,10,10.90225],2,"Vallotti"],young:[[0,.9,1.96,2.94,3.92,4.98,5.88,6.98,7.92,8.94,9.96,10.9],2,"Young"],reinhard:[g([1,14/13,13/12,16/13,1.3,18/13,13/9,20/13,13/8,22/13,13/7,208/105]),2,"Mayumi Reinhard"],wcHarm:[g([1,17/16,9/8,19/16,5/4,21/16,11/8,1.5,13/8,27/16,7/4,15/8]),2,"Wendy Carlos Harmonic"],wcSJ:[g([1,17/16,9/8,1.2,5/4,4/3,11/8,1.5,13/8,5/3,7/4,15/8]),2,"Wendy Carlos Super Just"],lu:[g([1,2187/2048,9/8,19683/16384,81/64,177147/131072,729/612,1.5,6561/4096,27/16,59049/32768,243/128]),2,"Chinese Shi-er-lu scale"],et19:[h(18).map(function(a){return 12*a/19}),2,"ET19"],et22:[h(22).map(function(a){return 12*a/22}),2,"ET22"],et24:[h(24).map(function(a){return 12*a/24}),2,"ET24"],et31:[h(31).map(function(a){return 12*a/31}),2,"ET31"],et41:[h(41).map(function(a){return 12*a/41}),2,"ET41"],et53:[h(53).map(function(a){return 12*a/53}),2,"ET53"],johnston:[g([1,25/24,135/128,16/15,10/9,9/8,75/64,1.2,5/4,81/64,1.28,4/3,1.35,45/32,1.44,1.5,25/16,1.6,5/3,27/16,225/128,16/9,1.8,15/8,1.92]),2,"Ben Johnston"],partch:[g([1,81/80,33/32,1.05,16/15,12/11,1.1,10/9,9/8,8/7,7/6,32/27,1.2,11/9,5/4,14/11,9/7,21/16,4/3,1.35,11/8,1.4,10/7,16/11,40/27,1.5,32/21,14/9,11/7,1.6,18/11,5/3,27/16,12/7,7/4,16/9,1.8,20/11,11/6,15/8,40/21,64/33,160/81]),2,"Harry Partch"],catler:[g([1,33/32,16/15,9/8,8/7,7/6,1.2,128/105,16/13,5/4,21/16,4/3,11/8,45/32,16/11,1.5,1.6,13/8,5/3,27/16,7/4,16/9,24/13,15/8]),2,"Jon Catler"],chalmers:[g([1,1.05,16/15,9/8,7/6,1.2,5/4,21/16,4/3,1.4,35/24,1.5,1.575,1.6,5/3,7/4,1.8,28/15,63/32]),2,"John Chalmers"],harrison:[g([1,16/15,10/9,8/7,7/6,1.2,5/4,4/3,17/12,1.5,1.6,5/3,12/7,7/4,1.8,15/8]),2,"Lou Harrison"],sruti:[g([1,256/243,16/15,10/9,9/8,32/27,1.2,5/4,81/64,4/3,1.35,45/32,729/512,1.5,128/81,1.6,5/3,27/16,16/9,1.8,15/8,243/128]),2,"Sruti"],parret:[g([1,1.05,35/32,9/8,7/6,1.2,5/4,21/16,4/3,1.4,35/24,1.5,1.575,1.6,5/3,7/4,1.8,15/8,63/32]),2,"Wilfrid Perret"],michael_harrison:[g([1,28/27,135/128,16/15,243/224,9/8,8/7,7/6,32/27,1.2,135/112,5/4,81/64,9/7,21/16,4/3,112/81,45/32,64/45,81/56,1.5,32/21,14/9,128/81,1.6,224/135,5/3,27/16,12/7,7/4,16/9,15/8,243/128,27/14]),2,"Michael Harrison 24 tone 7-limit"],harmonic:[g(h(24).slice(1)),2,"Harmonic Series 24"],bp:[g(h(12).map(function(a){return 19.019550008654*a/13})),3,"Bohlen-Pierce"],wcAlpha:[h(14).map(function(a){return.78*a}),1.9656411970852,"Wendy Carlos Alpha"],wcBeta:[h(18).map(function(a){return.638*a}),2.0141437696805,"Wendy Carlos Beta"],wcGamma:[h(33).map(function(a){return.351*a}),1.9923898962606,"Wendy Carlos Gamma"]};d.global.Tuning=e(function(a,b,c){return Array.isArray(a)||(a=[0,1,2,3,4,5,6,7,8,9,10,11]),"number"!=typeof b&&(b=2),"string"!=typeof c&&(c="Unknown Tuning"),new i(a,b,c)}).defaults("tuning,octaveRatio,name").build();var k={};Object.keys(j).forEach(function(a){var b=j[a];k[a]=new i(b[0],b[1],b[2]),d.global.Tuning[a]=k[a]}),d.global.Tuning.at=function(a){var b=k[a];return b?b.copy():k.et12.copy()},d.global.Tuning.choose=e(function(a){"number"!=typeof a&&(a=12);for(var b,c=[],d=Object.keys(k),e=0,f=d.length;f>e;++e)b=k[d[e]],b._tuning.length===a&&c.push(b);return b=c[Math.random()*c.length|0],b?b.copy():k.et12.copy()}).multiCall().build(),d.global.Tuning.et=function(a){for(var b=new Array(a),c=0;a>c;++c)b[c]=c*(12/a);return new i(b,2,"ET"+a)},d.global.Tuning.names=function(){return Object.keys(k).sort()};var l=function(){function a(a,b,c,d){this.klassName="Scale",this._degrees=a,this._pitchesPerOctave=b,this.name=d,this.tuning(c)}f(a,d.Object),a.prototype.tuning=function(a){if(0===arguments.length)return this._tuning;if("string"==typeof a&&(a=k[a]),!(a instanceof i))throw new TypeError("Scale: arguments[2] should be a tuning.");if(this._pitchesPerOctave!==a.size())throw new TypeError("Scale steps per octave "+this._pitchesPerOctave+" does not match tuning size.");return this._tuning=a,a},a.prototype.semitones=function(){return this._degrees.map(function(a){return this._tuning.wrapAt(a)},this)},a.prototype.cents=function(){return this.semitones().map(function(a){return 100*a})},a.prototype.ratios=function(){return this.semitones().map(function(a){return Math.pow(2,1*a/12)})},a.prototype.size=function(){return this._degrees.length},a.prototype.pitchesPerOctave=function(){return this._pitchesPerOctave},a.prototype.stepsPerOctave=function(){return Math.log(this.octaveRatio())*Math.LOG2E*12},a.prototype.at=e(function(a){return a%=this._degrees.length,0>a&&(a=this._degrees.length+a),this._tuning.at(this._degrees[a])}).multiCall().build(),a.prototype.wrapAt=e(function(a){return a%=this._degrees.length,0>a&&(a=this._degrees.length+a),this._tuning.wrapAt(this._degrees[a])}).multiCall().build(),a.prototype.degreeToFreq=e(function(a,c,d){return b(this,a,d)*c}).defaults("degree=0,rootFreq=0,octave=0").multiCall().build(),a.prototype.degreeToRatio=e(function(a,c){return b(this,a,c)}).defaults("degree=0,octave=0").multiCall().build(),a.prototype.degrees=function(){return this._degrees},a.prototype.octaveRatio=function(){return this._tuning.octaveRatio()},a.prototype.equals=function(b){return b instanceof a&&this._degrees.every(function(a,c){return a===b._degrees[c]})&&this._tuning.equals(b._tuning)},a.prototype.copy=function(){return new a(this._degrees.slice(),this._pitchesPerOctave,this._tuning.copy(),this.name)};var b=function(a,b,c){var d=a.ratios(),e=b%d.length;return c+=b/a._degrees.length|0,0>e&&(e=d.length+e,c-=Math.ceil(e/d.length)),d[e]*Math.pow(a.octaveRatio(),c)};return a}(),m=function(a){var b,c=a[0]||0;for(b=a.length;b--;)c<a[b]&&(c=a[b]);var d=[53,24,19,12];for(b=d.length;b--;)if(c<d[b])return d[b];return 128},n={major:[[0,2,4,5,7,9,11],12,0,"Major"],minor:[[0,2,3,5,7,8,10],12,0,"Natural Minor"],minorPentatonic:[[0,3,5,7,10],12,0,"Minor Pentatonic"],majorPentatonic:[[0,2,4,7,9],12,0,"Major Pentatonic"],ritusen:[[0,2,5,7,9],12,0,"Ritusen"],egyptian:[[0,2,5,7,10],12,0,"Egyptian"],kumoi:[[0,2,3,7,9],12,0,"Kumoi"],hirajoshi:[[0,2,3,7,8],12,0,"Hirajoshi"],iwato:[[0,1,5,6,10],12,0,"Iwato"],ryukyu:[[0,4,5,7,11],12,0,"Ryukyu"],chinese:[[0,4,6,7,11],12,0,"Chinese"],indian:[[0,4,5,7,10],12,0,"Indian"],pelog:[[0,1,3,7,8],12,0,"Pelog"],prometheus:[[0,2,4,6,11],12,0,"Prometheus"],scriabin:[[0,1,4,7,9],12,0,"Scriabin"],gong:[[0,2,4,7,9],12,0,"Gong"],shang:[[0,2,5,7,10],12,0,"Shang"],jiao:[[0,3,5,8,10],12,0,"Jiao"],zhi:[[0,2,5,7,9],12,0,"Zhi"],yu:[[0,3,5,7,10],12,0,"Yu"],whole:[[0,2,4,6,8,10],12,0,"Whole Tone"],augmented:[[0,3,4,7,8,11],12,0,"Augmented"],augmented2:[[0,1,4,5,8,9],12,0,"Augmented 2"],partch_o1:[[0,8,14,20,25,34],43,"partch","Partch Otonality 1"],partch_o2:[[0,7,13,18,27,35],43,"partch","Partch Otonality 2"],partch_o3:[[0,6,12,21,29,36],43,"partch","Partch Otonality 3"],partch_o4:[[0,5,15,23,30,37],43,"partch","Partch Otonality 4"],partch_o5:[[0,10,18,25,31,38],43,"partch","Partch Otonality 5"],partch_o6:[[0,9,16,22,28,33],43,"partch","Partch Otonality 6"],partch_u1:[[0,9,18,23,29,35],43,"partch","Partch Utonality 1"],partch_u2:[[0,8,16,25,30,36],43,"partch","Partch Utonality 2"],partch_u3:[[0,7,14,22,31,37],43,"partch","Partch Utonality 3"],partch_u4:[[0,6,13,20,28,38],43,"partch","Partch Utonality 4"],partch_u5:[[0,5,12,18,25,33],43,"partch","Partch Utonality 5"],partch_u6:[[0,10,15,21,27,34],43,"partch","Partch Utonality 6"],hexMajor7:[[0,2,4,7,9,11],12,0,"Hex Major 7"],hexDorian:[[0,2,3,5,7,10],12,0,"Hex Dorian"],hexPhrygian:[[0,1,3,5,8,10],12,0,"Hex Phrygian"],hexSus:[[0,2,5,7,9,10],12,0,"Hex Sus"],hexMajor6:[[0,2,4,5,7,9],12,0,"Hex Major 6"],hexAeolian:[[0,3,5,7,8,10],12,0,"Hex Aeolian"],ionian:[[0,2,4,5,7,9,11],12,0,"Ionian"],dorian:[[0,2,3,5,7,9,10],12,0,"Dorian"],phrygian:[[0,1,3,5,7,8,10],12,0,"Phrygian"],lydian:[[0,2,4,6,7,9,11],12,0,"Lydian"],mixolydian:[[0,2,4,5,7,9,10],12,0,"Mixolydian"],aeolian:[[0,2,3,5,7,8,10],12,0,"Aeolian"],locrian:[[0,1,3,5,6,8,10],12,0,"Locrian"],harmonicMinor:[[0,2,3,5,7,8,11],12,0,"Harmonic Minor"],harmonicMajor:[[0,2,4,5,7,8,11],12,0,"Harmonic Major"],melodicMinor:[[0,2,3,5,7,9,11],12,0,"Melodic Minor"],melodicMinorDesc:[[0,2,3,5,7,8,10],12,0,"Melodic Minor Descending"],melodicMajor:[[0,2,4,5,7,8,10],12,0,"Melodic Major"],bartok:[[0,2,4,5,7,8,10],12,0,"Bartok"],hindu:[[0,2,4,5,7,8,10],12,0,"Hindu"],todi:[[0,1,3,6,7,8,11],12,0,"Todi"],purvi:[[0,1,4,6,7,8,11],12,0,"Purvi"],marva:[[0,1,4,6,7,9,11],12,0,"Marva"],bhairav:[[0,1,4,5,7,8,11],12,0,"Bhairav"],ahirbhairav:[[0,1,4,5,7,9,10],12,0,"Ahirbhairav"],superLocrian:[[0,1,3,4,6,8,10],12,0,"Super Locrian"],romanianMinor:[[0,2,3,6,7,9,10],12,0,"Romanian Minor"],hungarianMinor:[[0,2,3,6,7,8,11],12,0,"Hungarian Minor"],neapolitanMinor:[[0,1,3,5,7,8,11],12,0,"Neapolitan Minor"],enigmatic:[[0,1,4,6,8,10,11],12,0,"Enigmatic"],spanish:[[0,1,4,5,7,8,10],12,0,"Spanish"],leadingWhole:[[0,2,4,6,8,10,11],12,0,"Leading Whole Tone"],lydianMinor:[[0,2,4,6,7,8,10],12,0,"Lydian Minor"],neapolitanMajor:[[0,1,3,5,7,9,11],12,0,"Neapolitan Major"],locrianMajor:[[0,2,4,5,6,8,10],12,0,"Locrian Major"],diminished:[[0,1,3,4,6,7,9,10],12,0,"Diminished"],diminished2:[[0,2,3,5,6,8,9,11],12,0,"Diminished 2"],chromatic:[[0,1,2,3,4,5,6,7,8,9,10,11],12,0,"Chromatic"],chromatic24:[h(23),24,0,"Chromatic 24"],ajam:[[0,4,8,10,14,18,22],24,0,"Ajam"],jiharkah:[[0,4,8,10,14,18,21],24,0,"Jiharkah"],shawqAfza:[[0,4,8,10,14,16,22],24,0,"Shawq Afza"],sikah:[[0,3,7,11,14,17,21],24,0,"Sikah"],sikahDesc:[[0,3,7,11,13,17,21],24,0,"Sikah Descending"],huzam:[[0,3,7,9,15,17,21],24,0,"Huzam"],iraq:[[0,3,7,10,13,17,21],24,0,"Iraq"],bastanikar:[[0,3,7,10,13,15,21],24,0,"Bastanikar"],mustar:[[0,5,7,11,13,17,21],24,0,"Mustar"],bayati:[[0,3,6,10,14,16,20],24,0,"Bayati"],karjighar:[[0,3,6,10,12,18,20],24,0,"Karjighar"],husseini:[[0,3,6,10,14,17,21],24,0,"Husseini"],nahawand:[[0,4,6,10,14,16,22],24,0,"Nahawand"],nahawandDesc:[[0,4,6,10,14,16,20],24,0,"Nahawand Descending"],farahfaza:[[0,4,6,10,14,16,20],24,0,"Farahfaza"],murassah:[[0,4,6,10,12,18,20],24,0,"Murassah"],ushaqMashri:[[0,4,6,10,14,17,21],24,0,"Ushaq Mashri"],rast:[[0,4,7,10,14,18,21],24,0,"Rast"],rastDesc:[[0,4,7,10,14,18,20],24,0,"Rast Descending"],suznak:[[0,4,7,10,14,16,22],24,0,"Suznak"],nairuz:[[0,4,7,10,14,17,20],24,0,"Nairuz"],yakah:[[0,4,7,10,14,18,21],24,0,"Yakah"],yakahDesc:[[0,4,7,10,14,18,20],24,0,"Yakah Descending"],mahur:[[0,4,7,10,14,18,22],24,0,"Mahur"],hijaz:[[0,2,8,10,14,17,20],24,0,"Hijaz"],hijazDesc:[[0,2,8,10,14,16,20],24,0,"Hijaz Descending"],zanjaran:[[0,2,8,10,14,16,22],24,0,"Zanjaran"],saba:[[0,3,6,8,12,16,20],24,0,"Saba"],zamzam:[[0,2,6,8,14,16,20],24,0,"Zamzam"],kurd:[[0,2,6,10,14,16,20],24,0,"Kurd"],kijazKarKurd:[[0,2,8,10,14,16,22],24,0,"Kijaz Kar Kurd"],nawaAthar:[[0,4,6,12,14,16,22],24,0,"Nawa Athar"],nikriz:[[0,4,6,12,14,18,20],24,0,"Nikriz"],atharKurd:[[0,2,6,12,14,16,22],24,0,"Athar Kurd"]};d.global.Scale=e(function(a,b,c,d){return Array.isArray(a)||(a=[0,2,4,5,7,9,11]),"number"!=typeof b&&(b=m(a)),"string"==typeof c&&(c=k[c]),c instanceof i||(c=k.et12),"string"!=typeof d&&(d="Unknown Scale"),new l(a,b,c,d)}).defaults("degrees,pitchesPerOctave,tuning,name").build();var o={};Object.keys(n).forEach(function(a){var b=n[a];b[2]=b[2]?k[b[2]].copy():d.global.Tuning.et(b[1]),o[a]=new l(b[0],b[1],b[2],b[3]),d.global.Scale[a]=o[a]}),d.global.Scale.at=function(a,b){var c=o[a];return c=c?c.copy():o.major.copy(),b&&c.tuning(b),c},d.global.Scale.choose=e(function(a,b){"number"!=typeof a&&(a=7),"number"!=typeof b&&(b=12);for(var c,d=[],e=Object.keys(o),f=0,g=e.length;g>f;++f)c=o[e[f]],c._degrees.length===a&&c._pitchesPerOctave===b&&d.push(c);return c=d[Math.random()*d.length|0],c?c.copy():o.major.copy()}).multiCall().build(),d.global.Scale.names=function(){return Object.keys(o).sort()},c.exports={Scale:l,Tuning:i}}),e("cc/lang/string",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("./utils"),g=a("../common/ops"),h=a("../common/numericstring"),i=h.timevalue,j=h.notevalue,k=[].slice,l=function(a){return a=+a,isNaN(a)?0:a};e.defineProperty(String.prototype,"copy",function(){return this}),e.defineProperty(String.prototype,"dup",e(function(a){for(var b=new Array(0|a),c=0,d=b.length;d>c;++c)b[c]=this;return b}).defaults(g.COMMONS.dup).build()),e.defineProperty(String.prototype,"do",function(){throw"not implemented"}),e.defineProperty(String.prototype,"wait",function(){return this}),e.defineProperty(String.prototype,"asUGenInput",function(){return this}),["__plus__","__minus__"].concat(Object.keys(g.UNARY_OPS)).forEach(function(a){e.defineProperty(String.prototype,a,function(){return l(this)[a]()})}),["__sub__"].concat(Object.keys(g.BINARY_OPS)).forEach(function(a){e.defineProperty(String.prototype,a,function(b){return l(this)[a](b)})}),e.defineBinaryProperty(String.prototype,"__add__",function(a){return this+a.toString()});var m=function(){var a=function(b,c){if(1>c)return"";if(c%2)return a(b,c-1)+b;var d=a(b,c>>1);return d+d};return function(b,c){if(1/0===c)throw new RangeError;return a(b,0|c)}}();e.defineBinaryProperty(String.prototype,"__mul__",function(a){return"number"==typeof a?m(this,a):0}),e.defineBinaryProperty(String.prototype,"__div__",function(a){return"number"==typeof a?f.clump(this.split(""),Math.ceil(this.length/a)).map(function(a){return a.join("")}):0}),e.defineBinaryProperty(String.prototype,"__mod__",function(a){return"number"==typeof a?f.clump(this.split(""),Math.floor(a)).map(function(a){return a.join("")}):0}),e.defineBinaryProperty(String.prototype,"__and__",function(a){return d.createTaskWaitLogic("and",[this].concat(a))}),e.defineBinaryProperty(String.prototype,"__or__",function(a){return d.createTaskWaitLogic("or",[this].concat(a))}),Object.keys(g.ARITY_OPS).forEach(function(a){e.defineProperty(String.prototype,a,e(function(){var b=k.call(arguments);return 0[a].apply(l(this),b)}).defaults(g.ARITY_OPS[a]).multiCall().build())}),e.defineProperty(String.prototype,"time",function(){var a=i(this);return"string"==typeof a?0:a}),e.defineProperty(String.prototype,"note",function(){var a=j(this);return"string"==typeof a?0:a}),c.exports={}}),e("cc/lang/syncblock",function(a,b,c){var d=a("./cc"),e=a("../common/extend"),f=[].slice,g=function(){function a(b){this.klassName="SyncBlock",this._segments=b instanceof a?b._segments:"function"==typeof b?b():[],this._state=this._segments.length?1:2,this._pc=0,this._paused=!1,this._child=null}return e(a,d.Object),a.prototype.clone=function(){return new a(this)},a.prototype.reset=function(){this._state=this._segments.length?1:2,this._pc=0},a.prototype.perform=function(){var b,c=this._segments,e=this._pc,g=c.length,h=f.call(arguments);if(this._child){if(this.perform.apply(this._child,h),1===this._child._state)return;this._child=null}for(d.currentSyncBlock=this,this._paused=!1;g>e&&(b=c[e++].apply(null,h),!this._paused);)if(b instanceof a){this._child=b;break}e>=g&&!this._paused&&(this._state=2),this._paused=!1,d.currentSyncBlock=null,this._pc=e},a.prototype.performWait=function(){return 1===this._state},a.prototype.performWaitState=a.prototype.performWait,a}();d.global.syncblock=function(a){return new g(a)},d.instanceOfSyncBlock=function(a){return a instanceof g},d.pauseSyncBlock=function(){d.currentSyncBlock&&(d.currentSyncBlock._paused=!0)},c.exports={SyncBlock:g}}),e("cc/lang/synthdef",function(a,b,c){var d=a("./cc"),e=a("./utils"),f=a("../common/extend"),g=[].push,h=0,i=function(){function a(a){this.klassName="SynthDef",this.name=a,this._sent=!1,this._defId=h++,this._children=[],this._args=[],this.specs={}}return f(a,d.Object),a.prototype.send=function(){if(!this._sent){var a=this.specs.consts;a[0]===-1/0&&(a[0]="-Infinity"),1/0===a[a.length-1]&&(a[a.length-1]="Infinity"),d.lang.pushToTimeline(["/s_def",this._defId,JSON.stringify(this.specs)]),this._sent=!0}return this},a.prototype.play=function(){this.send();var a=j.apply(null,arguments),b=a[0],c=a[1],e=a[2];switch(e){case"addToHead":return d.global.Synth(this,c,b,0);case"addToTail":return d.global.Synth(this,c,b,1);case"addBefore":return d.global.Synth(this,c,b,2);case"addAfter":return d.global.Synth(this,c,b,3);default:return d.global.Synth(this,c,b,0)}},a}(),j=function(){var a,b,c,f=0;return a=d.instanceOfNode(arguments[f])?arguments[f++]:d.lang.rootNode,e.isDict(arguments[f])&&(b=arguments[f++]),c="string"==typeof arguments[f]?arguments[f]:"addToHead",b&&1===arguments.length&&(d.instanceOfNode(b.target)&&(a=b.target,delete b.target),"string"==typeof b.addAction&&(c=b.addAction,delete b.addAction)),[a,b,c]},k=function(a,b,c,e,f,g){try{l(a),m(a,b,c,e,f),n(a,g),a.func=b}finally{d.setSynthDef(null)}},l=function(a){var b=a._children=[];d.setSynthDef(function(a){b.push(a)}),a._args=[]},m=function(a,b,c,d,e){var f=p(c,d,e.length);return g.apply(a._args,f),c=e.concat(z(f)),b.apply(null,c)},n=function(a){d.setSynthDef(null),a.specs=E(a.name,a._args,a._children)},o=function(a){return"Infinity"===a?1/0:"-Infinity"===a?-1/0:JSON.parse(a)},p=function(a,b,c){if(0===a.length)return[];var d=q(a),e=d.keys.slice(c),f=d.vals.slice(c).map(o);return s(f),x(e,f,b)},q=function(a){var b=[],c=[];if(a&&a.length)for(var d=0,e=a.length;e>d;d+=2)b.push(a[d+0]),c.push(a[d+1]);return{keys:b,vals:c}},r=function(a){return"number"==typeof a&&!isNaN(a)},s=function(a){for(var b=0,c=a.length;c>b;++b){var d=a[b];if(null!==d&&void 0!==d&&!(r(d)||Array.isArray(d)&&d.every(r)))throw"bad arguments"}return!0},t=0,u=1,v=2,w=3,x=function(a,b,c){for(var d=[],f=0,g=a.length;g>f;++f){var h=a[f],i=b[f],j=c[f],k=h.substr(0,2);d[f]={index:f,name:h,value:i,lag:0},"ir"===j||"i_"===k?d[f].type=t:"tr"===j||"trig"===h||"t_"===k?d[f].type=u:"ar"===j||"a_"===k?d[f].type=w:(j=e.asNumber(j),d[f].type=v,d[f].lag=j)}return d},y=function(a){return a.value},z=function(a){var b,c,f,g,h=new Array(a.length),i=[],j=i[t]=[],k=i[u]=[],l=i[w]=[],m=i[v]=[];a.forEach(function(a){i[a.type].push(a)});var n=function(a,b){h[a.index]=g[b]};return j.length&&(b=j.map(y),g=d.createControl(0).init(e.flatten(b)),g=A(b,e.asArray(g)),j.forEach(n)),k.length&&(b=k.map(y),g=d.createTrigControl().init(e.flatten(b)),g=A(b,e.asArray(g)),k.forEach(n)),l.length&&(b=l.map(y),g=d.createAudioControl().init(e.flatten(b)),g=A(b,e.asArray(g)),l.forEach(n)),m.length&&(b=[],c=[],f=!1,m.forEach(function(a){b.push(a.value),e.asArray(a.value).forEach(function(){c.push(a.lag)}),0!==a.lag&&(f=!0)}),g=f?d.createLagControl().init(e.flatten(b),c):d.createControl(1).init(e.flatten(b)),g=A(b,e.asArray(g)),m.forEach(n)),h},A=function(a,b){for(var c=[],d=b.slice(),e=0,f=a.length;f>e;++e)Array.isArray(a[e])?c.push(d.splice(0,a[e].length)):c.push(d.shift());return c},B=function(a,b){return a.type-b.type||a.index-b.index},C=function(a){return!("number"==typeof a||d.instanceOfOutputProxy(a))},D=function(a){return a.rate},E=function(a,b,c){var e=b.slice().sort(B),f={},h=0,i=f.values=[],j=f.names=[],k=f.indices=[],l=f.length=[];e.forEach(function(a){a.sortedIndex=h,Array.isArray(a.value)?(g.apply(i,a.value),a.length=a.value.length):(i.push(a.value),a.length=1),h+=a.length}),b.forEach(function(a){j.push(a.name),k.push(a.sortedIndex),l.push(a.length)});var m=[];c.forEach(function(a){a.inputs.forEach(function(a){"number"==typeof a&&-1===m.indexOf(a)&&m.push(a)})}),m.sort();var n=0;c.forEach(function(a){d.instanceOfControlUGen(a)&&(a.specialIndex=n,n+=a.channels.length)});var o=F(c).filter(C),p=o.map(function(a){var b=[];a.inputs.forEach(function(a){var c=o.indexOf(d.instanceOfOutputProxy(a)?a.inputs[0]:a),e=-1!==c?a.outputIndex:m.indexOf(a);b.push(c,e)});var c=[];return a.channels?c=a.channels.map(D):1===a.numOfOutputs&&(c=[a.rate]),[a.klassName,a.rate,0|a.specialIndex,b,c]});return{name:a,consts:m,params:f,defList:p,variants:{}}},F=function(){var a=function(b,c,d,e){if(e.indexOf(b)!==e.length-1)throw new Error("UGen graph contains recursion.");d.push(b);var f=c.indexOf(b);-1!==f&&c.splice(f,1),c.unshift(b),b.inputs&&b.inputs.forEach(function(b){e.push(b),a(b,c,d,e),e.pop()})};return function(b){var c,e=[];return b.slice().forEach(function(f){d.instanceOfOut(f)&&(e.push(f),c=[f],f.inputs.forEach(function(d){c.push(d),a(d,b,e,c),c.pop()}))}),b=b.filter(function(a){return-1!==e.indexOf(a)})}}();d.global.SynthDef=function(){var a,b,c,d,f,g,h=0;if(a="string"==typeof arguments[h]?arguments[h++]:"synth","function"!=typeof arguments[h])throw new Error("SynthDef requires build function");b=arguments[h++],c=e.asArray(arguments[h++]),d=e.asArray(arguments[h++]),f=e.asArray(arguments[h++]),g={};var j=new i(a,b,c,d,f,g);return k(j,b,c,d,f,g),j},d.instanceOfSynthDef=function(a){return a instanceof i},c.exports={SynthDef:i,build:k,initBuild:l,buildUGenGraph:m,finishBuild:n,args2keyValues:q,args2controls:p,checkValidArgs:s,keyValueRates2args:x,controls2args:z,asJSON:E,reshape:A,topoSort:F}}),e("cc/lang/task",function(a,b,c){var d=a("./cc"),e=a("../common/extend"),f=function(a){return null===a||void 0===a?null:a.valueOf()},g=function(){function a(){this.klassName="TaskManager",this.tasks=[],this.counterIncr=0}return a.prototype.start=function(a){this.counterIncr=Math.max(1,a)},a.prototype.stop=function(){this.counterIncr=0},a.prototype.reset=function(){this.tasks.splice(0)},a.prototype.append=function(a){var b=this.tasks.indexOf(a);-1===b&&this.tasks.push(a)},a.prototype.remove=function(a){var b=this.tasks.indexOf(a);-1!==b&&this.tasks.splice(b,1)},a.prototype.process=function(){var a=this.counterIncr;if(a){for(var b=this.tasks,c=0;c<b.length;++c)b[c].performWait(a);this.tasks=b.filter(function(a){return 1===a._state})}},a}(),h=function(){function a(a,b){this.klassName="Task",d.instanceOfSyncBlock(a)?(this._func=a,this._state=0):(this._func=null,this._state=2),this._iter=b,this._wait=null,this._args=f(b)}return e(a,d.Object),a.prototype.start=function(){return this.reset(),d.taskManager&&d.taskManager.append(this),this._state=1,this},a.prototype.resume=function(){return d.taskManager&&d.taskManager.append(this),this._state=1,this},a.prototype.pause=function(){return d.taskManager&&d.taskManager.remove(this),this._state=0,this},a.prototype.stop=function(){return d.taskManager&&d.taskManager.remove(this),this._state=0,this},a.prototype.reset=function(){return this._func?(this._func.reset(),this._state=0):this._state=2,this._iter&&this._iter.reset(),this._wait=null,this._args=f(this._iter),this},a.prototype.wait=function(){return d.currentTask&&d.currentTask!==this&&d.currentTask.__wait__(this),this},a.prototype.__sync__=function(b,c){return this.__wait__(new a(b,c))},a.prototype.__wait__=function(b){if(this._wait)throw new Error("Task#append: wait already exists???");return this._wait=d.createTaskWaitToken(b),b instanceof a&&(b._state=1),d.pauseSyncBlock(),this},a.prototype.performWait=function(a){var b=d.currentSyncBlockHandler,c=d.currentTask,e=this._func,f=this._iter;for(d.currentSyncBlockHandler=this,d.currentTask=this;;){if(this._wait){if(this._wait.performWait(a))break;this._wait=null}if(a=0,e.perform.apply(e,this._args),!this._wait&&!e.performWaitState()){if(!f||(this._args=f.next(),!f.performWaitState())){this._state=2;break}e.reset()}}return d.currentSyncBlockHandler=b,d.currentTask=c,1===this._state},a.prototype.performWaitState=function(){return 1===this._state},a}(),i=function(){function a(){this.klassName="TaskArguments",this._args=[0,0],this._state=1}return a.prototype.next=function(){return 2===this._state?null:(this._state=2,this._args)},a.prototype.reset=function(){return this._state=1,this},a.prototype.valueOf=function(){return this._args},a.prototype.performWait=function(){return 1===this._state},a.prototype.performWaitState=function(){return 1===this._state},a}(),j=function(){function a(a,b,c){i.call(this),this.klassName="TaskArgumentsNumber",this.start=a,this.end=b,this.step=c,this.index=0,this.reset()}return e(a,i),a.prototype.next=function(){if(2===this._state)return null;var a=this._args[0]+this.step;return this.step>=0?a<=this.end?(this._args[0]=a,this._args[1]=++this.index):this._state=2:a>=this.end?(this._args[0]=a,this._args[1]=++this.index):this._state=2,2===this._state?null:this._args},i.prototype.reset=function(){return this.index=0,this._args=[this.start,this.index],this._state=1,this},a}(),k=function(){function a(a,b){i.call(this),this.klassName="TaskArgumentsArray",this.list=a,this.reversed=b,this.reset()}return e(a,i),a.prototype.next=function(){return 2===this._state?null:(this.reversed?(this.index-=1,0<=this.index?this._args=[this.list[this.index],this.index]:this._state=2):(this.index+=1,this.index<this.list.length?this._args=[this.list[this.index],this.index]:this._state=2),2===this._state?null:this._args)},a.prototype.reset=function(){return this.index=this.reversed?Math.max(0,this.list.length-1):0,this._args=[this.list[this.index],this.index],this._state=1,this},a}(),l=function(){function a(a){i.call(this),this.klassName="TaskArgumentsFunction",this.func=a,this.index=0,this.reset()}return e(a,i),a.prototype.next=function(){if(2===this._state)return null;var a=this.func();return a||0===a?(this._args[0]=a,this._args[1]=++this.index):this._state=2,2===this._state?null:this._args},a.prototype.reset=function(){return this._state=1,this.uninitialized=!0,this},a.prototype.valueOf=function(){return this.index=0,this.uninitialized&&(this.uninitialized=!1,this._args=[this.func(),this.index]),this._args},a}(),m=function(){function a(a){i.call(this),this.klassName="TaskArgumentsPattern",this.pattern=a,this.reset()}return e(a,i),a.prototype.next=function(){if(2===this._state)return null;var a=this.pattern.next();return null!==a&&void 0!==a?this._args=[a,this.index++]:this._state=2,2===this._state?null:this._args},a.prototype.reset=function(){return this.index=0,this._args=[this.pattern.reset().next(),this.index++],this._state=1,this},a}(),n=function(){function a(){this.klassName="TaskWaitToken",this._state=1}return a.prototype.performWait=function(){return 1===this._state},a.prototype.performWaitState=function(){return 1===this._state},a}(),o=function(){function a(a){n.call(this),this.klassName="TaskWaitTokenNumber",this.token=1e3*a}return e(a,n),a.prototype.performWait=function(a){return 1===this._state&&(this.token-=a,this.token<=0&&(this._state=2)),1===this._state},a}(),p=function(){function a(a){n.call(this),this.klassName="TaskWaitTokenLogicAND",this.token=a.map(d.createTaskWaitToken)}return e(a,n),a.prototype.performWait=function(a){return 1===this._state&&(this.token=this.token.filter(function(b){return b.performWait(a)}),0===this.token.length&&(this._state=2)),1===this._state},a}(),q=function(){function a(a){n.call(this),this.klassName="TaskWaitTokenLogicOR",this.token=a.map(d.createTaskWaitToken)}return e(a,n),a.prototype.performWait=function(a){if(1===this._state)for(var b=this.token,c=0,d=b.length;d>c;++c)if(!b[c].performWait(a)){this._state=2,this.token.splice(0);break}return 1===this._state},a}(),r=function(){function a(a){n.call(this),this.klassName="TaskWaitTokenFunction",this.token=a}return e(a,n),a.prototype.performWait=function(){if(1===this._state){var a=this.token();a&&(this._state=2)}return 1===this._state},a}(),s=function(){function a(a){n.call(this),this.klassName="TaskWaitTokenBoolean",this.token=a,this._state=a?1:2}return e(a,n),a}(),t=function(){function a(a){n.call(this),this.klassName="TaskWaitTokenDate",this.token=+a}return e(a,n),a.prototype.performWait=function(){return 1===this._state&&Date.now()>this.token&&(this._state=2),1===this._state},a}();d.global.Task=function(a){return new h(a)},d.createTaskManager=function(){return d.taskManager=new g,d.taskManager},d.instanceOfTaskManager=function(a){return a instanceof g},d.createTask=function(a,b){return new h(a,b)},d.instanceOfTask=function(a){return a instanceof h},d.instanceOfTaskArguments=function(a){return a instanceof i},d.createTaskArgumentsNumber=function(a,b,c){return new j(a,b,c)},d.createTaskArgumentsArray=function(a,b){return new k(a,!!b)},d.createTaskArgumentsFunction=function(a){return new l(a)},d.createTaskArgumentsBoolean=function(a){return new k([a])},d.createTaskArgumentsPattern=function(a){return new m(a)},d.createTaskWaitToken=function(a,b){if(a&&"function"==typeof a.performWait)return a;switch(typeof a){case"number":return new o(a);case"function":return new r(a);
case"boolean":return new s(a)}return Array.isArray(a)?d.createTaskWaitTokenArray(a,b):a instanceof Date?new t(a):new s(!1)},d.instanceOfTaskWaitToken=function(a){return a instanceof n},d.createTaskWaitTokenNumber=function(a){return new o(a)},d.createTaskWaitTokenArray=function(a,b){return"or"===b?new q(a):new p(a)},d.createTaskWaitTokenFunction=function(a){return new r(a)},d.createTaskWaitTokenBoolean=function(a){return new s(a)},d.createTaskWaitTokenDate=function(a){return new t(a)},c.exports={TaskManager:g,Task:h,TaskArguments:i,TaskArgumentsNumber:j,TaskArgumentsArray:k,TaskArgumentsFunction:l,TaskWaitToken:n,TaskWaitTokenNumber:o,TaskWaitTokenLogicAND:p,TaskWaitTokenLogicOR:q,TaskWaitTokenFunction:r,TaskWaitTokenBoolean:s,TaskWaitTokenDate:t}}),e("cc/lang/ugen",function(a,b,c){var d=a("./cc"),e=a("./fn"),f=a("./utils"),g=a("../common/extend"),h=a("../common/ops"),i=[].slice,j=null,k={},l=function(a){return function(b){return Array.isArray(b)?b[a%b.length]:b}},m=function(a){return["scalar","control","audio","demand"][a]||"scalar"};d.ugen.checkNInputs=function(a){if(2===this.rate)for(var b=0;a>b;++b)if(2!==this.inputs[b].rate){var c=f.asString(this.inputs[b])+" "+m(this.inputs[b].rate);throw new Error("input["+b+"] is not AUDIO rate: "+c)}},d.ugen.checkSameRateAsFirstInput=function(){if(this.rate!==this.inputs[0].rate){var a=f.asString(this.inputs[0])+" "+m(this.inputs[0].rate);throw new Error("first input is not "+m(this.rate)+" rate: "+a)}};var n=function(){function a(a,b){b=b||{},this.klassName=a,this.rate=2,this.signalRange=b.signalRange||2,this.specialIndex=0,this.outputIndex=0,this.numOfInputs=0,this.numOfOutputs=1,this.inputs=[]}return g(a,d.Object),a.multiNew=function(){return this.multiNewList(i.call(arguments))},a.multiNewList=function(b){var c,d,e=this,g=0;for(b=f.asUGenInput(b),c=0,d=b.length;d>c;++c)Array.isArray(b[c])&&g<b[c].length&&(g=b[c].length);if(0===g)return a.prototype.init.apply(new e(k.name,k),b);var h=new Array(g);for(c=0;g>c;++c)h[c]=this.multiNewList(b.map(l(c)));return h},a.prototype.init=function(a){return this.rate=a,j&&j(this),this.inputs=i.call(arguments,1),this.numOfInputs=this.inputs.length,this},a.prototype.copy=function(){return this},a.prototype.dup=e(function(a){for(var b=new Array(0|a),c=0,d=b.length;d>c;++c)b[c]=this;return b}).defaults(h.COMMONS.dup).build(),a.prototype["do"]=function(){return this},a.prototype.wait=function(){return this},a.prototype.asUGenInput=function(){return this},a.prototype.toString=function(){return this.klassName},["__plus__","__minus__"].concat(Object.keys(h.UNARY_OPS)).forEach(function(b){var c;c=h.ALIASES.hasOwnProperty(b)?h.ALIASES[b]:b,/^[a-z_][a-zA-Z0-9_]*$/.test(b)&&(a.prototype[b]=function(){return d.createUnaryOpUGen(c,this)})}),["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(h.BINARY_OPS)).forEach(function(b){var c;c=h.ALIASES.hasOwnProperty(b)?h.ALIASES[b]:b,/^[a-z_][a-zA-Z0-9_]*$/.test(b)&&e.defineBinaryProperty(a.prototype,b,function(a){return d.createBinaryOpUGen(c,this,a)})}),a.prototype.__and__=function(){return 0},a.prototype.__or__=function(){return 0},a.prototype.madd=e(function(a,b){return d.createMulAdd(this,a,b)}).defaults(h.ARITY_OPS.madd).build(),a.prototype.range=e(function(a,b){var c,e;return 2===this.signalRange?(c=b.__sub__(a).__mul__(.5),e=c.__add__(a)):(c=b.__sub__(a),e=a),d.createMulAdd(this,c,e)}).defaults(h.ARITY_OPS.range).build(),a.prototype.exprange=e(function(a,b){return 2===this.signalRange?this.linexp(-1,1,a,b):this.linexp(0,1,a,b)}).defaults(h.ARITY_OPS.exprange).multiCall().build(),a.prototype.curverange=e(function(a,b,c){return 2===this.signalRange?this.lincurve(-1,1,a,b,c):this.lincurve(0,1,a,b,c)}).defaults(h.ARITY_OPS.curverange).multiCall().build(),a.prototype.unipolar=e(function(a){return this.range(0,a)}).defaults(h.ARITY_OPS.unipolar).multiCall().build(),a.prototype.bipolar=e(function(a){return this.range(a.neg(),a)}).defaults(h.ARITY_OPS.bipolar).multiCall().build(),a.prototype.clip=e(function(a,b){return d.global.Clip(this.rate,this,a,b)}).defaults(h.ARITY_OPS.clip).multiCall().build(),a.prototype.fold=e(function(a,b){return d.global.Fold(this.rate,this,a,b)}).defaults(h.ARITY_OPS.fold).multiCall().build(),a.prototype.wrap=e(function(a,b){return d.global.Wrap(this.rate,this,a,b)}).defaults(h.ARITY_OPS.wrap).multiCall().build(),a.prototype.blend=e(function(a,b){var c=b.linlin(0,1,-1,1);return 2===this.rate?d.global.XFade2(2,this,a,c):2===a.rate?d.global.XFade2(2,a,this,c.neg()):d.global.LinXFade2(this.rate,this,a,c)}).defaults(h.ARITY_OPS.blend).multiCall().build(),a.prototype.lag=e(function(a,b){return"undefined"==typeof b?d.global.Lag(this.rate,this,a):d.global.LagUD(this.rate,this,a,b)}).defaults(h.ARITY_OPS.lag).multiCall().build(),a.prototype.lag2=e(function(a,b){return"undefined"==typeof b?d.global.Lag2(this.rate,this,a):d.global.Lag2UD(this.rate,this,a,b)}).defaults(h.ARITY_OPS.lag2).multiCall().build(),a.prototype.lag3=e(function(a,b){return"undefined"==typeof b?d.global.Lag3(this.rate,this,a):d.global.Lag3UD(this.rate,this,a,b)}).defaults(h.ARITY_OPS.lag3).multiCall().build(),a.prototype.lagud=e(function(a,b){return d.global.LagUD(this.rate,this,a,b)}).defaults(h.ARITY_OPS.lagud).multiCall().build(),a.prototype.lag2ud=e(function(a,b){return d.global.Lag2UD(this.rate,this,a,b)}).defaults(h.ARITY_OPS.lag2ud).multiCall().build(),a.prototype.lag3ud=e(function(a,b){return d.global.Lag3UD(this.rate,this,a,b)}).defaults(h.ARITY_OPS.lag3ud).multiCall().build(),a.prototype.varlag=e(function(a,b,c,e){return d.global.VarLag(this.rate,this,a,b,c,e)}).defaults(h.ARITY_OPS.varlag).multiCall().build(),a.prototype.slew=e(function(a,b){return d.global.Slew(this.rate,this,a,b)}).defaults(h.ARITY_OPS.slew).multiCall().build(),a.prototype.prune=function(a,b,c){switch(c){case"minmax":return this.clip(a,b);case"min":return this.max(a);case"max":return this.min(b)}return this},a.prototype.linlin=e(function(a,b,c,e,f){return d.global.LinLin(this.rate,this.prune(a,b,f),a,b,c,e)}).defaults(h.ARITY_OPS.linlin).multiCall().build(),a.prototype.linexp=e(function(a,b,c,e,f){return d.global.LinExp(this.rate,this.prune(a,b,f),a,b,c,e)}).defaults(h.ARITY_OPS.linexp).multiCall().build(),a.prototype.explin=e(function(a,b,c,e,f){return d.global.ExpLin(this.rate,this.prune(a,b,f),a,b,c,e)}).defaults(h.ARITY_OPS.explin).multiCall().build(),a.prototype.expexp=e(function(a,b,c,e,f){return d.global.ExpExp(this.rate,this.prune(a,b,f),a,b,c,e)}).defaults(h.ARITY_OPS.expexp).multiCall().build(),a.prototype.lincurve=e(function(a,b,c,d,e,f){if("number"==typeof e&&Math.abs(e)<.25)return this.linlin(a,b,c,d,f);var g=e.exp(),h=d.__sub__(c).__div__(1..__sub__(g)),i=c.__add__(h),j=this.prune(a,b,f).__sub__(a).__div__(b.__sub__(a));return i.__sub__(h.__mul__(g.pow(j)))}).defaults(h.ARITY_OPS.lincurve).multiCall().build(),a.prototype.curvelin=e(function(a,b,c,d,e,f){if("number"==typeof e&&Math.abs(e)<.25)return this.linlin(a,b,c,d,f);var g=e.exp(),h=d.__sub__(c).__div__(1..__sub__(g)),i=c.__add__(h),j=this.prune(a,b,f).__sub__(a).__div__(b.__sub__(a));return i.__sub__(j).__div__(h).log().__div__(e)}).defaults(h.ARITY_OPS.curvelin).multiCall().build(),a.prototype.bilin=e(function(a,b,c,e,f,g,h){return d.global.Select(this.rate,this.lt(a),[this.linlin(a,c,e,g,h),this.linlin(b,a,f,e,h)])}).defaults(h.ARITY_OPS.bilin).build(),a.prototype.rrand=e(function(){return 0}).defaults(h.ARITY_OPS.rrand).build(),a.prototype.exprand=e(function(){return 0}).defaults(h.ARITY_OPS.exprand).build(),a}(),o=function(){function a(a){n.call(this,a||"MultiOutUGen"),this.channels=null}return g(a,n),a.prototype.initOutputs=function(a,b){for(var c=new Array(a),d=0;a>d;++d)c[d]=new p(b,this,d);return this.channels=c,this.numOfOutputs=c.length,1===a?c[0]:c},a}(),p=function(){function a(a,b,c){n.call(this,"OutputProxy"),this.init(a),this.inputs=[b],this.numOfOutputs=1,this.outputIndex=c}return g(a,n),a}(),q=function(){function a(){d.UGen.call(this,"Out")}return g(a,n),a}(),r=function(a,b){return Array.isArray(a)?a.map(function(a){return r(a,b)}):a instanceof n&&(b.checkInputs&&b.checkInputs.call(a),b.init)?b.init.apply(a,a.inputs):a},s=function(a,b){var c,f=b.Klass||n,g={checkInputs:b.checkInputs,signalRange:b.signalRange||2,init:b.init};c=b.$new?function(){return d.global[a]["new"].apply(null,i.call(arguments))}:function(b){"number"==typeof b&&(b=["ir","kr","ar"][b]);var c=d.global[a][b];return c?c.apply(null,i.call(arguments,1)):new n(a)},d.global[a]=c,Object.keys(b).forEach(function(d){if("$"===d.charAt(0)){var h=b[d].defaults,j=b[d].ctor;c[d.substr(1)]=e(function(){var b=i.call(arguments);k.name=a,k.signalRange=g.signalRange;var c=j.apply(f,b);return k={},r(c,g)}).defaults(h).build()}})};d.createUGen=function(){return new n},d.instanceOfUGen=function(a){return a instanceof n},d.instanceOfMultiOutUGen=function(a){return a instanceof o},d.createOutputProxy=function(a,b,c){return new p(a,b,c)},d.instanceOfOutputProxy=function(a){return a instanceof p},d.instanceOfOut=function(a){return a instanceof q},d.setSynthDef=function(a){if(a&&null!==j)throw new Error("nested Synth.def");j=a},d.UGen=n,d.MultiOutUGen=o,d.Out=q,d.ugen.register=s,c.exports={UGen:n,MultiOutUGen:o,OutputProxy:p}}),e("cc/lang/basic_ugen",function(a,b,c){var d=a("./cc"),e=a("../common/extend"),f=a("../common/ops"),g=a("./fn"),h=a("./utils"),i=function(a){if(Array.isArray(a))return a.reduce(function(a,b){return Math.max(a,i(b))},0);if(a)switch(a.rate){case 0:case 1:case 2:case 3:return a.rate}return 0},j=function(){function a(a,b){d.MultiOutUGen.call(this,b||"Control"),this.rate=a,this.values=null}return e(a,d.MultiOutUGen),a.prototype.init=function(a){return d.UGen.prototype.init.apply(this,[this.rate]),this.values=a.slice(),this.initOutputs(this.values.length,this.rate)},a}(),k=function(){function a(){j.call(this,2,"AudioControl")}return e(a,j),a}(),l=function(){function a(){j.call(this,1,"TrigControl")}return e(a,j),a}(),m=function(){function a(){j.call(this,1,"LagControl")}return e(a,j),a.prototype.init=function(a,b){return d.UGen.prototype.init.apply(this,[this.rate].concat(b)),this.values=a,this.initOutputs(a.length,this.rate)},a}(),n=function(){function a(){d.UGen.call(this,"UnaryOpUGen")}return e(a,d.UGen),a.prototype.init=function(a,b){var c=f.UNARY_OPS[a];if("undefined"==typeof c)throw new Error("UnaryOpUGen: unknown operator '"+a+"'");return b=h.asUGenInput(b),d.UGen.prototype.init.call(this,i(b)),this.selector=a,this.specialIndex=c,this.inputs=[b],this.numOfInputs=1,this},a}(),o=function(){function a(){d.UGen.call(this,"BinaryOpUGen")}return e(a,d.UGen),a.prototype.init=function(b,c,e){if(c=h.asUGenInput(c),e=h.asUGenInput(e),"number"==typeof c&&"number"==typeof e)switch(b){case"+":return h.asUGenInput(c+e);case"-":return h.asUGenInput(c-e);case"*":return h.asUGenInput(c*e);case"/":return h.asUGenInput(c/e);case"%":return h.asUGenInput(c%e)}if("-"===b&&"number"==typeof e&&(b="+",e=-e),"/"===b&&"number"==typeof e&&(b="*",e=1/e),"*"===b)return 0===c||0===e?0:1===c?e:1===e?c:q(c,e);if("+"===b){if(0===c)return e;if(0===e)return c;if(c instanceof a){if("*"===c.selector)return d.createMulAdd(c.inputs[0],c.inputs[1],e)}else if(c instanceof r)return"number"==typeof c.inputs[2]&&"number"==typeof e?c.inputs[2]+e===0?d.createBinaryOpUGen("*!",c.inputs[0],c.inputs[1]):(c.inputs[2]+=e,c):(e=d.createBinaryOpUGen("+",c.inputs[2],e),c=d.createBinaryOpUGen("*!",c.inputs[0],c.inputs[1]),d.createBinaryOpUGen("+",c,e));return p(c,e)}"+!"===b?b="+":"*!"===b&&(b="*");var g=f.BINARY_OPS[b];if("undefined"==typeof g)throw new Error("BinaryOpUGen: unknown operator '"+b+"'");return d.UGen.prototype.init.call(this,i([c,e])),this.selector=b,this.specialIndex=g,this.inputs=[c,e],this.numOfInputs=2,this},a}(),p=function(){var a=function(b){if("number"==typeof b)return b;var c=b.inputs;return b instanceof o&&"+"===b.selector?[a(c[0]),a(c[1])]:b instanceof s?[a(c[0]),a(c[1]),a(c[2])]:b instanceof t?[a(c[0]),a(c[1]),a(c[2]),a(c[3])]:b},b=function(a){switch(a=a.map(function(a){switch(a.length){case 4:return d.createSum4(a[0],a[1],a[2],a[3]);case 3:return d.createSum3(a[0],a[1],a[2]);case 2:return d.createBinaryOpUGen("+!",a[0],a[1]);case 1:return a[0]}}),a.length){case 4:return d.createSum4(a[0],a[1],a[2],a[3]);case 3:return d.createSum4(a[0],a[1],a[2]);case 2:return d.createBinaryOpUGen("+!",a[0],a[1]);case 1:return a[0];default:return b(h.clump(a,4))}};return function(c,e){var f=h.flatten([a(c),a(e)]),g=0;return f=f.filter(function(a){return"number"==typeof a?(g+=a,!1):!0}),0!==g&&f.push(g),f=h.clump(f,4),1===f.length&&2===f[0].length?d.createBinaryOpUGen("+!",f[0][0],f[0][1]):b(f)}}(),q=function(){var a=function(b){if("number"==typeof b)return b;var c=b.inputs;return b instanceof o&&"*"===b.selector?[a(c[0]),a(c[1])]:b},b=function(a){switch(a=a.map(function(a){return 2===a.length?d.createBinaryOpUGen("*!",a[0],a[1]):a[0]}),a.length){case 2:return d.createBinaryOpUGen("*!",a[0],a[1]);case 1:return a[0];default:return b(h.clump(a,2))}};return function(c,e){var f=h.flatten([a(c),a(e)]),g=1;return f=f.filter(function(a){return"number"==typeof a?(g*=a,!1):!0}),1!==g&&f.push(g),f=h.clump(f,2),1===f.length&&2===f[0].length?d.createBinaryOpUGen("*!",f[0][0],f[0][1]):b(f)}}(),r=function(){function a(){d.UGen.call(this,"MulAdd")}return e(a,d.UGen),a.prototype.init=function(a,b,c){var e,f,g,j,k;return i(a)<i(b)&&(e=a,a=b,b=e),a=h.asUGenInput(a),b=h.asUGenInput(b),c=h.asUGenInput(c),0===b?c:("number"==typeof a&&"number"==typeof b&&(a*=b,b=1),f=-1===b,g=1===b,j=0===c,g&&j?a:f&&j?d.createBinaryOpUGen("*",a,-1):j?d.createBinaryOpUGen("*",a,b):f?d.createBinaryOpUGen("-",c,a):g?d.createBinaryOpUGen("+",a,c):(k=i([a,b,c]),d.UGen.prototype.init.apply(this,[k,a,b,c])))},a}(),s=function(){function a(){d.UGen.call(this,"Sum3")}return e(a,d.UGen),a.prototype.init=function(a,b,c){if(0===a)return d.createBinaryOpUGen("+",b,c);if(0===b)return d.createBinaryOpUGen("+",a,c);if(0===c)return d.createBinaryOpUGen("+",a,b);var e=i([a,b,c]),f=[a,b,c].sort(function(a,b){return i(b)-i(a)});return d.UGen.prototype.init.apply(this,[e].concat(f))},a}(),t=function(){function a(){d.UGen.call(this,"Sum4")}return e(a,d.UGen),a.prototype.init=function(a,b,c,e){if(0===a)return d.createSum3(b,c,e);if(0===b)return d.createSum3(a,c,e);if(0===c)return d.createSum3(a,b,e);if(0===e)return d.createSum3(a,b,c);var f=i([a,b,c,e]),g=[a,b,c,e].sort(function(a,b){return i(b)-i(a)});return d.UGen.prototype.init.apply(this,[f].concat(g))},a}();d.ugen.specs.Out={Klass:d.Out,$ar:{defaults:"bus=0,channelsArray=0",ctor:function(a,b){return this.multiNewList([2,a].concat(b)),0}},$kr:{defaults:"bus=0,channelsArray=0",ctor:function(a,b){return this.multiNewList([1,a].concat(b)),0}}},d.createControl=function(a){return new j(a)},d.createAudioControl=function(){return new k},d.createTrigControl=function(){return new l},d.createLagControl=function(){return new m},d.instanceOfControlUGen=function(a){return a instanceof j},d.createUnaryOpUGen=function(a,b){return(new n).init(a,b)},d.createBinaryOpUGen=g(function(a,b,c){return(new o).init(a,b,c)}).multiCall().build(),d.createMulAdd=g(function(a,b,c){return(new r).init(a,b,c)}).multiCall().build(),d.createSum3=function(a,b,c){return(new s).init(a,b,c)},d.createSum4=function(a,b,c,d){return(new t).init(a,b,c,d)},c.exports={Control:j,UnaryOpUGen:n,BinaryOpUGen:o,MulAdd:r,Sum3:s,Sum4:t}}),e("cc/plugins/installer",function(a,b,c){a("./bufio"),a("./debug"),a("./decay"),a("./delay"),a("./demand"),a("./env"),a("./filter"),a("./inout"),a("./line"),a("./noise"),a("./osc"),a("./pan"),a("./random"),a("./range"),a("./reverb"),a("./trig"),a("./ui"),c.exports={}}),e("cc/plugins/bufio",function(a,b,c){var d=a("../cc"),e=a("./utils"),f=e.cubicinterp,g=[].slice,h=function(a,b,c,d){if(b>=c){if(!d)return a.done=!0,c;if(b-=c,c>b)return b}else{if(!(0>b))return b;if(!d)return a.done=!0,0;if(b+=c,b>=0)return b}return b-c*Math.floor(b/c)},i=function(a,b,c){var d=0|a,e=d-1,f=d+1,g=f+1;return 0===d?e=c?b:d:g>b&&(f>b?c?(f=0,g=1):f=g=b:g=c?0:b),[e,d,f,g]},j=function(a){var b=a.buffers[0|this.inputs[0][0]];if(b){var c=b.samples;if(c)return this._frames=b.frames,this._channels=b.channels,this._sampleRate=b.sampleRate,this._samples=c,!0}return!1};d.ugen.specs.PlayBuf={Klass:d.MultiOutUGen,$ar:{defaults:"numChannels=0,bufnum=0,rate=1,trigger=1,startPos=0,loop=0,doneAction=0",ctor:function(a,b,c,d,e,f,g){if("number"!=typeof a)throw new TypeError("PlayBuf: numChannels should be an integer.");return this.multiNew(2,a,b,c,d,e,f,g)}},$kr:{defaults:"numChannels=0,bufnum,rate=1,trigger=1,startPos=0,loop=0,doneAction=0",ctor:function(a,b,c,d,e,f,g){if("number"!=typeof a)throw new TypeError("PlayBuf: numChannels should be an integer.");return this.multiNew(1,a,b,c,d,e,f,g)}},init:function(a){return this.inputs=g.call(arguments,1),this.initOutputs(a,this.rate)}},d.unit.specs.PlayBuf=function(){var a=function(){switch(this.numOfOutputs){case 1:this.process=b;break;case 2:this.process=c;break;default:this.process=d}this._samples=null,this._channels=0,this._frames=0,this._phase=this.inputs[3][0],this._trig=0},b=function(a,b){if(j.call(this,b)){var c,d,e,g,k,l,m=this.outputs[0],n=this._phase,o=this.inputs[1][0],p=this.inputs[2][0],q=this.inputs[4][0],r=this._samples,s=this._frames,t=s-1;p>0&&this._trig<=0&&(this.done=!1,n=this.inputs[3][0]),this._trig=p;for(var u=0;a>u;++u)n=h(this,n,t,q),c=i(n,t,q),d=n-(0|n),e=r[c[0]],g=r[c[1]],k=r[c[2]],l=r[c[3]],m[u]=f(d,e,g,k,l),n+=o;this.done&&this.doneAction(0|this.inputs[5][0]),this._phase=n}},c=function(a,b){if(j.call(this,b)){var c,d,e,g,k,l,m=this.outputs[0],n=this.outputs[1],o=this._phase,p=this.inputs[1][0],q=this.inputs[2][0],r=this.inputs[4][0],s=this._samples,t=this._frames,u=t-1;q>0&&this._trig<=0&&(this.done=!1,o=this.inputs[3][0]),this._trig=q;for(var v=0;a>v;++v)o=h(this,o,u,r),c=i(o,u,r),d=o-(0|o),e=s[2*c[0]],g=s[2*c[1]],k=s[2*c[2]],l=s[2*c[3]],m[v]=f(d,e,g,k,l),e=s[2*c[0]+1],g=s[2*c[1]+1],k=s[2*c[2]+1],l=s[2*c[3]+1],n[v]=f(d,e,g,k,l),o+=p;this.done&&this.doneAction(0|this.inputs[5][0]),this._phase=o}},d=function(a,b){if(j.call(this,b)){var c,d,e,g,k,l,m=this.outputs,n=this._phase,o=this.inputs[1][0],p=this.inputs[2][0],q=this.inputs[4][0],r=this._samples,s=this._channels,t=this._frames,u=t-1;p>0&&this._trig<=0&&(this.done=!1,n=this.inputs[3][0]),this._trig=p;for(var v=0;a>v;++v){n=h(this,n,u,q),c=i(n,u,q),d=n-(0|n);for(var w=0,x=m.length;x>w;++w)e=r[c[0]*s+w],g=r[c[1]*s+w],k=r[c[2]*s+w],l=r[c[3]*s+w],m[w][v]=f(d,e,g,k,l);n+=o}this.done&&this.doneAction(0|this.inputs[5][0]),this._phase=n}};return a}(),d.ugen.specs.BufRd={Klass:d.MultiOutUGen,$ar:{defaults:"numChannels=0,bufnum=0,phase=0,loop=1,interpolation=2",ctor:function(a,b,c,d,e){if("number"!=typeof a)throw new TypeError("PlayBuf: numChannels should be an integer.");return this.multiNew(2,a,b,c,d,e)}},$kr:{defaults:"numChannels=0,bufnum=0,phase=0,loop=1,interpolation=2",ctor:function(a,b,c,d,e){if("number"!=typeof a)throw new TypeError("PlayBuf: numChannels should be an integer.");return this.multiNew(1,a,b,c,d,e)}},init:function(a){return this.inputs=g.call(arguments,1),this.initOutputs(a,this.rate)}};var k=function(a,b,c,d){return a[b[1]*c+d]},l=function(a,b,c,d,e){var f=a[b[1]*c+d],g=a[b[2]*c+d];return f+e*(g-f)},m=function(a,b,c,d,e){var g=a[b[0]*c+d],h=a[b[1]*c+d],i=a[b[2]*c+d],j=a[b[3]*c+d];return f(e,g,h,i,j)};d.unit.specs.BufRd=function(){var a=function(){switch(this.numOfOutputs){case 1:this.process=b;break;case 2:this.process=c;break;default:this.process=d}switch(0|this.inputs[3][0]){case 1:this._perform=k;break;case 4:this._perform=m;break;default:this._perform=l}},b=function(a,b){if(j.call(this,b))for(var c,d,e,f=this.outputs[0],g=this.inputs[1],k=this.inputs[2][0],l=this._samples,m=this._numFrames,n=this._perform,o=m-1,p=0;a>p;++p)c=h(this,g[p],o,k),d=i(c,o,k),e=c-(0|c),f[p]=n(l,d,1,0,e)},c=function(a,b){if(j.call(this,b))for(var c,d,e,f=this.outputs[0],g=this.outputs[1],k=this.inputs[1],l=this.inputs[2][0],m=this._samples,n=this._numFrames,o=this._perform,p=n-1,q=0;a>q;++q)c=h(this,k[q],p,l),d=i(c,p,l),e=c-(0|c),f[q]=o(m,d,2,0,e),g[q]=o(m,d,2,1,e)},d=function(a,b){if(j.call(this,b))for(var c,d,e,f=this.outputs,g=this.inputs[1],k=this.inputs[2][0],l=this._samples,m=this._numFrames,n=this._perform,o=m-1,p=0;a>p;++p){c=h(this,g[p],o,k),d=i(c,o,k),e=c-(0|c);for(var q=0,r=f.length;r>q;++q)f[q][p]=n(l,d,r,q,e)}};return a}(),d.ugen.specs.BufSampleRate={$kr:{defaults:"bufnum=0",ctor:function(a){return this.multiNew(1,a)}},$ir:{defaults:"bufnum=0",ctor:function(a){return this.multiNew(1,a)}}},d.unit.specs.BufSampleRate=function(){var a=function(){this.process=b},b=function(a,b){j.call(this,b)&&(this.outputs[0][0]=this._sampleRate)};return a}(),d.ugen.specs.BufRateScale=d.ugen.specs.BufSampleRate,d.unit.specs.BufRateScale=function(){var a=function(){this.process=b,this._sampleDur=d.getRateInstance(2).sampleDur},b=function(a,b){j.call(this,b)&&(this.outputs[0][0]=this._sampleRate*this._sampleDur)};return a}(),d.ugen.specs.BufFrames=d.ugen.specs.BufSampleRate,d.unit.specs.BufFrames=function(){var a=function(){this.process=b},b=function(a,b){j.call(this,b)&&(this.outputs[0][0]=this._frames)};return a}(),d.ugen.specs.BufSamples=d.ugen.specs.BufSampleRate,d.unit.specs.BufSamples=function(){var a=function(){this.process=b},b=function(a,b){j.call(this,b)&&(this.outputs[0][0]=this._samples.length)};return a}(),d.ugen.specs.BufDur=d.ugen.specs.BufSampleRate,d.unit.specs.BufDur=function(){var a=function(){this.process=b,this._sampleDur=d.getRateInstance(2).sampleDur},b=function(a,b){j.call(this,b)&&(this.outputs[0][0]=this._frames*this._sampleDur)};return a}(),d.ugen.specs.BufChannels=d.ugen.specs.BufSampleRate,d.unit.specs.BufChannels=function(){var a=function(){this.process=b},b=function(a,b){j.call(this,b)&&(this.outputs[0][0]=this._channels)};return a}(),c.exports={}}),e("cc/plugins/utils",function(a,b,c){var d=2*Math.PI,e=8192,f=e-1,g=new Float32Array([1e20])[0],h=new Float32Array(e+1),i=new Float32Array(e+1),j=new Float32Array(2*e);!function(){var a;for(a=0;e>a;++a){var b=Math.sin(d*(a/e));h[a]=b,i[a]=1/b}h[e]=h[0],i[0]=i[e>>1]=i[e]=g;var c=e,f=c>>1;for(a=1;8>=a;++a)i[a]=i[c-a]=i[f-a]=i[f+a]=g}(),function(){!function(a,b,c){var d,e,f,g;for(f=g=0;c-1>f;++f)d=a[f],e=a[f+1],b[g++]=2*d-e,b[g++]=e-d;d=a[c-1],e=a[0],b[g++]=2*d-e,b[g++]=e-d}(h,j,e)}();var k=function(a){return 0>a?a>-1e-6&&(a=0):1e-6>a&&(a=0),a},l=function(a,b,c,d,e){var f=c,g=.5*(d-b),h=b-2.5*c+2*d-.5*e,i=.5*(e-b)+1.5*(c-d);return((i*a+h)*a+g)*a+f},m=function(a,b,c){if(c===b)return b;var d=c-b;if(a>=c){if(a-=d,c>a)return a}else{if(!(b>a))return a;if(a+=d,a>=b)return a}return a-d*Math.floor((a-b)/d)};c.exports={kSineSize:e,kSineMask:f,kBadValue:g,gSine:h,gInvSine:i,gSineWavetable:j,zapgremlins:k,cubicinterp:l,sc_wrap:m}}),e("cc/plugins/debug",function(a,b,c){var d=a("../cc");d.ugen.specs.Debug={$ar:{defaults:"in=0",ctor:function(a){return this.multiNew(2,a)}},$kr:{defaults:"in=0",ctor:function(a){return this.multiNew(1,a)}}},d.unit.specs.Debug=function(){var a=function(){this.process=b},b=function(){this.outputs[0].set(this.inputs[0]),d.global.console.log(this.outputs[0][0])};return a}(),c.exports={}}),e("cc/plugins/decay",function(a,b,c){var d=a("../cc"),e=Math.log(.001);d.ugen.specs.Integrator={$ar:{defaults:"in=0,coef=1,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"in=0,coef=1,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.Integrator=function(){var a=function(){this.process=b,this._b1=this.inputs[1][0],this._y1=0,b.call(this,1)},b=function(a){var b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],f=this._b1,g=this._y1;if(f===e)for(b=0;a>b;++b)c[b]=g=d[b]+f*g;else{var h=(e-f)*this.rate.slopeFactor;for(b=0;a>b;++b)c[b]=g=d[b]+f*g,f+=h;this._b1=e}this._y1=g};return a}(),d.ugen.specs.Decay={$ar:{defaults:"in=0,decayTime=1,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"in=0,decayTime=1,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.Decay=function(){var a=function(){this.process=b,this._decayTime=void 0,this._b1=0,this._y1=0,b.call(this,1)},b=function(a){var b,c=this.outputs[0],d=this.inputs[0],f=this.inputs[1][0],g=this._b1,h=this._y1;if(f===this._decayTime)for(b=0;a>b;++b)c[b]=h=d[b]+g*h;else{var i=0===f?0:Math.exp(e/(f*this.rate.sampleRate));this._decayTime=f;var j=(i-g)*this.rate.slopeFactor;for(b=0;a>b;++b)c[b]=h=d[b]+g*h,g+=j;this._b1=i}this._y1=h};return a}(),d.ugen.specs.Decay2={$ar:{defaults:"in=0,attackTime=0.01,decayTime=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"in=0,attackTime=0.01,decayTime=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.Decay2=function(){var a=function(){this.process=b,this._attackTime=void 0,this._decayTime=void 0,this._b1a=0,this._b1b=0,this._y1a=0,this._y1b=0,b.call(this,1)},b=function(a){var b,c=this.outputs[0],d=this.inputs[0],f=this.inputs[1][0],g=this.inputs[2][0],h=this._b1a,i=this._b1b,j=this._y1a,k=this._y1b;if(f===this._attackTime&&g===this._decayTime)for(b=0;a>b;++b)j=d[b]+h*j,k=d[b]+i*k,c[b]=j-k;else{this._decayTime=g,this._attackTime=f;var l=0===g?0:Math.exp(e/(g*this.rate.sampleRate)),m=0===f?0:Math.exp(e/(f*this.rate.sampleRate)),n=(l-h)*this.rate.slopeFactor,o=(m-i)*this.rate.slopeFactor;for(b=0;a>b;++b)j=d[b]+h*j,k=d[b]+i*k,c[b]=j-k,h+=n,i+=o;h=l,i=m}this._y1a=j,this._y1b=k,this._b1a=h,this._b1b=i};return a}(),c.exports={}}),e("cc/plugins/delay",function(a,b,c){var d=a("../cc"),e=a("./utils"),f=Math.log(.001),g=e.cubicinterp;d.ugen.specs.Delay1={$ar:{defaults:"in=0,mul=1,add=0",ctor:function(a,b,c){return this.multiNew(2,a).madd(b,c)}},$kr:{defaults:"in=0,mul=1,add=0",ctor:function(a,b,c){return this.multiNew(1,a).madd(b,c)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.Delay1=function(){var a=function(){this.process=1===this.bufLength?c:b,this._x1=0,c.call(this)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._x1,e=0;a>e;e+=8)b[e]=d,b[e+1]=c[e],b[e+2]=c[e+1],b[e+3]=c[e+2],b[e+4]=c[e+3],b[e+5]=c[e+4],b[e+6]=c[e+5],b[e+7]=c[e+6],d=c[e+7];this._x1=d},c=function(){this.outputs[0][0]=this._x1,this._x1=this.inputs[0][0]};return a}(),d.ugen.specs.Delay2=d.ugen.specs.Delay1,d.unit.specs.Delay2=function(){var a=function(){this.process=1===this.bufLength?c:b,this._x1=this._x2=0,c.call(this)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._x1,e=this._x2,f=0;a>f;f+=8)b[f]=d,b[f+1]=e,b[f+2]=c[f],b[f+3]=c[f+1],b[f+4]=c[f+2],b[f+5]=c[f+3],b[f+6]=c[f+4],b[f+7]=c[f+5],d=c[f+6],e=c[f+7];this._x1=d,this._x2=e},c=function(){this.outputs[0][0]=this._x1,this._x1=this._x2,this._x2=this.inputs[0][0]};return a}();var h=function(a,b,c){return Math.max(c,Math.min(b*a.rate.sampleRate,a._fdelaylen))},i=function(a,b){return 0===a||0===b?0:b>0?+Math.exp(f*a/+b):-Math.exp(f*a/-b)},j=function(a,b,c){return a[c&b]},k=function(a,b,c,d){var e=a[c&b],f=a[c-1&b];return e+d*(f-e)},l=function(a,b,c,d){var e=a[c+1&b],f=a[c&b],h=a[c-1&b],i=a[c-2&b];return g(d,e,f,h,i)};d.ugen.specs.DelayN={$ar:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.ugen.specs.DelayL=d.ugen.specs.DelayN,d.ugen.specs.DelayC=d.ugen.specs.DelayN;var m=function(){this._maxdelaytime=this.inputs[1][0],this._delaytime=this.inputs[2][0],this._dlybuf=0;var a=Math.ceil(this._maxdelaytime*this.rate.sampleRate+1);a+=this.rate.bufLength,a=1<<Math.ceil(Math.log(a)*Math.LOG2E),this._fdelaylen=this._idelaylen=a,this._dlybuf=new Float32Array(a),this._mask=a-1,this._dsamp=h(this,this._delaytime,1),this._numoutput=0,this._iwrphase=0},n=function(a,b){var c,d,e,f=this.outputs[0],g=this.inputs[0],i=this.inputs[2][0],j=this._dlybuf,k=this._iwrphase,l=this._dsamp,m=this._mask;if(i===this._delaytime)for(c=l-(0|l),e=0;a>e;++e)j[k&m]=g[e],d=k-(0|l),f[e]=b(j,m,d,c),k+=1;else{var n=h(this,i,1),o=(n-l)*this.rate.slopeFactor;for(e=0;a>e;++e)j[k&m]=g[e],l+=o,c=l-(0|l),d=k-(0|l),f[e]=b(j,m,d,c),k+=1;this._dsamp=n,this._delaytime=i}k>j.length&&(k-=j.length),this._iwrphase=k};d.unit.specs.DelayN=function(){var a=function(){m.call(this),this.process=b},b=function(a){n.call(this,a,j)};return a}(),d.unit.specs.DelayL=function(){var a=function(){m.call(this),this.process=b},b=function(a){n.call(this,a,k)};return a}(),d.unit.specs.DelayC=function(){var a=function(){m.call(this),this.process=b},b=function(a){n.call(this,a,l)};return a}(),d.ugen.specs.CombN={$ar:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.multiNew(2,a,b,c,d).madd(e,f)}},$kr:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.multiNew(1,a,b,c,d).madd(e,f)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.ugen.specs.CombL=d.ugen.specs.CombN,d.ugen.specs.CombC=d.ugen.specs.CombN;var o=function(){var a;this._maxdelaytime=this.inputs[1][0],this._delaytime=this.inputs[2][0],this._decaytime=this.inputs[3][0],a=Math.ceil(this._maxdelaytime*this.rate.sampleRate+1),a+=this.rate.bufLength,a=1<<Math.ceil(Math.log(a)*Math.LOG2E),this._fdelaylen=this._idelaylen=a,this._dlybuf=new Float32Array(a),this._mask=a-1,this._dsamp=h(this,this._delaytime,1),this._iwrphase=0,this._feedbk=i(this._delaytime,this._decaytime)},p=function(a,b){var c,d,e,f,g,j,k,l=this.outputs[0],m=this.inputs[0],n=this.inputs[2][0],o=this.inputs[3][0],p=this._dlybuf,q=this._iwrphase,r=this._dsamp,s=this._feedbk,t=this._mask,u=r-(0|r);if(n===this._delaytime)if(c=q-(0|r),o===this._decaytime)for(k=0;a>k;++k)d=b(p,t,c,u),p[q&t]=m[k]+s*d,l[k]=d,c++,q++;else{for(e=i(n,o),f=(e-s)*this.rate.slopeFactor,k=0;a>k;++k)d=b(p,t,c,u),p[q&t]=m[k]+s*d,l[k]=d,s+=f,c++,q++;this._feedbk=e,this._decaytime=o}else{for(g=h(this,n,1),j=(g-r)*this.rate.slopeFactor,e=i(n,o),f=(e-s)*this.rate.slopeFactor,k=0;a>k;++k)c=q-(0|r),d=b(p,t,c,u),p[q&t]=m[k]+s*d,l[k]=d,r+=j,s+=f,c++,q++;this._feedbk=s,this._dsamp=r,this._delaytime=n,this._decaytime=o}this._iwrphase=q};d.unit.specs.CombN=function(){var a=function(){o.call(this),this.process=b},b=function(a){p.call(this,a,j)};return a}(),d.unit.specs.CombL=function(){var a=function(){o.call(this),this.process=b},b=function(a){p.call(this,a,k)};return a}(),d.unit.specs.CombC=function(){var a=function(){o.call(this),this.process=b},b=function(a){p.call(this,a,l)};return a}(),d.ugen.specs.AllpassN={$ar:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.multiNew(2,a,b,c,d).madd(e,f)}},$kr:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.multiNew(1,a,b,c,d).madd(e,f)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.ugen.specs.AllpassL=d.ugen.specs.AllpassN,d.ugen.specs.AllpassC=d.ugen.specs.AllpassN;var q=o,r=function(a,b){var c,d,e,f,g,j,k,l,m,n=this.outputs[0],o=this.inputs[0],p=this.inputs[2][0],q=this.inputs[3][0],r=this._dlybuf,s=this._iwrphase,t=this._dsamp,u=this._feedbk,v=this._mask;if(p===this._delaytime)if(c=s-(0|t),d=t-(0|t),q===this._decaytime)for(m=0;a>m;++m)e=b(r,v,c,d),f=e*u+o[m],r[s&v]=f,n[m]=e-u*f,c++,s++;else{for(g=i(p,q),j=(g-u)*this.rate.slopeFactor,m=0;a>m;++m)e=b(r,v,c,d),f=e*u+o[m],r[s&v]=f,n[m]=e-u*f,u+=j,c++,s++;this._feedbk=g,this._decaytime=q}else{for(k=h(this,p,1),l=(k-t)*this.rate.slopeFactor,g=i(p,q),j=(g-u)*this.rate.slopeFactor,m=0;a>m;++m)c=s-(0|t),d=t-(0|t),e=b(r,v,c,d),f=e*u+o[m],r[s&v]=f,n[m]=e-u*f,t+=l,u+=j,c++,s++;this._feedbk=u,this._dsamp=t,this._delaytime=p,this._decaytime=q}this._iwrphase=s};d.unit.specs.AllpassN=function(){var a=function(){q.call(this),this.process=b
},b=function(a){r.call(this,a,j)};return a}(),d.unit.specs.AllpassL=function(){var a=function(){q.call(this),this.process=b},b=function(a){r.call(this,a,k)};return a}(),d.unit.specs.AllpassC=function(){var a=function(){q.call(this),this.process=b},b=function(a){r.call(this,a,l)};return a}(),c.exports={}}),e("cc/plugins/demand",function(a,b,c){var d=a("../cc"),e=function(a,b){var c=a.fromUnits[b];return c&&3===c.calcRate},f=function(a,b){var c=a.fromUnits[b];return c&&3===c.calcRate&&c.process(1),a.inputs[b][0]},g=function(a,b,c){var d=a.fromUnits[b];if(!d)return a.inputs[b][0];switch(d.calcRate){case 2:return a.inputs[b][c-1];case 3:d.process(c);default:return a.inputs[b][0]}},h=function(a,b){var c=a.fromUnits[b];c&&3===c.calcRate&&c.process(0)};d.ugen.specs.Demand={Klass:d.MultiOutUGen,$ar:{defaults:"trig=0,reset=0,demandUGens=[]",ctor:function(a,b,c){return this.multiNewList([2,a,b].concat(c))}},$kr:{defaults:"trig=0,reset=0,demandUGens=[]",ctor:function(a,b,c){return this.multiNewList([1,a,b].concat(c))}},init:function(){return this.initOutputs(this.inputs.length-2,this.rate)},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.Demand=function(){var a=function(){this.process=b,this._prevtrig=0,this._prevreset=0,this._prevout=new Float32Array(this.numOfOutputs)},b=function(a){for(var b,c,d,e,f,i=this.outputs,j=this.inputs,k=j[0],l=j[1],m=this._prevout,n=this._prevtrig,o=this._prevreset,p=this.numOfInputs,q=0;a>q;++q){if(b=k[q],c=l[q],c>0&&0>=o)for(e=2;p>e;++e)h(this,e);if(b>0&&0>=n)for(e=2,f=0;p>e;++e)d=g(this,e,q+1),isNaN(d)?(d=m[f],this.done=!0):m[f]=d,i[f][q]=d;else for(e=2,f=0;p>e;++e)i[f][q]=m[f];n=b,o=c}this._prevtrig=n,this._prevreset=o};return a}(),d.ugen.specs.Dgeom={$new:{defaults:"start=1,grow=2,length=Infinity",ctor:function(a,b,c){return this.multiNew(3,c,a,b)}}},d.unit.specs.Dgeom=function(){var a=function(){this.process=b,this._grow=0,this._value=0,b.call(this,0)},b=function(a){var b,c;if(a){if(b=g(this,2,a),isNaN(b)||(this._grow=b),this._repeats<0&&(c=g(this,0,a),this._repeats=0|c,this._value=g(this,1,a)),this._repeatCount>=this._repeats)return this.outputs[0][0]=0/0,void 0;this.outputs[0][0]=this._value,this._value*=this._grow,this._repeatCount++}else this._repeats=-1,this._repeatCount=0};return a}(),d.ugen.specs.Dseries={$new:{defaults:"start=1,step=1,length=Infinity",ctor:function(a,b,c){return this.multiNew(3,c,a,b)}}},d.unit.specs.Dseries=function(){var a=function(){this.process=b,this._step=0,this._value=0,b.call(this,0)},b=function(a){var b,c;if(a){if(b=g(this,2,a),isNaN(b)||(this._step=b),this._repeats<0&&(c=g(this,0,a),this._repeats=0|c,this._value=g(this,1,a)),this._repeatCount>=this._repeats)return this.outputs[0][0]=0/0,void 0;this.outputs[0][0]=this._value,this._value+=this._step,this._repeatCount++}else this._repeats=-1,this._repeatCount=0};return a}(),d.ugen.specs.Dwhite={$new:{defaults:"lo=0,hi=1,length=Infinity",ctor:function(a,b,c){return this.multiNew(3,c,a,b)}}},d.unit.specs.Dwhite=function(){var a=function(){this.process=b,this._lo=0,this._hi=0,b.call(this,0)},b=function(a){var b,c,d;if(a){if(this._repeats<0&&(d=g(this,0,a),this._repeats=0|d),this._repeatCount>=this._repeats)return this.outputs[0][0]=0/0,void 0;this._repeatCount++,b=g(this,1,a),c=g(this,2,a),isNaN(b)||(this._lo=b),isNaN(c)||(this._hi=c),this.outputs[0][0]=Math.random()*(this._hi-this._lo)+this._lo}else this._repeats=-1,this._repeatCount=0};return a}(),d.ugen.specs.Diwhite={$new:{defaults:"lo=0,hi=127,length=Infinity",ctor:function(a,b,c){return this.multiNew(3,c,a,b)}}},d.unit.specs.Diwhite=function(){var a=function(){this.process=b,this._lo=0,this._hi=0,b.call(this,0)},b=function(a){var b,c,d;if(a){if(this._repeats<0&&(d=g(this,0,a),this._repeats=0|d),this._repeatCount>=this._repeats)return this.outputs[0][0]=0/0,void 0;this._repeatCount++,b=g(this,1,a),c=g(this,2,a),isNaN(b)||(this._lo=0|b),isNaN(c)||(this._hi=0|c),this.outputs[0][0]=Math.random()*(this._hi-this._lo)+this._lo|0}else this._repeats=-1,this._repeatCount=0};return a}();var i={$new:{defaults:"list=[],repeats=1",ctor:function(a,b){return this.multiNewList([3,b].concat(a))}}};d.ugen.specs.Dser=i,d.unit.specs.Dser=function(){var a=function(){this.process=b,b.call(this,0)},b=function(a){var b,c=this.outputs[0];if(a)for(this._repeats<0&&(b=g(this,0,a),this._repeats=isNaN(b)?0:Math.floor(b+.5));;){if(this._index>=this.numOfInputs&&(this._index=1),this._repeatCount>=this._repeats)return c[0]=0/0,void 0;if(!e(this,this._index))return c[0]=this.inputs[this._index][0],this._index++,this._repeatCount++,this._needToResetChild=!0,void 0;if(this._needToResetChild&&(this._needToResetChild=!1,h(this,this._index)),b=g(this,this._index,a),!isNaN(b))return c[0]=b,void 0;this._index++,this._repeatCount++,this._needToResetChild=!0}else this._repeats=-1,this._repeatCount=0,this._needToResetChild=!0,this._index=1};return a}(),d.ugen.specs.Dseq=i,d.unit.specs.Dseq=function(){var a=function(){this.process=b,b.call(this,0)},b=function(a){var b,c,d=this.outputs[0];if(a)for(this._repeats<0&&(b=g(this,0,a),this._repeats=isNaN(b)?0:Math.floor(b+.5)),c=0;;){if(this._index>=this.numOfInputs&&(this._index=1,this._repeatCount++),this._repeatCount>=this._repeats)return d[0]=0/0,this._index=1,void 0;if(!e(this,this._index))return d[0]=g(this,this._index,a),this._index++,this._needToResetChild=!0,void 0;if(this._needToResetChild&&(this._needToResetChild=!1,h(this,this._index)),b=g(this,this._index,a),!isNaN(b))return d[0]=b,void 0;if(this._index++,this._needToResetChild=!0,c++>this.numOfInputs)return}else this._repeats=-1,this._repeatCount=0,this._needToResetChild=!0,this._index=1};return a}(),d.ugen.specs.Dshuf=i,d.unit.specs.Dshuf=function(){var a=function(){this.process=c;for(var a=new Array(this.numOfInputs-1),d=0,e=a.length;e>d;++d)a[d]=d+1;this._indices=a.sort(b),c.call(this,0)},b=function(){return Math.random()-.5},c=function(a){var b,c,d=this.outputs[0];if(a)for(this._repeats<0&&(b=g(this,0,a),this._repeats=isNaN(b)?0:Math.floor(b+.5)),c=0;;){if(this._index>=this.numOfInputs-1&&(this._index=0,this._repeatCount++),this._repeatCount>=this._repeats)return d[0]=0/0,this._index=0,void 0;var f=this._indices[this._index];if(!e(this,f))return d[0]=g(this,f,a),this._index++,this._needToResetChild=!0,void 0;if(this._needToResetChild&&(this._needToResetChild=!1,h(this,f)),b=g(this,f,a),!isNaN(b))return d[0]=b,void 0;if(this._index++,this._needToResetChild=!0,c++>this.numOfInputs)return}else this._repeats=-1,this._repeatCount=0,this._needToResetChild=!0,this._index=1};return a}(),d.ugen.specs.Drand=i,d.unit.specs.Drand=function(){var a=function(){this.process=b,b.call(this,0)},b=function(a){var b,c=this.outputs[0];if(a)for(this._repeats<0&&(b=g(this,0,a),this._repeats=isNaN(b)?0:Math.floor(b+.5));;){if(this._repeatCount>=this._repeats)return c[0]=0/0,void 0;if(!e(this,this._index))return c[0]=this.inputs[this._index][0],this._index=(Math.random()*(this.numOfInputs-1)|0)+1,this._repeatCount++,this._needToResetChild=!0,void 0;if(this._needToResetChild&&(this._needToResetChild=!1,h(this,this._index)),b=g(this,this._index,a),!isNaN(b))return c[0]=b,void 0;this._index=(Math.random()*(this.numOfInputs-1)|0)+1,this._repeatCount++,this._needToResetChild=!0}else this._repeats=-1,this._repeatCount=0,this._needToResetChild=!0,this._index=1};return a}(),d.ugen.specs.Duty={$ar:{defaults:"dur=1,reset=0,level=1,doneAction=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b,d,c)}},$kr:{defaults:"dur=1,reset=0,level=1,doneAction=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b,d,c)}}};var j=0,k=1,l=2,m=3;d.unit.specs.Duty=function(){var a=function(){2===this.inRates[k]?(this.process=b,this._prevreset=0):3===this.inRates[k]?(this.process=d,this._prevreset=f(this,k)*this.rate.sampleRate):(this.process=c,this._prevreset=0),this._count=f(this,j)*this.rate.sampleRate-1,this._prevout=f(this,m),this.outputs[0][0]=this._prevout},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[k],f=this._prevout,i=this._count,n=this._prevreset,o=this.rate.sampleRate,p=0;a>p;++p)b=e[p],b>0&&0>=n&&(h(this,m),h(this,j),i=0),0>=i?(i=g(this,j,p+1)*o+i,isNaN(i)&&this.doneAction(this.inputs[3][l]),c=g(this,m,p+1),isNaN(c)?(c=f,this.doneAction(this.inputs[3][l])):f=c,d[p]=c):(i--,d[p]=f);this._count=i,this._prevreset=n,this._prevout=f},c=function(a){var b,c,d=this.outputs[0],e=this.inputs[k],f=this._prevout,i=this._count,n=this._prevreset,o=this.rate.sampleRate;b=e[0];for(var p=0;a>p;++p)b>0&&0>=n&&(h(this,m),h(this,j),i=0),0>=i?(i=g(this,j,p+1)*o+i,isNaN(i)&&this.doneAction(this.inputs[l][0]),c=g(this,m,p+1),isNaN(c)?(c=f,this.doneAction(this.inputs[l][0])):f=c,d[p]=c):(i--,d[p]=f);this._count=i,this._prevreset=n,this._prevout=f},d=function(a){for(var b,c=this.outputs[0],d=this._prevout,e=this._count,f=this._prevreset,i=this.rate.sampleRate,n=0;a>n;++n)0>=f?(h(this,m),h(this,j),e=0,f=g(this,k,n+1)*i+f):f--,0>=e&&(e=g(this,j,n+1)*i+e,isNaN(e)&&this.doneAction(this.inputs[l][0]),b=g(this,m,n+1),isNaN(b)?(b=d,this.doneAction(this.inputs[l][0])):d=b,c[n]=b),c[n]=d,e--;this._count=e,this._prevreset=f,this._prevout=d};return a}(),d.ugen.specs.TDuty={$ar:{defaults:"dur=1,reset=0,level=1,doneAction=0,gapFirst=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,d,c,e)}},$kr:{defaults:"dur=1,reset=0,level=1,doneAction=0,gapFirst=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,d,c,e)}}},d.unit.specs.TDuty=function(){var a=function(){2===this.inRates[k]?(this.process=b,this._prevreset=0):3===this.inRates[k]?(this.process=d,this._prevreset=f(this,k)*this.rate.sampleRate):(this.process=c,this._prevreset=0),this._count=this.inputs[4][0]?f(this,j)*this.rate.sampleRate:0,this.outputs[0][0]=0},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[k],f=this._count,i=this._prevreset,n=this.rate.sampleRate,o=0;a>o;++o)b=e[o],b>0&&0>=i&&(h(this,m),h(this,j),f=0),0>=f?(f=g(this,j,2)*n+f,isNaN(f)&&this.doneAction(this.inputs[l][0]),c=g(this,m,o+1),isNaN(c)&&(c=0),d[o]=c):d[o]=0,f--,i=b;this._count=f,this._prevreset=i},c=function(a){var b,c,d=this.outputs[0],e=this.inputs[k],f=this._count,i=this._prevreset,n=this.rate.sampleRate;b=e[0];for(var o=0;a>o;++o)b>0&&0>=i&&(h(this,m),h(this,j),f=0),0>=f?(f=g(this,j,2)*n+f,isNaN(f)&&this.doneAction(this.inputs[l][0]),c=g(this,m,o+1),isNaN(c)&&(c=0),d[o]=c):d[o]=0,f--,i=b;this._count=f,this._prevreset=i},d=function(a){for(var b,c=this.outputs[0],d=this._count,e=this._prevreset,f=this.rate.sampleRate,i=0;a>i;++i)0>=e?(h(this,m),h(this,j),d=0,e=g(this,k,i+1)*f+e):e--,0>=d?(d=g(this,j,2)*f+d,isNaN(d)&&this.doneAction(this.inputs[l][0]),b=g(this,m,i+1),isNaN(b)&&(b=0),c[i]=b):c[i]=0,d--;this._count=d,this._prevreset=e};return a}(),c.exports={}}),e("cc/plugins/env",function(a,b,c){var d=a("../cc"),e=0,f=1,g=2,h=3,i=4,j=5,k=6,l=7,m=8,n=9,o=0,p=1,q=2,r=3,s=4,t=5,u=6,v=7,w=9999,x=function(a){return a.asMultichannelArray()};d.ugen.specs.EnvGen={$ar:{defaults:"envelope,gate=1,levelScale=1,levelBias=0,timeScale=1,doneAction=0",ctor:function(a,b,c,d,e,f){return a=x(a)[0],this.multiNewList([2,b,c,d,e,f].concat(a))}},$kr:{defaults:"envelope,gate=1,levelScale=1,levelBias=0,timeScale=1,doneAction=0",ctor:function(a,b,c,d,e,f){return a=x(a)[0],this.multiNewList([1,b,c,d,e,f].concat(a))}}},d.unit.specs.EnvGen=function(){var a=function(){this.process=2===this.calcRate?b:c,this._level=this.inputs[j][0]*this.inputs[f][0]+this.inputs[g][0],this._endLevel=this._level,this._counter=0,this._stage=1e9,this._prevGate=0,this._released=!1,this._releaseNode=0|this.inputs[l][0],this._a1=0,this._a2=0,this._b1=0,this._y1=0,this._y2=0,this._grow=0,this._shape=0,c.call(this,1)},b=function(a){var b,c,d,j,l,x,y,z,A,B,C,D,E,F,G,H,I,J,K=this.outputs[0],L=this.inputs[e][0],M=this._counter,N=this._level,O=this._prevGate,P=0,Q=!0,R=0;0>=O&&L>0?(this._stage=-1,this._released=!1,this.done=!1,M=R,Q=!1):-1>=L&&O>-1&&!this._released?(b=0|this.inputs[k][0],y=-L-1,M=Math.max(1,y*this.rate.sampleRate|0)+R,this._stage=b,this._shape=p,this._endLevel=this.inputs[this.numOfInputs-4][0]*this.inputs[f][0]+this.inputs[g][0],this._grow=(this._endLevel-N)/M,this._released=!0,Q=!0):O>0&&0>=L&&this._releaseNode>=0&&!this._released&&(M=R,this._stage=this._releaseNode-1,this._released=!0,Q=!1),this._prevGate=L;for(var S=a;S;){var T=!1;if(0===M&&(b=0|this.inputs[k][0],this._stage+1>=b?(M=1/0,this._shape=0,N=this._endLevel,this.done=!0,c=0|this.inputs[i][0],this.doneAction(c)):this._stage+1!==this._releaseNode||this._released?(this._stage+=1,T=!0):(d=0|this.inputs[m][0],d>=0&&b>d?(this._stage=d,T=!0):(M=1/0,this._shape=w,N=this._endLevel))),T){if(l=(this._stage<<2)+n,l+4>this.numOfInputs)return;switch(j=this.inputs,x=j[0+l][0]*this.inputs[f][0]+this.inputs[g][0],y=j[1+l][0]*this.inputs[h][0],z=0|j[2+l][0],A=j[3+l][0],this._endLevel=x,this._shape=z,M=Math.max(1,y*this.rate.sampleRate|0),1===M&&(this._shape=p),this._shape){case o:N=x;break;case p:this._grow=(x-N)/M;break;case q:Math.abs(N)<1e-6&&(N=1e-6),this._grow=Math.pow(x/N,1/M);break;case r:B=Math.PI/M,this._a2=.5*(x+N),this._b1=2*Math.cos(B),this._y1=.5*(x-N),this._y2=this._y1*Math.sin(.5*Math.PI-B),N=this._a2-this._y1;break;case s:B=.5*Math.PI/M,this._b1=2*Math.cos(B),x>=N?(this._a2=N,this._y1=0,this._y2=-Math.sin(B)*(x-N)):(this._a2=x,this._y1=N-x,this._y2=Math.cos(B)*(N-x)),N=this._a2+this._y1;break;case t:Math.abs(A)<.001?(this._shape=p,this._grow=(x-N)/M):(C=(x-N)/(1-Math.exp(A)),this._a2=N+C,this._b1=C,this._grow=Math.exp(A/M));break;case u:this._y1=Math.sqrt(N),this._y2=Math.sqrt(x),this._grow=(this._y2-this._y1)/M;break;case v:this._y1=Math.pow(N,.33333333),this._y2=Math.pow(x,.33333333),this._grow=(this._y2-this._y1)/M}}var U=Math.min(S,M);switch(I=this._grow,D=this._a2,E=this._b1,G=this._y1,H=this._y2,this._shape){case o:for(J=0;U>J;++J)K[P++]=N;break;case p:for(J=0;U>J;++J)K[P++]=N,N+=I;break;case q:for(J=0;U>J;++J)K[P++]=N,N*=I;break;case r:for(J=0;U>J;++J)K[P++]=N,F=E*G-H,N=D-F,H=G,G=F;break;case s:for(J=0;U>J;++J)K[P++]=N,F=E*G-H,N=D+F,H=G,G=F;break;case t:for(J=0;U>J;++J)K[P++]=N,E*=I,N=D-E;break;case u:for(J=0;U>J;++J)K[P++]=N,G+=I,N=G*G;break;case v:for(J=0;U>J;++J)K[P++]=N,G+=I,N=G*G*G;break;case w:for(J=0;U>J;++J)K[P++]=N}S-=U,M-=U}this._level=N,this._counter=M,this._a2=D,this._b1=E,this._y1=G,this._y2=H},c=function(){var a,b,c,d,j,l,x,y,z,A,B,C,D,E,F,G,H,I=this.outputs[0],J=this.inputs[e][0],K=this._counter,L=this._level,M=this._prevGate,N=!0,O=0;0>=M&&J>0?(this._stage=-1,this._released=!1,this.done=!1,K=O,N=!1):-1>=J&&M>-1&&!this._released?(a=0|this.inputs[k][0],x=-J-1,K=Math.max(1,x*this.rate.sampleRate|0)+O,this._stage=a,this._shape=p,this._endLevel=this.inputs[this.numOfInputs-4][0]*this.inputs[f][0]+this.inputs[g][0],this._grow=(this._endLevel-L)/K,this._released=!0,N=!0):M>0&&0>=J&&this._releaseNode>=0&&!this._released&&(K=O,this._stage=this._releaseNode-1,this._released=!0,N=!1),this._prevGate=J;var P=!1;if(0>=K&&(a=0|this.inputs[k][0],this._stage+1>=a?(K=1/0,this._shape=0,L=this._endLevel,this.done=!0,b=0|this.inputs[i][0],this.doneAction(b)):this._stage+1!==this._releaseNode||this._released?(this._stage+=1,P=!0):(c=0|this.inputs[m][0],c>=0&&a>c?(this._stage=c,P=!0):(K=1/0,this._shape=w,L=this._endLevel))),P){if(j=(this._stage<<2)+n,j+4>this.numOfInputs)return;switch(d=this.inputs,l=d[0+j][0]*this.inputs[f][0]+this.inputs[g][0],x=d[1+j][0]*this.inputs[h][0],y=0|d[2+j][0],z=d[3+j][0],this._endLevel=l,this._shape=y,K=Math.max(1,x*this.rate.sampleRate|0),1===K&&(this._shape=p),this._shape){case o:L=l;break;case p:this._grow=(l-L)/K;break;case q:Math.abs(L)<1e-6&&(L=1e-6),this._grow=Math.pow(l/L,1/K);break;case r:A=Math.PI/K,this._a2=.5*(l+L),this._b1=2*Math.cos(A),this._y1=.5*(l-L),this._y2=this._y1*Math.sin(.5*Math.PI-A),L=this._a2-this._y1;break;case s:A=.5*Math.PI/K,this._b1=2*Math.cos(A),l>=L?(this._a2=L,this._y1=0,this._y2=-Math.sin(A)*(l-L)):(this._a2=l,this._y1=L-l,this._y2=Math.cos(A)*(L-l)),L=this._a2+this._y1;break;case t:Math.abs(z)<.001?(this._shape=p,this._grow=(l-L)/K):(B=(l-L)/(1-Math.exp(z)),this._a2=L+B,this._b1=B,this._grow=Math.exp(z/K));break;case u:this._y1=Math.sqrt(L),this._y2=Math.sqrt(l),this._grow=(this._y2-this._y1)/K;break;case v:this._y1=Math.pow(L,.33333333),this._y2=Math.pow(l,.33333333),this._grow=(this._y2-this._y1)/K}}switch(H=this._grow,C=this._a2,D=this._b1,F=this._y1,G=this._y2,this._shape){case o:break;case p:L+=H;break;case q:L*=H;break;case r:E=D*F-G,L=C-E,G=F,F=E;break;case s:E=D*F-G,L=C+E,G=F,F=E;break;case t:D*=H,L=C-D;break;case u:F+=H,L=F*F;break;case v:F+=H,L=F*F*F;break;case w:}I[0]=L,this._level=L,this._counter=K-1,this._a2=C,this._b1=D,this._y1=F,this._y2=G};return a}(),d.ugen.specs.Linen={$kr:{defaults:"gate=1,attackTime=0.01,susLevel=1,releaseTime=1,doneAction=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c,d,e)}}},d.unit.specs.Linen=function(){var a=function(){this.process=b,this._level=0,this._stage=4,this._prevGate=0,this._slope=0,this._counter=0,b.call(this,1)},b=function(){var a,b,c,d,e=this.outputs[0],f=this.inputs[0][0];switch(this._prevGate<=0&&f>0&&(this.done=!1,this._stage=0,a=this.inputs[1][0],b=this.inputs[2][0],d=Math.max(1,a*this.rate.sampleRate|0),this._slope=(b-this._level)/d,this._counter=d),this._stage){case 0:case 2:e[0]=this._level,this._level+=this._slope,0===--this._counter&&this._stage++;break;case 1:e[0]=this._level,-1>=f?(this._stage=2,c=-f-1,d=Math.max(1,c*this.rate.sampleRate|0),this._slope=-this._level/d,this._counter=d):0>=f&&(this._stage=2,c=this.inputs[3][0],d=Math.max(1,c*this.rate.sampleRate|0),this._slope=-this._level/d,this._counter=d);break;case 3:e[0]=0,this._done=!0,this._stage++,this.doneAction(this.inputs[4][0]);break;case 4:e[0]=0}this._prevGate=f};return a}(),c.exports={}}),e("cc/plugins/filter",function(a,b,c){var d=a("../cc"),e=a("./utils"),f=e.zapgremlins,g=Math.log(.001),h=Math.sqrt(2),i=function(a){var b=this.rate.filterLoops,c=this.rate.filterRemain;this.rate.filterLoops=0,this.rate.filterRemain=1,a.call(this,1),this.rate.filterLoops=b,this.rate.filterRemain=c};d.ugen.specs.Resonz={$ar:{defaults:"in=0,freq=440,bwr=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"in=0,freq=440,bwr=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.Resonz=function(){var a=function(){this.process=b,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._rq=0,i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],g=this.inputs[2][0],h=this._y1,i=this._y2,j=this._a0,k=this._b1,l=this._b2,m=this.rate,n=0;if(e!==this._freq||g!==this._rq){var o=e*m.radiansPerSample,p=o*g,q=1-.5*p,r=2*q,s=q*q,t=r*Math.cos(o)/(1+s),u=r*t,v=-s,w=.5*(1-s),x=m.filterSlope,y=(w-j)*x,z=(u-k)*x,A=(v-l)*x;for(b=m.filterLoops;b--;)a=d[n]+k*h+l*i,c[n++]=j*(a-i),i=d[n]+k*a+l*h,c[n++]=j*(i-h),h=d[n]+k*i+l*a,c[n++]=j*(h-a),j+=y,k+=z,k+=A;this._freq=e,this._rq=g,this._a0=w,this._b1=u,this._b2=v}else for(b=m.filterLoops;b--;)a=d[n]+k*h+l*i,c[n++]=j*(a-i),i=d[n]+k*a+l*h,c[n++]=j*(i-h),h=d[n]+k*i+l*a,c[n++]=j*(h-a);for(b=m.filterRemain;b--;)a=d[n]+k*h+l*i,c[n++]=j*(a-i),i=h,h=a;this._y1=f(h),this._y2=f(i)};return a}(),d.ugen.specs.OnePole={$ar:{defaults:"in=0,coef=0.5,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"in=0,coef=0.5,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.OnePole=function(){var a=function(){this.process=b,this._b1=this.inputs[1][0],this._y1=0,b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],g=this._b1,h=this._y1,i=Math.max(-1,Math.min(this.inputs[1][0],1));if(g!==i){var j=(i-g)*this.rate.slopeFactor;if(g>0&&i>=0)for(c=0;a>c;++c)b=e[c],d[c]=h=b+g*(h-b),g+=j;else if(0>=g&&0>=i)for(c=0;a>c;++c)b=e[c],d[c]=h=b+g*(h+b),g+=j;else for(c=0;a>c;++c)b=e[c],d[c]=h=(1-Math.abs(g))*b+g*h,g+=j;this._b1=i}else if(g>=0)for(c=0;a>c;++c)b=e[c],d[c]=h=b+g*(h-b);else for(c=0;a>c;++c)b=e[c],d[c]=h=b+g*(h+b);this._y1=f(h)};return a}(),d.ugen.specs.OneZero=d.ugen.specs.OnePole,d.unit.specs.OneZero=function(){var a=function(){this.process=b,this._b1=this.inputs[1][0],this._x1=this.inputs[0][0],b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this._b1,g=this._x1,h=Math.max(-1,Math.min(this.inputs[1][0],1));if(f!==h){var i=(h-f)*this.rate.slopeFactor;if(f>=0&&h>=0)for(c=0;a>c;++c)b=e[c],d[c]=b+f*(g-b),g=b,f+=i;else if(0>=f&&0>=h)for(c=0;a>c;++c)b=e[c],d[c]=b+f*(g+b),g=b,f+=i;else for(c=0;a>c;++c)b=e[c],d[c]=(1-Math.abs(f))*b+f*g,g=b,f+=i;this._b1=h}else if(f>=0)for(c=0;a>c;++c)b=e[c],d[c]=b+f*(g-b),g=b;else for(c=0;a>c;++c)b=e[c],d[c]=b+f*(g+b),g=b;this._x1=g};return a}(),d.ugen.specs.TwoPole={$ar:{defaults:"in=0,freq=440,radius=0.8,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"in=0,freq=440,radius=0.8,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.TwoPole=function(){var a=function(){this.process=b,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._reson=void 0,i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],g=Math.max(0,Math.min(this.inputs[2][0],1)),h=this._y1,i=this._y2,j=this._b1,k=this._b2,l=this.rate,m=0;if(e!==this._freq||g!==this._reson){var n=2*g*Math.cos(e*l.radiansPerSample),o=-(g*g),p=(n-j)*l.filterSlope,q=(o-k)*l.filterSlope;for(b=l.filterLoops;b--;)a=d[m]+j*h+k*i,c[m++]=a,i=d[m]+j*a+k*h,c[m++]=i,h=d[m]+j*i+k*a,c[m++]=h,j+=p,k+=q;this._freq=e,this._reson=g,this._b1=n,this._b2=o}else for(b=l.filterLoops;b--;)a=d[m]+j*h+k*i,c[m++]=a,i=d[m]+j*a+k*h,c[m++]=i,h=d[m]+j*i+k*a,c[m++]=h;for(b=l.filterRemain;b--;)a=d[m]+j*h+k*i,c[m++]=a,i=h,h=a;this._y1=f(h),this._y2=f(i)};return a}(),d.ugen.specs.TwoZero=d.ugen.specs.TwoPole,d.unit.specs.TwoZero=function(){var a=function(){this.process=b,this._b1=0,this._b2=0,this._x1=0,this._x2=0,this._freq=void 0,this._reson=void 0,i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],f=Math.max(0,Math.min(this.inputs[2][0],1)),g=this._b1,h=this._b2,i=this._x1,j=this._x2,k=this.rate,l=0;if(e!==this._freq||f!==this._reson){var m=-2*f*Math.cos(e*k.radiansPerSample),n=f*f,o=(m-g)*k.filterSlope,p=(n-h)*k.filterSlope;for(b=k.filterLoops;b--;)a=d[l],c[l++]=a+g*i+h*j,j=d[l],c[l++]=j+g*a+h*i,i=d[l],c[l++]=i+g*j+h*a,g+=o,h+=p;this._freq=e,this._reson=f,this._b1=m,this._b2=n}else for(b=k.filterLoops;b--;)a=d[l],c[l++]=a+g*i+h*j,j=d[l],c[l++]=j+g*a+h*i,i=d[l],c[l++]=i+g*j+h*a;for(b=k.filterRemain;b--;)a=d[l],c[l++]=a+g*i+h*j,j=i,i=a;this._x1=i,this._x2=j};return a}(),d.ugen.specs.APF={$ar:{defaults:"in=0,freq=440,radius=0.8,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"in=0,freq=440,radius=0.8,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.APF=function(){var a=function(){this.process=b,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._x1=0,this._x2=0,this._freq=void 0,this._reson=void 0,i.call(this,b)},b=function(){var a,b,c,d=this.outputs[0],e=this.inputs[0],g=this.inputs[1][0],h=Math.max(0,Math.min(this.inputs[2][0],1)),i=this._y1,j=this._y2,k=this._x1,l=this._x2,m=this._b1,n=this._b2,o=this.rate,p=0;if(g!==this._freq&&h!==this._reson){var q=2*h*Math.cos(g*o.radiansPerSample),r=-(h*h),s=(q-m)*o.filterSlope,t=(r-n)*o.filterSlope;for(c=o.filterLoops;c--;)a=e[p],d[p++]=b=a+m*(i-k)+n*(j-l),k=e[p],d[p++]=j=l+m*(b-a)+n*(j-k),l=e[p],d[p++]=i=k+m*(j-l)+n*(j-a),m+=s,n+=t;this._freq=g,this._reson=h,this._b1=q,this._b2=r}else for(c=o.filterLoops;c--;)a=e[p],d[p++]=b=a+m*(i-k)+n*(j-l),k=e[p],d[p++]=j=l+m*(b-a)+n*(j-k),l=e[p],d[p++]=i=k+m*(j-l)+n*(j-a);for(c=o.filterRemain;c--;)a=e[p],d[p++]=b=a+m*(i-k)+n*(j-l),j=i,i=b,l=k,k=a;this._y1=f(i),this._y2=f(j),this._x1=k,this._x2=l};return a}(),d.ugen.specs.LPF={$ar:{defaults:"in=0,freq=440,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"in=0,freq=440,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.LPF=function(){var a=function(){this.process=b,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=Math.max(.001,this.inputs[1][0]),g=this._y1,i=this._y2,j=this._a0,k=this._b1,l=this._b2,m=this.rate,n=0;if(e!==this._freq){var o=e*m.radiansPerSample*.5,p=1/Math.tan(o),q=p*p,r=p*h,s=1/(1+r+q),t=-2*(1-q)*s,u=-(1-r+q)*s,v=(s-j)*m.filterSlope,w=(t-k)*m.filterSlope,x=(u-l)*m.filterSlope;for(b=m.filterLoops;b--;)a=d[n]+k*g+l*i,c[n++]=j*(a+2*g+i),i=d[n]+k*a+l*g,c[n++]=j*(i+2*a+g),g=d[n]+k*i+l*a,c[n++]=j*(g+2*i+a),j+=v,k+=w,l+=x;this._freq=e,this._a0=s,this._b1=t,this._b2=u}else for(b=m.filterLoops;b--;)a=d[n]+k*g+l*i,c[n++]=j*(a+2*g+i),i=d[n]+k*a+l*g,c[n++]=j*(i+2*a+g),g=d[n]+k*i+l*a,c[n++]=j*(g+2*i+a);for(b=m.filterRemain;b--;)a=d[n]+k*g+l*i,c[n++]=j*(a+2*g+i),i=g,g=a;this._y1=f(g),this._y2=f(i)};return a}(),d.ugen.specs.HPF=d.ugen.specs.LPF,d.unit.specs.HPF=function(){var a=function(){this.process=b,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],g=this._y1,i=this._y2,j=this._a0,k=this._b1,l=this._b2,m=this.rate,n=0;if(e!==this._freq){var o=e*m.radiansPerSample*.5,p=Math.tan(o),q=p*p,r=p*h,s=1/(1+r+q),t=2*(1-q)*s,u=-(1-r+q)*s,v=(s-j)*m.filterSlope,w=(t-k)*m.filterSlope,x=(u-l)*m.filterSlope;for(b=m.filterLoops;b--;)a=d[n]+k*g+l*i,c[n++]=j*(a-2*g+i),i=d[n]+k*a+l*g,c[n++]=j*(i-2*a+g),g=d[n]+k*i+l*a,c[n++]=j*(g-2*i+a),j+=v,k+=w,l+=x;this._freq=e,this._a0=s,this._b1=t,this._b2=u}else for(b=m.filterLoops;b--;)a=d[n]+k*g+l*i,c[n++]=j*(a-2*g+i),i=d[n]+k*a+l*g,c[n++]=j*(i-2*a+g),g=d[n]+k*i+l*a,c[n++]=j*(g-2*i+a);for(b=m.filterRemain;b--;)a=d[n]+k*g+l*i,c[n++]=j*(a-2*g+i),i=g,g=a;this._y1=f(g),this._y2=f(i)};return a}(),d.ugen.specs.BPF={$ar:{defaults:"in=0,freq=440,rq=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"in=0,freq=440,rq=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.BPF=function(){var a=function(){this.process=b,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._bw=void 0,i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],g=this.inputs[2][0],h=this._y1,i=this._y2,j=this._a0,k=this._b1,l=this._b2,m=this.rate,n=0;if(e!==this._freq||g!==this._bw){var o=e*m.radiansPerSample,p=g*o*.5,q=p?1/Math.tan(p):0,r=2*Math.cos(o),s=1/(1+q),t=q*r*s,u=(1-q)*s,v=(s-j)*m.filterSlope,w=(t-k)*m.filterSlope,x=(u-l)*m.filterSlope;for(b=m.filterLoops;b--;)a=d[n]+k*h+l*i,c[n++]=j*(a-i),i=d[n]+k*a+l*h,c[n++]=j*(i-h),h=d[n]+k*i+l*a,c[n++]=j*(h-a),j+=v,k+=w,l+=x;this._freq=e,this._bw=g,this._a0=s,this._b1=t,this._b2=u}else for(b=m.filterLoops;b--;)a=d[n]+k*h+l*i,c[n++]=j*(a-i),i=d[n]+k*a+l*h,c[n++]=j*(i-h),h=d[n]+k*i+l*a,c[n++]=j*(h-a);for(b=m.filterRemain;b--;)a=d[n]+k*h+l*i,c[n++]=j*(a-i),i=h,h=a;this._y1=f(h),this._y2=f(i)};return a}(),d.ugen.specs.BRF=d.ugen.specs.BPF,d.unit.specs.BRF=function(){var a=function(){this.process=b,this._a0=0,this._a1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._bw=void 0,i.call(this,b)},b=function(){var a,b,c,d=this.outputs[0],e=this.inputs[0],g=this.inputs[1][0],h=this.inputs[2][0],i=this._y1,j=this._y2,k=this._a0,l=this._a1,m=this._b2,n=this.rate,o=0;if(g!==this._freq||h!==this._bw){var p=g*n.radiansPerSample,q=h*p*.5,r=Math.tan(q),s=2*Math.cos(p),t=1/(1+r),u=-s*t,v=(1-r)*t,w=(t-k)*n.filterSlope,x=(u-l)*n.filterSlope,y=(v-m)*n.filterSlope;for(c=n.filterLoops;c--;)a=l*i,b=e[o]-a-m*j,d[o++]=k*(b+j)+a,a=l*b,j=e[o]-a-m*i,d[o++]=k*(j+i)+a,a=l*j,i=e[o]-a-m*b,d[o++]=k*(i+b)+a,k+=w,l+=x,m+=y;this._freq=g,this._bw=h,this._a0=t,this._a1=u,this._b2=v}else for(c=n.filterLoops;c--;)a=l*i,b=e[o]-a-m*j,d[o++]=k*(b+j)+a,a=l*b,j=e[o]-a-m*i,d[o++]=k*(j+i)+a,a=l*j,i=e[o]-a-m*b,d[o++]=k*(i+b)+a;for(c=n.filterRemain;c--;)a=l*i,b=e[o]-a-m*j,d[o++]=k*(b+j)+a,j=i,i=b;this._y1=f(i),this._y2=f(j)};return a}(),d.ugen.specs.RLPF={$ar:{defaults:"in=0,freq=440,rq=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"in=0,freq=440,rq=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.RLPF=function(){var a=function(){this.process=b,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._reson=void 0,i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],g=this.inputs[2][0],h=this._y1,i=this._y2,j=this._a0,k=this._b1,l=this._b2,m=this.rate,n=0;if(e!==this._freq||g!==this._reson){var o=Math.max(.001,g),p=e*m.radiansPerSample,q=Math.tan(p*o*.5),r=(1-q)/(1+q),s=Math.cos(p),t=(1+r)*s,u=-r,v=.25*(1+r-t),w=(v-j)*m.filterSlope,x=(t-k)*m.filterSlope,y=(u-l)*m.filterSlope;for(b=m.filterLoops;b--;)a=j*d[n]+k*h+l*i,c[n++]=a+2*h+i,i=j*d[n]+k*a+l*h,c[n++]=i+2*a+h,h=j*d[n]+k*i+l*a,c[n++]=h+2*i+a,j+=w,k+=x,l+=y;this._freq=e,this._reson=g,this._a0=v,this._b1=t,this._b2=u}else for(b=m.filterLoops;b--;)a=j*d[n]+k*h+l*i,c[n++]=a+2*h+i,i=j*d[n]+k*a+l*h,c[n++]=i+2*a+h,h=j*d[n]+k*i+l*a,c[n++]=h+2*i+a;for(b=m.filterRemain;b--;)a=j*d[n]+k*h+l*i,c[n++]=a+2*h+i,i=h,h=a;this._y1=f(h),this._y2=f(i)};return a}(),d.ugen.specs.RHPF=d.ugen.specs.RLPF,d.unit.specs.RHPF=function(){var a=function(){this.process=b,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._reson=void 0,i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],g=this.inputs[2][0],h=this._y1,i=this._y2,j=this._a0,k=this._b1,l=this._b2,m=this.rate,n=0;if(e!==this._freq||g!==this._reson){var o=Math.max(.001,g),p=e*m.radiansPerSample,q=Math.tan(p*o*.5),r=(1-q)/(1+q),s=Math.cos(p),t=(1+r)*s,u=-r,v=.25*(1+r+t),w=(v-j)*m.filterSlope,x=(t-k)*m.filterSlope,y=(u-l)*m.filterSlope;for(b=m.filterLoops;b--;)a=j*d[n]+k*h+l*i,c[n++]=a-2*h+i,i=j*d[n]+k*a+l*h,c[n++]=i-2*a+h,h=j*d[n]+k*i+l*a,c[n++]=h-2*i+a,j+=w,k+=x,l+=y;this._freq=e,this._reson=g,this._a0=v,this._b1=t,this._b2=u}else for(b=m.filterLoops;b--;)a=j*d[n]+k*h+l*i,c[n++]=a-2*h+i,i=j*d[n]+k*a+l*h,c[n++]=i-2*a+h,h=j*d[n]+k*i+l*a,c[n++]=h-2*i+a;for(b=m.filterRemain;b--;)a=j*d[n]+k*h+l*i,c[n++]=a-2*h+i,i=h,h=a;this._y1=f(h),this._y2=f(i)};return a}(),d.ugen.specs.MidEQ={$ar:{defaults:"in=0,freq=440,rq=1,db=0,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.multiNew(2,a,b,c,d).madd(e,f)}},$kr:{defaults:"in=0,freq=440,rq=1,db=0,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.multiNew(1,a,b,c,d).madd(e,f)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.MidEQ=function(){var a=function(){this.process=b,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._bw=void 0,this._db=void 0,i.call(this,b)},b=function(){var a,b,c,d=this.outputs[0],e=this.inputs[0],g=this.inputs[1][0],h=this.inputs[2][0],i=this.inputs[3][0],j=this._y1,k=this._y2,l=this._a0,m=this._b1,n=this._b2,o=this.rate,p=0;if(g!==this._freq||h!==this._bw||i!==this._db){var q=Math.pow(10,.05*i)-1,r=g*o.radiansPerSample,s=h*r*.5,t=s?1/Math.tan(s):0,u=2*Math.cos(r),v=1/(1+t),w=t*u*v,x=(1-t)*v;v*=q;var y=(v-l)*o.filterSlope,z=(w-m)*o.filterSlope,A=(x-n)*o.filterSlope;for(c=o.filterLoops;c--;)b=e[p],a=b+m*j+n*k,d[p++]=b+l*(a-k),b=e[p],k=b+m*a+n*j,d[p++]=b+l*(k-j),b=e[p],j=b+m*k+n*a,d[p++]=b+l*(j-a),l+=y,m+=z,n+=A;this._freq=g,this._bw=h,this._db=i,this._a0=v,this._b1=w,this._b2=x}else for(c=o.filterLoops;c--;)b=e[p],a=b+m*j+n*k,d[p++]=b+l*(a-k),b=e[p],k=b+m*a+n*j,d[p++]=b+l*(k-j),b=e[p],j=b+m*k+n*a,d[p++]=b+l*(j-a);for(c=o.filterRemain;c--;)b=e[p],a=b+m*j+n*k,d[p++]=b+l*(a-k),k=j,j=a;
this._y1=f(j),this._y2=f(k)};return a}(),d.ugen.specs.LPZ1={$ar:{defaults:"in=0,mul=1,add=0",ctor:function(a,b,c){return this.multiNew(2,a).madd(b,c)}},$kr:{defaults:"in=0,mul=1,add=0",ctor:function(a,b,c){return this.multiNew(1,a).madd(b,c)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.LPZ1=function(){var a=function(){this.process=b,this._x1=this.inputs[0][0],b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this._x1,g=0;for(c=a>>3;c--;)b=e[g],d[g++]=.5*(b+f),f=e[g],d[g++]=.5*(f+b),b=e[g],d[g++]=.5*(b+f),f=e[g],d[g++]=.5*(f+b),b=e[g],d[g++]=.5*(b+f),f=e[g],d[g++]=.5*(f+b),b=e[g],d[g++]=.5*(b+f),f=e[g],d[g++]=.5*(f+b);for(c=3&a;c--;)b=e[g],d[g++]=.5*(b+f),f=b;this._x1=f};return a}(),d.ugen.specs.HPZ1=d.ugen.specs.LPZ1,d.unit.specs.HPZ1=function(){var a=function(){this.process=b,this._x1=this.inputs[0][0],b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this._x1,g=0;for(c=a>>3;c--;)b=e[g],d[g++]=.5*(b-f),f=e[g],d[g++]=.5*(f-b),b=e[g],d[g++]=.5*(b-f),f=e[g],d[g++]=.5*(f-b),b=e[g],d[g++]=.5*(b-f),f=e[g],d[g++]=.5*(f-b),b=e[g],d[g++]=.5*(b-f),f=e[g],d[g++]=.5*(f-b);for(c=3&a;c--;)b=e[g],d[g++]=.5*(b-f),f=b;this._x1=f};return a}(),d.ugen.specs.Slope=d.ugen.specs.LPZ1,d.unit.specs.Slope=function(){var a=function(){this.process=b,this._x1=this.inputs[0][0],b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this._x1,g=this.rate.sampleRate,h=0;for(c=a>>3;c--;)b=e[c],d[h++]=g*(b-f),f=e[c],d[h++]=g*(f-b),b=e[c],d[h++]=g*(b-f),f=e[c],d[h++]=g*(f-b),b=e[c],d[h++]=g*(b-f),f=e[c],d[h++]=g*(f-b),b=e[c],d[h++]=g*(b-f),f=e[c],d[h++]=g*(f-b);for(c=3&a;c--;)b=e[h],d[h++]=g*(b-f),f=b;this._x1=f};return a}(),d.ugen.specs.LPZ2=d.ugen.specs.LPZ1,d.unit.specs.LPZ2=function(){var a=function(){this.process=b,this._x1=this._x2=this.inputs[0][0],i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this._x1,f=this._x2,g=this.rate,h=0;for(b=g.filterLoops;b--;)a=d[h],c[h++]=.25*(a+2*e+f),f=d[h],c[h++]=.25*(f+2*a+e),e=d[h],c[h++]=.25*(e+2*f+a);for(b=g.filterRemain;b--;)a=d[h],c[h++]=.25*(a+2*e+f),f=e,e=a;this._x1=e,this._x2=f};return a}(),d.ugen.specs.HPZ2=d.ugen.specs.LPZ1,d.unit.specs.HPZ2=function(){var a=function(){this.process=b,this._x1=this._x2=this.inputs[0][0],i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this._x1,f=this._x2,g=this.rate,h=0;for(b=g.filterLoops;b--;)a=d[h],c[h++]=.25*(a-2*e+f),f=d[h],c[h++]=.25*(f-2*a+e),e=d[h],c[h++]=.25*(e-2*f+a);for(b=g.filterRemain;b--;)a=d[h],c[h++]=.25*(a-2*e+f),f=e,e=a;this._x1=e,this._x2=f};return a}(),d.ugen.specs.BPZ2=d.ugen.specs.LPZ1,d.unit.specs.BPZ2=function(){var a=function(){this.process=b,this._x1=this._x2=this.inputs[0][0],i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this._x1,f=this._x2,g=this.rate,h=0;for(b=g.filterLoops;b--;)a=d[h],c[h++]=.5*(a-f),f=d[h],c[h++]=.5*(f-e),e=d[h],c[h++]=.5*(e-a);for(b=g.filterRemain;b--;)a=d[h],c[h++]=.25*(a-f),f=e,e=a;this._x1=e,this._x2=f};return a}(),d.ugen.specs.BRZ2=d.ugen.specs.LPZ1,d.unit.specs.BRZ2=function(){var a=function(){this.process=b,this._x1=this._x2=this.inputs[0][0],i.call(this,b)},b=function(){var a,b,c=this.outputs[0],d=this.inputs[0],e=this._x1,f=this._x2,g=this.rate,h=0;for(b=g.filterLoops;b--;)a=d[h],c[h++]=.5*(a+f),f=d[h],c[h++]=.5*(f+e),e=d[h],c[h++]=.5*(e+a);for(b=g.filterRemain;b--;)a=d[h],c[h++]=.25*(a+f),f=e,e=a;this._x1=e,this._x2=f};return a}(),d.ugen.specs.Changed={$ar:{defaults:"in=0,threshold=0",ctor:function(a,b){return d.global.HPZ1.ar(a).abs().gt(b)}},$kr:{defaults:"in=0,threshold=0",ctor:function(a,b){return d.global.HPZ1.kr(a).abs().gt(b)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.ugen.specs.Lag={$ar:{defaults:"in=0,lagTime=0.1,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"in=0,lagTime=0.1,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.Lag=function(){var a=function(){this.process=1===this.rate.bufLength?c:b,this._lag=void 0,this._b1=0,this._y1=this.inputs[0][0],c.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],h=this._y1,i=this._b1;if(f===this._lag)for(c=0;a>c;++c)b=e[c],d[c]=h=b+i*(h-b);else{this._b1=0===f?0:Math.exp(g/(f*this.rate.sampleRate));var j=(this._b1-i)*this.rate.slopeFactor;for(this._lag=f,c=0;a>c;++c)i+=j,b=e[c],d[c]=h=b+i*(h-b)}this._y1=h},c=function(){var a,b=this.outputs[0],c=this.inputs[1][0],d=this._y1,e=this._b1;c!==this._lag&&(this._b1=e=0===c?0:Math.exp(g/(c*this.rate.sampleRate)),this._lag=c),a=this.inputs[0][0],b[0]=d=a+e*(d-a),this._y1=d};return a}(),d.ugen.specs.Lag2=d.ugen.specs.Lag,d.unit.specs.Lag2=function(){var a=function(){this.process=0!==this.inRates[1]?b:1===this.rate.bufLength?d:c,this._lag=0/0,this._b1=0,this._y1a=this.inputs[0][0],this._y1b=this.inputs[0][0],b.call(this,1)},b=function(a){var b,c,d,e=this.outputs[0],f=this.inputs[0],h=this.inputs[1][0],i=this._y1a,j=this._y1b,k=this._b1;if(h===this._lag)for(d=0;a>d;++d)b=f[d],i=b+k*(i-b),j=i+k*(j-i),e[d]=j;else for(this._b1=0===h?0:Math.exp(g/(h*this.rate.sampleRate)),c=(this._b1-k)*this.rate.slopeFactor,this._lag=h,d=0;a>d;++d)k+=c,b=f[d],i=b+k*(i-b),j=i+k*(j-i),e[d]=j;this._y1a=i,this._y1b=j},c=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this._y1a,g=this._y1b,h=this._b1;for(c=0;a>c;++c)b=e[c],f=b+h*(f-b),g=f+h*(g-f),d[c]=g;this._y1a=f,this._y1b=g},d=function(){var a=this.outputs[0],b=this._y1a,c=this._y1b,d=this._b1,e=this.inputs[0][0];b=e+d*(b-e),c=b+d*(c-b),a[0]=c,this._y1a=b,this._y1b=c};return a}(),d.ugen.specs.Lag3=d.ugen.specs.Lag,d.unit.specs.Lag3=function(){var a=function(){this.process=0!==this.inRates[1]?b:1===this.rate.bufLength?c:b,this._lag=0/0,this._b1=0,this._y1a=this.inputs[0][0],this._y1b=this.inputs[0][0],this._y1c=this.inputs[0][0],b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],h=this._y1a,i=this._y1b,j=this._y1c,k=this._b1;if(f===this._lag)for(c=0;a>c;++c)b=e[c],h=b+k*(h-b),i=h+k*(i-h),j=i+k*(j-i),d[c]=j;else{this._b1=0===f?0:Math.exp(g/(f*this.rate.sampleRate));var l=(this._b1-k)*this.rate.slopeFactor;for(this._lag=f,c=0;a>c;++c)k+=l,b=e[c],h=b+k*(h-b),i=h+k*(i-h),j=i+k*(j-i),d[c]=j}this._y1a=h,this._y1b=i,this._y1c=j},c=function(){var a=this.outputs[0],b=this._y1a,c=this._y1b,d=this._y1c,e=this._b1,f=this.inputs[0][0];b=f+e*(b-f),c=b+e*(c-b),d=c+e*(d-c),a[0]=d,this._y1a=b,this._y1b=c,this._y1c=d};return a}(),d.ugen.specs.Ramp=d.ugen.specs.Lag,d.unit.specs.Ramp=function(){var a=function(){this.process=1===this.rate.bufLength?c:b,this._counter=1,this._level=this.inputs[0][0],this._slope=0,this.outputs[0][0]=this._level},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],g=this._slope,h=this._level,i=this._counter,j=a,k=this.rate.sampleRate,l=0;j;){for(b=Math.min(j,i),c=0;b>c;++c)d[l++]=h,h+=g;i-=b,j-=b,0>=i&&(i=f*k|0,i=Math.max(1,i),g=(e[l-1]-h)/i)}this._level=h,this._slope=g,this._counter=i},c=function(){var a=this.outputs[0];if(a[0]=this._level,this._level+=this._slope,--this._counter<=0){var b=this.inputs[0][0],c=this.inputs[1][0],d=c*this.rate.sampleRate|0;this._counter=d=Math.max(1,d),this._slope=(b-this._level)/d}};return a}(),d.ugen.specs.LagUD={$ar:{defaults:"in=0,lagTimeU=0.1,lagTimeD=0.1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"in=0,lagTimeU=0.1,lagTimeD=0.1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.LagUD=function(){var a=function(){this.process=b,this._lagu=void 0,this._lagd=void 0,this._b1u=0,this._b1d=0,this._y1=this.inputs[0][0],b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],h=this.inputs[2][0],i=this._y1,j=this._b1u,k=this._b1d;if(f===this._lagu&&h===this._lagd)for(b=0;a>b;++b)c=e[b],d[b]=i=c>i?c+j*(i-c):c+k*(i-c);else{this._b1u=0===f?0:Math.exp(g/(f*this.rate.sampleRate));var l=(this._b1u-j)*this.rate.slopeFactor;this._lagu=f,this._b1d=0===h?0:Math.exp(g/(h*this.rate.sampleRate));var m=(this._b1d-k)*this.rate.slopeFactor;for(this._lagd=h,b=0;a>b;++b)j+=l,k+=m,c=e[b],d[b]=i=c>i?c+j*(i-c):c+k*(i-c)}this._y1=i};return a}(),d.ugen.specs.Lag2UD=d.ugen.specs.LagUD,d.unit.specs.Lag2UD=function(){var a=function(){this.process=b,this._lagu=0,this._lagd=0,this._b1u=0,this._b1d=0,this._y1a=this.inputs[0][0],this._y1b=this.inputs[0][0],b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],h=this.inputs[2][0],i=this._y1a,j=this._y1b,k=this._b1u,l=this._b1d;if(f===this._lagu&&h===this._lagd)for(b=0;a>b;++b)c=e[b],i=c>i?c+k*(i-c):c+l*(i-c),j=i>j?i+k*(j-i):i+l*(j-i),d[b]=j;else{this._b1u=0===f?0:Math.exp(g/(f*this.rate.sampleRate));var m=(this._b1u-k)*this.rate.slopeFactor;this._lagu=f,this._b1d=0===h?0:Math.exp(g/(h*this.rate.sampleRate));var n=(this._b1d-l)*this.rate.slopeFactor;for(this._lagd=h,b=0;a>b;++b)k+=m,l+=n,c=e[b],i=c>i?c+k*(i-c):c+l*(i-c),j=i>j?i+k*(j-i):i+l*(j-i),d[b]=j}this._y1a=i,this._y1b=j};return a}(),d.ugen.specs.Lag3UD=d.ugen.specs.LagUD,d.unit.specs.Lag3UD=function(){var a=function(){this.process=b,this._lagu=0,this._lagd=0,this._b1u=0,this._b1d=0,this._y1a=this.inputs[0][0],this._y1b=this.inputs[0][0],this._y1c=this.inputs[0][0],b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],h=this.inputs[2][0],i=this._y1a,j=this._y1b,k=this._y1c,l=this._b1u,m=this._b1d;if(f===this._lagu&&h===this._lagd)for(b=0;a>b;++b)c=e[b],i=c>i?c+l*(i-c):c+m*(i-c),j=i>j?i+l*(j-i):i+m*(j-i),k=i>j?j+l*(k-j):j+m*(k-j),d[b]=k;else{this._b1u=0===f?0:Math.exp(g/(f*this.rate.sampleRate));var n=(this._b1u-l)*this.rate.slopeFactor;this._lagu=f,this._b1d=0===h?0:Math.exp(g/(h*this.rate.sampleRate));var o=(this._b1d-m)*this.rate.slopeFactor;for(this._lagd=h,b=0;a>b;++b)l+=n,m+=o,c=e[b],i=c>i?c+l*(i-c):c+m*(i-c),j=i>j?i+l*(j-i):i+m*(j-i),k=i>j?j+l*(k-j):j+m*(k-j),d[b]=k}this._y1a=i,this._y1b=j,this._y1c=k};return a}(),d.ugen.specs.VarLag={$ar:{defaults:"in=0,time=0.1,curvature=0,warp=5,start=0,mul=1,add=0",ctor:function(a,b,c,d,e,f,g){return this.multiNew(2,a,b,c,d,e).madd(f,g)}},$kr:{defaults:"in=0,time=0.1,curvature=0,warp=5,start=0,mul=1,add=0",ctor:function(a,b,c,d,e,f,g){return this.multiNew(1,a,b,c,d,e).madd(f,g)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.VarLag=function(){var a=function(){this.process=1===this.bufLength?c:b;var a=this.inputs[1][0],d=Math.max(1,a*this.rate.sampleRate|0);this._level=this.inputs[2][0],this._counter=d,this._in=this.inputs[0][0],this._slope=(this._in-this._level)/d,this._lagTime=a,this.outputs[0][0]=this._level},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0][0],f=this.inputs[1][0],g=this._slope,h=this._level,i=this._counter;if(e!==this._in?(this._counter=i=Math.max(1,f*this.rate.sampleRate|0),this._slope=g=(e-this._in)/i,this._in=e,this._lagTime=f):f!==this._lagTime&&(c=f/this._lagTime,this._counter=i=Math.max(1,this._counter*c|0),this._slope=g=this._slope/c,this._lagTime=f),e=this._in,i>0)for(b=0;a>b;++b)d[b]=h,i>0?(h+=g,i-=1):h=e;else for(b=0;a>b;++b)d[b]=h;this._level=h,this._slope=g,this._counter=i},c=function(){var a,b=this.inputs[0][0],c=this.inputs[1][0],d=this._counter;b!==this._in?(this._counter=d=Math.max(1,c*this.rate.sampleRate|0),this._slope=(b-this._level)/d,this._in=b,this._lagTime=c):c!==this._lagTime&&(0!==d&&(a=c/this._lagTime,this._counter=d=Math.max(1,this._counter*a|0),this._slope=this._slope/a),this._lagTime=c),this.outputs[0][0]=this._level,this._counter>0?(this._level+=this._slope,this._counter-=1):this._level=this._in};return a}(),d.ugen.specs.Slew={$ar:{defaults:"in=0,up=1,dn=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"in=0,up=1,dn=1,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.Slew=function(){var a=function(){this.process=b,this._level=this.inputs[0][0],b.call(this,1)},b=function(a){for(var b,c=this.outputs[0],d=this.inputs[0],e=this.rate.sampleDur,f=+this.inputs[1][0]*e,g=-this.inputs[2][0]*e,h=this._level,i=0;a>i;++i)b=d[i]-h,h+=Math.max(g,Math.min(b,f)),c[i]=h;this._level=h};return a}(),c.exports={}}),e("cc/plugins/inout",function(a,b,c){var d=a("../cc"),e=[].slice;d.ugen.specs.In={Klass:d.MultiOutUGen,$ar:{defaults:"bus=0,numChannels=1",ctor:function(a,b){return this.multiNew(2,b,a)}},$kr:{defaults:"bus=0,numChannels=1",ctor:function(a,b){return this.multiNew(1,b,a)}},init:function(a){return this.inputs=e.call(arguments,1),this.numOfInputs=this.inputs.length,this.initOutputs(a,this.rate)}},d.unit.specs.In=function(){var a=function(){this._bufLength=d.server.bufLength,2===this.calcRate?(this.process=b,this._busOffset=0):(this.process=c,this._busOffset=16*this._bufLength)},b=function(a,b){for(var c=this.outputs[0],d=b.bus,e=this._bufLength,f=this.inputs[0][0]*e|0,g=0;a>g;++g)c[g]=d[f+g]},c=function(a,b){for(var c=this.outputs[0],d=b.bus[this._busOffset+(0|this.inputs[0][0])],e=0;a>e;++e)c[e]=d};return a}(),d.ugen.specs.A2K={$kr:{defaults:"in=0",ctor:function(a){return this.multiNew(1,a)}}},d.unit.specs.A2K=function(){var a=function(){this.process=b},b=function(){this.outputs[0][0]=this.inputs[0][0]};return a}(),d.ugen.specs.K2A={$ar:{defaults:"in=0",ctor:function(a){return this.multiNew(2,a)}}},d.unit.specs.K2A=function(){var a=function(){this.process=b},b=function(a){for(var b=this.outputs[0],c=this.inputs[0][0],d=0;a>d;++d)b[d]=c};return a}(),c.exports={}}),e("cc/plugins/line",function(a,b,c){var d=a("../cc");d.ugen.specs.Line={$ar:{defaults:"start=0,end=1,dur=1,mul=1,add=0,doneAction=0",ctor:function(a,b,c,d,e,f){return this.multiNew(2,a,b,c,f).madd(d,e)}},$kr:{defaults:"start=0,end=1,dur=1,mul=1,add=0,doneAction=0",ctor:function(a,b,c,d,e,f){return this.multiNew(1,a,b,c,f).madd(d,e)}}},d.unit.specs.Line=function(){var a=function(){this.process=b;var a=this.inputs[0][0],c=this.inputs[1][0],d=this.inputs[2][0],e=Math.round(d*this.rate.sampleRate);this._counter=Math.max(1,e),0===e?(this._level=c,this._slope=0):(this._slope=(c-a)/this._counter,this._level=a+this._slope),this._endLevel=c,this._doneAction=this.inputs[3][0],this.outputs[0][0]=this._level},b=function(a){var b,c=this.outputs[0],d=this._level,e=this._counter,f=this._slope,g=a;do{var h;if(0===e){h=g,g=0;var i=this._endLevel;for(b=0;h>b;++b)c[b]=i}else{for(h=Math.min(g,e),e-=h,g-=h,b=0;h>b;++b)c[b]=d,d+=f;0===e&&this.doneAction(this._doneAction)}}while(g);this._counter=e,this._level=d};return a}(),d.ugen.specs.XLine={$ar:{defaults:"start=1,end=2,dur=1,mul=1,add=0,doneAction=0",ctor:function(a,b,c,d,e,f){return this.multiNew(2,a,b,c,f).madd(d,e)}},$kr:{defaults:"start=1,end=2,dur=1,mul=1,add=0,doneAction=0",ctor:function(a,b,c,d,e,f){return this.multiNew(1,a,b,c,f).madd(d,e)}}},d.unit.specs.XLine=function(){var a=function(){this.process=b;var a=this.inputs[0][0],c=this.inputs[1][0],d=this.inputs[2][0],e=Math.round(d*this.rate.sampleRate);0===e?(this._level=c,this._counter=0,this._growth=0):(this._counter=e,this._growth=Math.pow(c/a,1/e),this._level=a*this._growth),this._endLevel=c,this._doneAction=this.inputs[3][0],this.outputs[0][0]=this._level},b=function(a){var b,c=this.outputs[0],d=this._level,e=this._counter,f=this._growth,g=a;do{var h;if(0===e){h=g,g=0;var i=this._endLevel;for(b=0;h>b;++b)c[b]=i}else{for(h=Math.min(g,e),e-=h,g-=h,b=0;h>b;++b)c[b]=d,d*=f;0===e&&this.doneAction(this._doneAction)}}while(g);this._counter=e,this._level=d};return a}(),c.exports={}}),e("cc/plugins/noise",function(a,b,c){var d=a("../cc"),e=a("./utils"),f=e.cubicinterp;d.ugen.specs.WhiteNoise={$ar:{defaults:"mul=1,add=0",ctor:function(a,b){return this.multiNew(2).madd(a,b)}},$kr:{defaults:"mul=1,add=0",ctor:function(a,b){return this.multiNew(1).madd(a,b)}}},d.unit.specs.WhiteNoise=function(){var a=function(){this.process=b,b.call(this,1)},b=function(a){for(var b=this.outputs[0],c=0;a>c;++c)b[c]=2*Math.random()-1};return a}(),d.ugen.specs.PinkNoise=d.ugen.specs.WhiteNoise,d.unit.specs.PinkNoise=function(){var a=function(){this.process=c;for(var a=new Uint8Array(5),b=0;5>b;++b)a[b]=(1073741824*Math.random()|0)%25;this._whites=a,this._key=0,c.call(this,1)},b=31,c=function(a){var c,d,e,f,g,h=this.outputs[0],i=0|this._key,j=this._whites;for(f=0;a>f;++f){for(c=i++,i>b&&(i=0),e=c^i,g=d=0;5>g;++g)e&1<<g&&(j[g]=(1073741824*Math.random()|0)%25),d+=j[g];h[f]=.01666666*d-1}this._key=i};return a}(),d.ugen.specs.ClipNoise=d.ugen.specs.WhiteNoise,d.unit.specs.ClipNoise=function(){var a=function(){this.process=b,b.call(this,1)},b=function(a){for(var b=this.outputs[0],c=0;a>c;++c)b[c]=Math.random()<.5?-1:1};return a}(),d.ugen.specs.Dust={$ar:{defaults:"density=0,mul=1,add=0",ctor:function(a,b,c){return this.multiNew(2,a).madd(b,c)}},$kr:{defaults:"density=0,mul=1,add=0",ctor:function(a,b,c){return this.multiNew(1,a).madd(b,c)}}},d.unit.specs.Dust=function(){var a=function(){this.process=b,this._density=0,this._scale=0,this._thresh=0,b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0][0];e!==this._density?(b=this._thresh=e*this.rate.sampleDur,c=this._scale=b>0?1/b:0,this._density=e):(b=this._thresh,c=this._scale);for(var f=0;a>f;++f){var g=Math.random();d[f]=b>g?g*c:0}};return a}(),d.ugen.specs.Dust2=d.ugen.specs.Dust,d.unit.specs.Dust2=function(){var a=function(){this.process=b,this._density=0,this._scale=0,this._thresh=0,b.call(this,1)},b=function(a){var b,c,d=this.outputs[0],e=this.inputs[0][0];e!==this._density?(b=this._thresh=e*this.rate.sampleDur,c=this._scale=b>0?2/b:0,this._density=e):(b=this._thresh,c=this._scale);for(var f=0;a>f;++f){var g=Math.random();d[f]=b>g?g*c-1:0}};return a}(),d.ugen.specs.LFNoise0={$ar:{defaults:"freq=500,mul=1,add=0",ctor:function(a,b,c){return this.multiNew(2,a).madd(b,c)}},$kr:{defaults:"freq=500,mul=1,add=0",ctor:function(a,b,c){return this.multiNew(1,a).madd(b,c)}}},d.unit.specs.LFNoise0=function(){var a=function(){this.process=b,this._level=0,this._counter=0,b.call(this,1)},b=function(a){var b,c=this.outputs[0],d=this.inputs[0][0],e=this._level,f=this._counter,g=a,h=0;do{0>=f&&(f=Math.max(1,this.rate.sampleRate/Math.max(d,.001)|0),e=2*Math.random()-1);var i=Math.min(g,f);for(g-=i,f-=i,b=0;i>b;++b)c[h++]=e}while(g);this._counter=f,this._level=e};return a}(),d.ugen.specs.LFNoise1=d.ugen.specs.LFNoise0,d.unit.specs.LFNoise1=function(){var a=function(){this.process=b,this._level=2*Math.random()-1,this._counter=0,this._slope=0,b.call(this,1)},b=function(a){var b,c=this.outputs[0],d=this.inputs[0][0],e=this._level,f=this._slope,g=this._counter,h=a,i=0;do{if(0>=g){g=Math.max(1,this.rate.sampleRate/Math.max(d,.001)|0);var j=2*Math.random()-1;f=(j-e)/g}var k=Math.min(h,g);for(h-=k,g-=k,b=0;k>b;++b)c[i++]=e,e+=f}while(h);this._level=e,this._slope=f,this._counter=g};return a}(),d.ugen.specs.LFNoise2=d.ugen.specs.LFNoise0,d.unit.specs.LFNoise2=function(){var a=function(){this.process=b,this._level=0,this._counter=0,this._slope=0,this._curve=0,this._nextValue=2*Math.random()-1,this._nextMidPt=.5*this._nextValue,b.call(this,1)},b=function(a){var b,c=this.outputs[0],d=this.inputs[0][0],e=this._level,f=this._slope,g=this._curve,h=this._counter,i=a,j=0;do{if(0>=h){var k=this._nextValue;this._nextValue=2*Math.random()-1,e=this._nextMidPt,this._nextMidPt=.5*(this._nextValue+k),h=Math.max(2,this.rate.sampleRate/Math.max(d,.001)|0);var l=h;g=2*(this._nextMidPt-e-l*f)/(l*l+l)}var m=Math.min(i,h);for(i-=m,h-=m,b=0;m>b;++b)c[j++]=e,f+=g,e+=f}while(i);this._level=e,this._slope=f,this._curve=g,this._counter=h};return a}(),d.ugen.specs.LFClipNoise=d.ugen.specs.LFNoise0,d.unit.specs.LFClipNoise=function(){var a=function(){this.process=b,this._counter=0,this._level=0,b.call(this,1)},b=function(a){var b,c=this.outputs[0],d=this.inputs[0][0],e=this._level,f=this._counter,g=a,h=0;do{0>=f&&(f=Math.max(1,this.rate.sampleRate/Math.max(d,.001)|0),e=Math.random()<.5?-1:1);var i=Math.min(g,f);for(g-=i,f-=i,b=0;i>b;++b)c[h++]=e}while(g);this._counter=f,this._level=e};return a}(),d.ugen.specs.LFDNoise0=d.ugen.specs.LFNoise0,d.unit.specs.LFDNoise0=function(){var a=function(){this.process=2===this.inRates[0]?b:c,this._level=0,this._phase=0,b.call(this,1)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._level,e=this._phase,f=this.rate.sampleDur,g=0;a>g;++g)e-=c[g]*f,0>e&&(e=1+e%1,d=2*Math.random()-1),b[g]=d;this._level=d,this._phase=e},c=function(a){for(var b=this.outputs[0],c=this.inputs[0][0],d=this._level,e=this._phase,f=this.rate.sampleDur,g=f*c,h=0;a>h;++h)e-=g,0>e&&(e=1+e%1,d=2*Math.random()-1),b[h]=d;this._level=d,this._phase=e};return a}(),d.ugen.specs.LFDNoise1=d.ugen.specs.LFNoise0,d.unit.specs.LFDNoise1=function(){var a=function(){this.process=2===this.inRates[0]?b:c,this._phase=0,this._prevLevel=0,this._nextLevel=0,b.call(this,1)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._prevLevel,e=this._nextLevel,f=this._phase,g=this.rate.sampleDur,h=0;a>h;++h)f-=c[h]*g,0>f&&(f=1+f%1,d=e,e=2*Math.random()-1),b[h]=e+f*(d-e);this._prevLevel=d,this._nextLevel=e,this._phase=f},c=function(a){for(var b=this.outputs[0],c=this.inputs[0][0],d=this._prevLevel,e=this._nextLevel,f=this._phase,g=this.rate.sampleDur,h=c*g,i=0;a>i;++i)f-=h,0>f&&(f=1+f%1,d=e,e=2*Math.random()-1),b[i]=e+f*(d-e);this._prevLevel=d,this._nextLevel=e,this._phase=f};return a}(),d.ugen.specs.LFDNoise3=d.ugen.specs.LFNoise0,d.unit.specs.LFDNoise3=function(){var a=function(){this.process=2===this.inRates[0]?b:c,this._phase=0,this._levelA=0,this._levelB=0,this._levelC=0,this._levelD=0,b.call(this,1)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._levelA,e=this._levelB,g=this._levelC,h=this._levelD,i=this._phase,j=this.rate.sampleDur,k=0;a>k;++k)i-=c[k]*j,0>i&&(i=1+i%1,d=e,e=g,g=h,h=2*Math.random()-1),b[k]=f(1-i,d,e,g,h);this._levelA=d,this._levelB=e,this._levelC=g,this._levelD=h,this._phase=i},c=function(a){for(var b=this.outputs[0],c=this.inputs[0][0],d=this._levelA,e=this._levelB,g=this._levelC,h=this._levelD,i=this._phase,j=this.rate.sampleDur,k=c*j,l=0;a>l;++l)i-=k,0>i&&(i=1+i%1,d=e,e=g,g=h,h=2*Math.random()-1),b[l]=f(1-i,d,e,g,h);this._levelA=d,this._levelB=e,this._levelC=g,this._levelD=h,this._phase=i};return a}(),d.ugen.specs.LFDClipNoise=d.ugen.specs.LFNoise0,d.unit.specs.LFDClipNoise=function(){var a=function(){this.process=2===this.inRates[0]?b:c,this._level=0,this._phase=0,b.call(this,1)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._level,e=this._phase,f=this.rate.sampleDur,g=0;a>g;++g)e-=c[g]*f,0>e&&(e=1+e%1,d=Math.random()<.5?-1:1),b[g]=d;this._level=d,this._phase=e},c=function(a){for(var b=this.outputs[0],c=this.inputs[0][0],d=this._level,e=this._phase,f=this.rate.sampleDur,g=f*c,h=0;a>h;++h)e-=g,0>e&&(e=1+e%1,d=Math.random()<.5?-1:1),b[h]=d;this._level=d,this._phase=e};return a}(),c.exports={}}),e("cc/plugins/osc",function(a,b,c){var d=a("../cc"),e=a("./utils"),f=2*Math.PI,g=e.kSineSize,h=e.kSineMask,i=e.kBadValue,j=e.gSineWavetable,k=e.gSine,l=e.gInvSine,m=function(a,b){var c,d=this.outputs[0],e=this.inputs[this._freqIndex],f=this.inputs[this._phaseIndex],g=this._mask,h=this._table,i=this._cpstoinc,j=this._radtoinc,k=this._x;for(c=0;a>c;++c)d[c]=b(h,g,k+j*f[c]),k+=e[c]*i;this._x=k},n=function(a,b){var c,d=this.outputs[0],e=this.inputs[this._freqIndex],f=this.inputs[this._phaseIndex][0],g=this._mask,h=this._table,i=this._radtoinc,j=this._cpstoinc,k=this._phase,l=this._x;if(f===k)for(k*=i,c=0;a>c;++c)d[c]=b(h,g,l+k),l+=e[c]*j;else{var m=(f-k)*this.rate.slopeFactor;for(c=0;a>c;++c)d[c]=b(h,g,l+i*k),k+=m,l+=e[c]*j;this._phase=f}this._x=l},o=function(a,b){var c,d=this.outputs[0],e=this.inputs[this._freqIndex],f=this._phase*this._radtoinc,g=this._mask,h=this._table,i=this._cpstoinc,j=this._x;for(c=0;a>c;++c)d[c]=b(h,g,j+f),j+=i*e[c];this._x=j},p=function(a,b){var c,d=this.outputs[0],e=this.inputs[this._freqIndex][0],f=this.inputs[this._phaseIndex],g=this._mask,h=this._table,i=this._radtoinc,j=this._cpstoinc,k=this._freq,l=this._x;if(e===k)for(k*=j,c=0;a>c;++c)d[c]=b(h,g,l+i*f[c]),l+=k;else{var m=(e-k)*this.rate.slopeFactor;for(c=0;a>c;++c)d[c]=b(h,g,l+i*f[c]),l+=k*j,k+=m;this._freq=e}this._x=l},q=function(a,b){var c,d=this.outputs[0],e=this.inputs[this._freqIndex][0],f=this.inputs[this._phaseIndex][0],g=this._mask,h=this._table,i=this._radtoinc,j=this._cpstoinc,k=this._freq,l=this._phase,m=this._x;if(e===k&&f===l)for(k*=j,l*=i,c=0;a>c;++c)d[c]=b(h,g,m+l),m+=k;else{var n=(e-k)*this.rate.slopeFactor,o=(f-l)*this.rate.slopeFactor;for(c=0;a>c;++c)d[c]=b(h,g,m+i*l),m+=k*j,k+=n,l+=o;this._freq=e,this._phase=f}this._x=m},r=function(a,b){var c=a.buffers[0|this._bufnumIn[0]];if(c){var d=c.samples;if(d){if(this._table===d)return!0;var e=d.length,g=Math.log(e)/Math.log(2);if(g===(0|g))return e>>=b,this._radtoinc=e/f,this._cpstoinc=e*this.rate.sampleDur,this._table=d,this._mask=e-1,!0}}return!1};d.ugen.specs.Osc={$ar:{defaults:"bufnum=0,freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"bufnum=0,freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}}},d.unit.specs.Osc=function(){var a=function(){switch(this._bufnumIn=this.inputs[0],this._freq=this.inputs[1][0],this._phase=this.inputs[2][0],this._freqIndex=1,this._phaseIndex=2,this._radtoinc=0,this._cpstoinc=0,this._mask=0,this._table=null,this._x=0,this.inRates[0]){case 2:switch(this.inRates[1]){case 2:this.process=c;break;case 1:this.process=d;break;case 0:this.process=e;break;case 3:this.process=d}break;default:switch(this.inRates[1]){case 2:this.process=f;break;case 1:this.process=g;break;case 0:this.process=g;break;case 3:this.process=g}}},b=function(a,b,c){var d=(c&b)<<1;return a[d]+(c-(0|c))*a[d+1]},c=function(a,c){r.call(this,c,1)&&m.call(this,a,b)},d=function(a,c){r.call(this,c,1)&&n.call(this,a,b)},e=function(a,c){r.call(this,c,1)&&o.call(this,a,b)},f=function(a,c){r.call(this,c,1)&&p.call(this,a,b)},g=function(a,c){r.call(this,c,1)&&q.call(this,a,b)};return a}(),d.ugen.specs.SinOsc={$ar:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}}},d.unit.specs.SinOsc=function(){var a=function(){switch(this._freq=this.inputs[0][0],this._phase=this.inputs[1][0],this._freqIndex=0,this._phaseIndex=1,this._radtoinc=g/f,this._cpstoinc=g*this.rate.sampleDur,this._mask=h,this._table=j,this._x=0,this.inRates[0]){case 2:switch(this.inRates[1]){case 2:this.process=c;break;case 1:this.process=d;break;case 0:this.process=e;break;case 3:this.process=d}break;default:switch(this.inRates[1]){case 2:this.process=i;break;case 1:this.process=k;break;case 0:this.process=k;break;case 3:this.process=k}}q.call(this,1,b)},b=function(a,b,c){var d=(c&b)<<1;return a[d]+(c-(0|c))*a[d+1]},c=function(a){m.call(this,a,b)},d=function(a){n.call(this,a,b)},e=function(a){o.call(this,a,b)},i=function(a){p.call(this,a,b)},k=function(a){q.call(this,a,b)};return a}(),d.ugen.specs.SinOscFB={$ar:{defaults:"freq=440,feedback=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"freq=440,feedback=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}}},d.unit.specs.SinOscFB=function(){var a=function(){this.process=b,this._radtoinc=g/f,this._cpstoinc=g*this.rate.sampleDur,this._mask=h,this._table=j,this._freq=this.inputs[0][0],this._feedback=this.inputs[1][0]*this._radtoinc,this._y=0,this._x=0,b.call(this,1)},b=function(a){var b,c,d,e=this.outputs[0],f=this.inputs[0][0],g=this.inputs[1][0],h=this._mask,i=this._table,j=this._radtoinc,k=this._cpstoinc,l=this._freq,m=this._feedback,n=this._y,o=this._x;if(f===l&&g===m)for(l*=k,m*=j,d=0;a>d;++d)b=o+m*n,c=(b&h)<<1,e[d]=n=i[c]+(b-(0|b))*i[c+1],o+=l;else{var p=(f-l)*this.rate.slopeFactor,q=(g-m)*this.rate.slopeFactor;for(d=0;a>d;++d)b=o+j*m*n,c=(b&h)<<1,e[d]=n=i[c]+(b-(0|b))*i[c+1],o+=l*k,l+=p,m+=q;this._freq=f,this._feedback=g}this._y=n,this._x=o};return a}(),d.ugen.specs.OscN={$ar:{defaults:"bufnum=0,freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"bufnum=0,freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}}},d.unit.specs.OscN=function(){var a=function(){switch(this._bufnumIn=this.inputs[0],this._freq=this.inputs[1][0],this._phase=this.inputs[2][0],this._freqIndex=1,this._phaseIndex=2,this._radtoinc=0,this._cpstoinc=0,this._mask=0,this._table=null,this._x=0,this.inRates[0]){case 2:switch(this.inRates[1]){case 2:this.process=c;break;case 1:this.process=d;break;case 0:this.process=e;break;case 3:this.process=d}break;default:switch(this.inRates[1]){case 2:this.process=f;break;case 1:this.process=g;break;case 0:this.process=g;break;case 3:this.process=g}}},b=function(a,b,c){return a[c&b]},c=function(a,c){r.call(this,c,0)&&m.call(this,a,b)},d=function(a,c){r.call(this,c,0)&&n.call(this,a,b)},e=function(a,c){r.call(this,c,0)&&o.call(this,a,b)},f=function(a,c){r.call(this,c,0)&&p.call(this,a,b)},g=function(a,c){r.call(this,c,0)&&q.call(this,a,b)};return a}(),d.ugen.specs.FSinOsc={$ar:{defaults:"freq=440,iphase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"freq=440,iphase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}}},d.unit.specs.FSinOsc=function(){var a=function(){this.process=b,this._freq=this.inputs[0][0];var a=this.inputs[1][0],c=this._freq*this.rate.radiansPerSample;this._b1=2*Math.cos(c),this._y1=Math.sin(a),this._y2=Math.sin(a-c),this.outputs[0][0]=this._y1},b=function(){var a,b,c,d,e,f,g,h=this.outputs[0],i=this.inputs[0][0],j=this.rate;for(i!==this._freq?(this._freq=i,e=i*j.radiansPerSample,this._b1=a=2*Math.cos(e)):a=this._b1,c=this._y1,d=this._y2,g=0,f=j.filterLoops;f--;)h[g++]=b=a*c-d,h[g++]=d=a*b-c,h[g++]=c=a*d-b;for(f=j.filterRemain;f--;)h[g++]=b=a*c-d,d=c,c=b;this._y1=c,this._y2=d};return a}(),d.ugen.specs.LFSaw={$ar:{defaults:"freq=440,iphase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"freq=440,iphase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}}},d.unit.specs.LFSaw=function(){var a=function(){this.process=b,this._cpstoinc=2*this.rate.sampleDur,this._phase=this.inputs[1][0],b.call(this,1)},b=function(a){var b,c=this.outputs[0],d=this.inputs[0][0]*this._cpstoinc,e=this._phase;if(d>=0)for(b=0;a>b;++b)c[b]=e,e+=d,e>=1&&(e-=2);else for(b=0;a>b;++b)c[b]=e,e+=d,-1>=e&&(e+=2);this._phase=e};return a}(),d.ugen.specs.LFPar=d.ugen.specs.LFSaw,d.unit.specs.LFPar=function(){var a=function(){this.process=b,this._cpstoinc=4*this.rate.sampleDur,this._phase=this.inputs[1][0],b.call(this,1)},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[0][0]*this._cpstoinc,f=this._phase,g=0;a>g;++g)1>f?(b=f,c=1-b*b):3>f?(b=f-2,c=b*b-1):(f-=4,b=f,c=1-b*b),d[g]=c,f+=e;this._phase=f};return a}(),d.ugen.specs.LFCub=d.ugen.specs.LFSaw,d.unit.specs.LFCub=function(){var a=function(){this.process=b,this._cpstoinc=2*this.rate.sampleDur,this._phase=this.inputs[1][0]+.5,b.call(this,1)},b=function(a){for(var b,c=this.outputs[0],d=this.inputs[0][0]*this._cpstoinc,e=this._phase,f=0;a>f;++f)1>e?b=e:2>e?b=2-e:(e-=2,b=e),c[f]=b*b*(6-4*b)-1,e+=d;this._phase=e};return a}(),d.ugen.specs.LFTri=d.ugen.specs.LFSaw,d.unit.specs.LFTri=function(){var a=function(){this.process=b,this._cpstoinc=4*this.rate.sampleDur,this._phase=this.inputs[1][0],b.call(this,1)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0][0]*this._cpstoinc,d=this._phase,e=0;a>e;++e)b[e]=d>1?2-d:d,d+=c,d>=3&&(d-=4);this._phase=d};return a}(),d.ugen.specs.LFPulse={$ar:{defaults:"freq=440,iphase=0,width=0.5,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"freq=440,iphase=0,width=0.5,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)
}}},d.unit.specs.LFPulse=function(){var a=function(){this.process=b,this._cpstoinc=this.rate.sampleDur,this._phase=this.inputs[1][0],this._duty=this.inputs[2][0],b.call(this,1)},b=function(a){for(var b,c=this.outputs[0],d=this.inputs[0][0]*this._cpstoinc,e=this.inputs[2][0],f=this._duty,g=this._phase,h=0;a>h;++h)g>1?(g-=1,f=e,b=.5>f?1:0):b=f>g?1:0,c[h]=b,g+=d;this._duty=f,this._phase=g};return a}(),d.ugen.specs.Blip={$ar:{defaults:"freq=440,numharm=200,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}}},d.unit.specs.Blip=function(){var a=function(){this.process=b,this._freq=this.inputs[0][0],this._numharm=0|this.inputs[1][0],this._cpstoinc=g*this.rate.sampleDur*.5;var a=this._numharm,c=Math.max(1,.5*this.rate.sampleRate/this._freq|0);this._N=Math.max(1,Math.min(a,c)),this._mask=h,this._scale=.5/this._N,this._phase=0,b.call(this,1)},b=function(a){var b,c,d,e,f,g,h,j,m,n,o,p,q,r,s,t,u,v,w,x,y=this.outputs[0],z=this.inputs[0][0],A=0|this.inputs[1][0],B=this._phase,C=this._mask,D=k,E=l;if(A!==this._numharm||z!==this._freq?(b=A,d=Math.max(1,.5*this.rate.sampleRate/this._freq|0),b>d?(b=d,z=this._cpstoinc*Math.max(this._freq,z)):(1>b&&(b=1),z=this._cpstoinc*z),j=b!==this._N,e=this._N,h=this._scale,this._N=Math.max(1,Math.min(b,d)),this._scale=g=.5/b):(b=this._N,z=this._cpstoinc*z,g=this._scale,j=!1),c=2*b+1,j)for(f=2*e+1,x=this.rate.slopeFactor,w=0,v=0;a>v;++v)m=B&C,n=E[m],o=E[m+1],n===i||o===i?(n=D[m],o=D[m+1],p=B-(0|B),q=n+(o-n)*p,Math.abs(q)<5e-4?y[v]=1:(r=B*f,p=r-(0|r),m=r&C,n=D[m],o=D[m+1],s=n+(o-n)*p,t=(s/q-1)*h,r=B*c,p=r-(0|r),m=r&C,n=D[m],o=D[m+1],s=n+(o-n)*p,u=(s/q-1)*g,y[v]=t+w*(u-t))):(p=B-(0|B),q=n+(o-n)*p,r=B*f,p=r-(0|r),m=r&C,n=D[m],o=D[m+1],s=n+(o-n)*p,t=(s*q-1)*h,r=B*c,p=r-(0|r),m=r&C,n=D[m],o=D[m+1],s=n+(o-n)*p,u=(s*q-1)*g,y[v]=t+w*(u-t)),B+=z,w+=x;else for(v=0;a>v;++v)m=B&C,n=E[m],o=E[m+1],n===i||o===i?(n=D[m],o=D[m+1],p=B-(0|B),q=n+(o-n)*p,Math.abs(q)<5e-4?y[v]=1:(r=B*c,p=r-(0|r),m=r&C,n=D[m],o=D[m+1],s=n+(o-n)*p,y[v]=(s/q-1)*g)):(p=B-(0|B),q=n+(o-n)*p,r=B*c,p=r-(0|r),m=r&C,n=D[m],o=D[m+1],s=n+(o-n)*p,y[v]=(s*q-1)*g),B+=z;B>=65536&&(B-=65536),this._phase=B,this._freq=this.inputs[0][0],this._numharm=A};return a}(),d.ugen.specs.Saw={$ar:{defaults:"freq=440,mul=1,add=0",ctor:function(a,b,c){return this.multiNew(2,a).madd(b,c)}}},d.unit.specs.Saw=function(){var a=function(){this.process=b,this._freq=this.inputs[0][0],this._cpstoinc=g*this.rate.sampleDur*.5,this._N=Math.max(1,.5*this.rate.sampleRate/this._freq|0),this._mask=h,this._scale=.5/this._N,this._phase=0,this._y1=-.46,b.call(this,1)},b=function(a){var b,c,d,e,f,g,h,j,m,n,o,p,q,r,s,t,u,v,w,x=this.outputs[0],y=this.inputs[0][0],z=this._phase,A=this._y1,B=this._mask,C=k,D=l;if(y!==this._freq?(b=Math.max(1,.5*this.rate.sampleRate/y|0),b!==this._N?(y=this._cpstoinc*Math.max(this._freq,y),h=!0):(y=this._cpstoinc*y,h=!1),d=this._N,g=this._scale,this._N=b,this._scale=f=.5/b):(b=this._N,y=this._cpstoinc*y,f=this._scale,h=!1),c=2*b+1,h)for(e=2*d+1,w=this.rate.slopeFactor,v=0,u=0;a>u;++u)j=z&B,m=D[j],n=D[j+1],m===i||n===i?(m=C[j],n=C[j+1],o=z-(0|z),p=m+(n-m)*o,Math.abs(p)<5e-4?x[u]=A=1+.999*A:(q=z*e,o=q-(0|q),j=q&B,m=C[j],n=C[j+1],r=m+(n-m)*o,s=(r/p-1)*g,q=z*c,o=q-(0|q),j=q&B,m=C[j],n=C[j+1],r=m+(n-m)*o,t=(r/p-1)*f,x[u]=A=s+v*(t-s)+.999*A)):(o=z-(0|z),p=m+(n-m)*o,q=z*e,o=q-(0|q),j=q&B,m=C[j],n=C[j+1],r=m+(n-m)*o,s=(r*p-1)*g,q=z*c,o=q-(0|q),j=q&B,m=C[j],n=C[j+1],r=m+(n-m)*o,t=(r*p-1)*f,x[u]=A=s+v*(t-s)+.999*A),z+=y,v+=w;else for(u=0;a>u;++u)j=z&B,m=D[j],n=D[j+1],m===i||n===i?(m=C[j],n=C[j+1],o=z-(0|z),p=m+(n-m)*o,Math.abs(p)<5e-4?x[u]=A=1+.999*A:(q=z*c,o=q-(0|q),j=q&B,m=C[j],n=C[j+1],r=m+(n-m)*o,x[u]=A=(r/p-1)*f+.999*A)):(o=z-(0|z),p=m+(n-m)*o,q=z*c,o=q-(0|q),j=q&B,m=C[j],n=C[j+1],r=m+(n-m)*o,x[u]=A=(r*p-1)*f+.999*A),z+=y;z>=65536&&(z-=65536),this._y1=A,this._phase=z,this._freq=this.inputs[0][0]};return a}(),d.ugen.specs.Pulse={$ar:{defaults:"freq=440,width=0.5,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}}},d.unit.specs.Pulse=function(){var a=function(){this.process=b,this._freq=this.inputs[0][0],this._cpstoinc=g*this.rate.sampleDur*.5,this._N=Math.max(1,.5*this.rate.sampleRate/this._freq|0),this._mask=h,this._scale=.5/this._N,this._phase=0,this._duty=0,this._y1=0},b=function(a){var b,c,d,e,f,h,j,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=this.outputs[0],F=this.inputs[0][0],G=this._duty,H=this._phase,I=this._y1,J=this._mask,K=k,L=l;if(F!==this._freq?(b=Math.max(1,.5*this.rate.sampleRate/F|0),b!==this._N?(F=this._cpstoinc*Math.max(this._freq,F),j=!0):(F=this._cpstoinc*F,j=!1),d=this._N,h=this._scale,this._N=b,this._scale=f=.5/b):(b=this._N,F=this._cpstoinc*F,f=this._scale,j=!1),c=2*b+1,w=this.inputs[1][0],x=(w-G)*this.rate.slopeFactor,y=1/f+1,j)for(e=2*d+1,D=this.rate.slopeFactor,C=0,B=0;a>B;++B)m=H&J,n=L[m],o=L[m+1],n===i||o===i?(n=K[m],o=K[m+1],p=H-(0|H),q=n+(o-n)*p,Math.abs(q)<5e-4?z=1:(r=H*e,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,t=(s/q-1)*h,r=H*c,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,u=(s/q-1)*f,z=t+C*(u-t))):(p=H-(0|H),q=n+(o-n)*p,r=H*e,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,t=(s*q-1)*h,r=H*c,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,u=(s*q-1)*f,z=t+C*(u-t)),v=H+G*g*.5,m=v&J,n=L[m],o=L[m+1],n===i||o===i?(n=K[m],o=K[m+1],p=v-(0|v),q=n+(o-n)*p,Math.abs(q)<5e-4?A=1:(r=v*e,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,t=(s/q-1)*h,r=v*c,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,u=(s/q-1)*f,A=t+C*(u-t))):(p=v-(0|v),q=n+(o-n)*p,r=v*e,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,t=(s*q-1)*h,r=v*c,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,u=(s*q-1)*f,A=t+C*(u-t)),E[B]=I=z-A+.999*I,H+=F,G+=x,C+=D;else for(B=0;a>B;++B)m=H&J,n=L[m],o=L[m+1],n===i||o===i?(n=K[m],o=K[m+1],p=H-(0|H),q=n+(o-n)*p,Math.abs(q)<5e-4?z=y:(r=H*c,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,z=s/q)):(p=H-(0|H),q=n+(o-n)*p,r=H*c,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,z=s*q),v=H+G*g*.5,m=v&J,n=L[m],o=L[m+1],n===i||o===i?(n=K[m],o=K[m+1],p=v-(0|v),q=n+(o-n)*p,Math.abs(q)<5e-4?A=y:(r=v*c,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,A=s/q)):(p=v-(0|v),q=n+(o-n)*p,r=v*c,p=r-(0|r),m=r&J,n=K[m],o=K[m+1],s=n+(o-n)*p,A=s*q),E[B]=I=(z-A)*f+.999*I,H+=F,G+=x;H>=65536&&(H-=65536),this._y1=I,this._phase=H,this._freq=this.inputs[0][0],this._duty=w};return a}(),d.ugen.specs.Impulse={$ar:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}}},d.unit.specs.Impulse=function(){var a=function(){this._phase=this.inputs[1][0],2===this.inRates[0]?(this.process=b,0!==this.inRates[1]&&(this._phase=1)):(this.process=c,0!==this.inRates[1]&&(this._phase=1)),this._phaseOffset=0,this._cpstoinc=this.rate.sampleDur,0===this._phase&&(this._phase=1)},b=function(a){var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1][0],e=this._cpstoinc,f=this._phase,g=this._phaseOffset,h=(d-g)*this.rate.slopeFactor;f+=g;for(var i=0;a>i;++i)f+=h,f>=1?(f-=1,b[i]=1):b[i]=0,f+=c[i]*e;this._phase=f-d,this._phaseOffset=d},c=function(a){var b=this.outputs[0],c=this.inputs[0][0]*this._cpstoinc,d=this.inputs[1][0],e=this._phase,f=this._phaseOffset,g=(d-f)*this.rate.slopeFactor;e+=f;for(var h=0;a>h;++h)e+=g,e>=1?(e-=1,b[h]=1):b[h]=0,e+=c;this._phase=e-d,this._phaseOffset=d};return a}(),d.ugen.specs.TrigImpulse={$ar:{defaults:"trig=0,freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c).madd(d,e)}},$kr:{defaults:"trig=0,freq=440,phase=0,mul=1,add=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c).madd(d,e)}}},d.unit.specs.TrigImpulse=function(){var a=function(){this._phase=this.inputs[2][0],2===this.inRates[1]?(this.process=b,0!==this.inRates[2]&&(this._phase=1)):(this.process=c,0!==this.inRates[2]&&(this._phase=1)),this._phaseOffset=0,this._cpstoinc=this.rate.sampleDur,0===this._phase&&(this._phase=1),this._prevTrig=this.inputs[0][0]},b=function(a){var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2][0],f=this._cpstoinc,g=this._phase,h=this._phaseOffset,i=(e-h)*this.rate.slopeFactor,j=this._prevTrig;c>0&&0>=j&&(g=e,0!==this.inRates[2]&&(g=1),0===g&&(g=1)),g+=h;for(var k=0;a>k;++k)g+=i,g>=1?(g-=1,b[k]=1):b[k]=0,g+=d[k]*f;this._phase=g-e,this._phaseOffset=e,this._prevTrig=c},c=function(a){var b=this.outputs[0],c=this.inputs[0][0],d=this.inputs[1][0]*this._cpstoinc,e=this.inputs[2][0],f=this._phase,g=this._phaseOffset,h=(e-g)*this.rate.slopeFactor,i=this._prevTrig;c>0&&0>=i&&(f=e,0!==this.inRates[2]&&(f=1),0===f&&(f=1)),f+=g;for(var j=0;a>j;++j)f+=h,f>=1?(f-=1,b[j]=1):b[j]=0,f+=d;this._phase=f-e,this._phaseOffset=e,this._prevTrig=c};return a}(),d.ugen.specs.SyncSaw={$ar:{defaults:"syncFreq=440,sawFreq=440,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(2,a,b).madd(c,d)}},$kr:{defaults:"syncFreq=440,sawFreq=440,mul=1,add=0",ctor:function(a,b,c,d){return this.multiNew(1,a,b).madd(c,d)}}},d.unit.specs.SyncSaw=function(){var a=function(){this.process=2===this.inRates[0]?2===this.inRates[1]?b:c:2===this.inRates[1]?d:e,this._freqMul=2*this.rate.sampleDur,this._phase1=0,this._phase2=0,e.call(this,1)},b=function(a){for(var b,c,d,e=this.outputs[0],f=this.inputs[0],g=this.inputs[1],h=this._freqMul,i=this._phase1,j=this._phase2,k=0;a>k;++k)b=f[k]*h,c=g[k]*h,d=j,j+=c,j>=1&&(j-=2),i+=b,i>=1&&(i-=2,j=(i+1)*c/b-1),e[k]=d;this._phase1=i,this._phase2=j},c=function(a){var b,c,d,e=this.outputs[0],f=this.inputs[0],g=this.inputs[1],h=this._freqMul,i=this._phase1,j=this._phase2;c=g[0]*h;for(var k=0;a>k;++k)b=f[k]*h,d=j,j+=c,j>=1&&(j-=2),i+=b,i>=1&&(i-=2,j=(i+1)*c/b-1),e[k]=d;this._phase1=i,this._phase2=j},d=function(a){var b,c,d,e=this.outputs[0],f=this.inputs[0],g=this.inputs[1],h=this._freqMul,i=this._phase1,j=this._phase2;b=f[0]*h;for(var k=0;a>k;++k)c=g[k]*h,d=j,j+=c,j>=1&&(j-=2),i+=b,i>=1&&(i-=2,j=(i+1)*c/b-1),e[k]=d;this._phase1=i,this._phase2=j},e=function(a){for(var b,c=this.outputs[0],d=this.inputs[0][0]*this._freqMul,e=this.inputs[1][0]*this._freqMul,f=this._phase1,g=this._phase2,h=0;a>h;++h)b=g,g+=e,g>=1&&(g-=2),f+=d,f>=1&&(f-=2,g=(f+1)*e/d-1),c[h]=b;this._phase1=f,this._phase2=g};return a}(),d.ugen.specs.Select={$ar:{defaults:"which=0,array=[]",ctor:function(a,b){return this.multiNewList([2,a].concat(b))}},$kr:{defaults:"which=0,array=[]",ctor:function(a,b){return this.multiNewList([1,a].concat(b))}},checkInputs:function(){if(2===this.rate)for(var a=this.inputs,b=1,c=a.length;c>b;++b)if(2!==a[b].rate)throw new Error("input was not audio rate:"+a[b].toString())}},d.unit.specs.Select=function(){var a=function(){this.process=1===this.bufLength?d:2===this.inRates[0]?b:c,this._maxIndex=this.inputs.length-1,d.call(this)},b=function(a){for(var b,c=this.outputs[0],d=this.inputs,e=d[0],f=this._maxIndex,g=0;a>g;++g)b=Math.max(1,Math.min((0|e[g])+1,f)),c[g]=d[b][g]},c=function(){var a=Math.max(1,Math.min((0|this.inputs[0][0])+1,this._maxIndex));this.outputs[0].set(this.inputs[a])},d=function(){var a=Math.max(1,Math.min((0|this.inputs[0][0])+1,this._maxIndex));this.outputs[0][0]=this.inputs[a][0]};return a}(),d.ugen.specs.DC={$ir:{defaults:"in=0",ctor:function(a){return this.multiNew(0,a)}},$kr:{defaults:"in=0",ctor:function(a){return this.multiNew(1,a)}},$ar:{defaults:"in=0",ctor:function(a){return this.multiNew(2,a)}}},d.unit.specs.DC=function(){var a=function(){for(var a=this.outputs[0],b=this.inputs[0][0],c=a.length;c--;)a[c]=b};return a}(),d.ugen.specs.Silent={$ir:{ctor:function(){return d.global.DC.ir(0)}},$kr:{ctor:function(){return d.global.DC.kr(0)}},$ar:{ctor:function(){return d.global.DC.ar(0)}}},c.exports={}}),e("cc/plugins/pan",function(a,b,c){var d=a("../cc"),e=a("./utils").gSine,f=[].slice;d.ugen.specs.Pan2={Klass:d.MultiOutUGen,$ar:{defaults:"in=0,pos=0,level=1",ctor:function(a,b,c){return this.multiNew(2,a,b,c)}},$kr:{defaults:"in=0,pos=0,level=1",ctor:function(a,b,c){return this.multiNew(1,a,b,c)}},init:function(){return this.inputs=f.call(arguments),this.channels=[d.createOutputProxy(this.rate,this,0),d.createOutputProxy(this.rate,this,1)],this.numOfOutputs=2,this.channels},checkInputs:function(){return d.ugen.checkNInputs.call(this,1)}},d.unit.specs.Pan2=function(){var a=function(){this.process=2===this.inRates[1]?b:c,this._pos=this.inputs[1][0],this._level=this.inputs[2][0];var a=1024*this._pos+1024+.5|0;a=Math.max(0,Math.min(a,2048)),this._leftAmp=this._level*e[2048-a],this._rightAmp=this._level*e[a],b.call(this,1)},b=function(a){var b,c,d,f,g,h=this.outputs[0],i=this.outputs[1],j=this.inputs[0],k=this.inputs[1],l=this.inputs[2][0],m=this._level;if(m!==l){var n=(l-m)*this.rate.slopeFactor;for(b=0;a>b;++b)d=1024*k[b]+1024+.5|0,d=Math.max(0,Math.min(d,2048)),f=m*e[2048-d],g=m*e[d],c=j[b],h[b]=c*f,i[b]=c*g,m+=n;this._level=l}else for(b=0;a>b;++b)d=1024*k[b]+1024+.5|0,d=Math.max(0,Math.min(d,2048)),f=m*e[2048-d],g=m*e[d],c=j[b],h[b]=c*f,i[b]=c*g},c=function(a){var b,c,d=this.outputs[0],f=this.outputs[1],g=this.inputs[0],h=this.inputs[1][0],i=this.inputs[2][0],j=this._leftAmp,k=this._rightAmp;if(this._pos!==h||this._level!==i){var l=1024*h+1024+.5|0;l=Math.max(0,Math.min(l,2048));var m=i*e[2048-l],n=i*e[l],o=this.rate.slopeFactor,p=(m-j)*o,q=(n-k)*o;for(b=0;a>b;++b)c=g[b],d[b]=c*j,f[b]=c*k,j+=p,k+=q;this._pos=h,this._level=i,this._leftAmp=m,this._rightAmp=n}else for(b=0;a>b;++b)c=g[b],d[b]=c*j,f[b]=c*k};return a}(),d.ugen.specs.XFade2={$ar:{defaults:"inA=0,inB=0,pan=0,level=1",ctor:function(a,b,c,d){return this.multiNew(2,a,b,c,d)}},$kr:{defaults:"inA=0,inB=0,pan=0,level=1",ctor:function(a,b,c,d){return this.multiNew(1,a,b,c,d)}},checkInputs:function(){return d.ugen.checkNInputs.call(this,2)}},d.unit.specs.XFade2=function(){var a=function(){this.process=2===this.inRates[2]?b:c,this._pos=this.inputs[2][0],this._level=this.inputs[3][0];var a=1024*this._pos+1024+.5|0;a=Math.max(0,Math.min(a,2048)),this._leftAmp=this._level*e[2048-a],this._rightAmp=this._level*e[a],c.call(this,1)},b=function(a){var b,c,d=this.outputs[0],f=this.inputs[0],g=this.inputs[1],h=this.inputs[2],i=this.inputs[3][0],j=this._leftAmp,k=this._rightAmp,l=this._level;if(l!==i){var m=(i-this._level)*this.rate.slopeFactor;for(b=0;a>b;++b)c=1024*h[b]+1024+.5|0,c=Math.max(0,Math.min(c,2048)),j=l*e[2048-c],k=l*e[c],d[b]=f[b]*j+g[b]*k,l+=m;this._level=i}else for(b=0;a>b;++b)c=1024*h[b]+1024+.5|0,c=Math.max(0,Math.min(c,2048)),j=l*e[2048-c],k=l*e[c],d[b]=f[b]*j+g[b]*k},c=function(a){var b,c=this.outputs[0],d=this.inputs[0],f=this.inputs[1],g=this.inputs[2][0],h=this.inputs[3][0],i=this._leftAmp,j=this._rightAmp;if(this._pos!==g||this._level!==h){var k=1024*g+1024+.5|0;k=Math.max(0,Math.min(k,2048));var l=h*e[2048-k],m=h*e[k],n=this.rate.slopeFactor,o=(l-i)*n,p=(m-j)*n;for(b=0;a>b;++b)c[b]=d[b]*i+f[b]*j,i+=o,j+=p;this._pos=g,this._level=h,this._leftAmp=l,this._rightAmp=m}else for(b=0;a>b;++b)c[b]=d[b]*i+f[b]*j};return a}(),d.ugen.specs.LinXFade2={$ar:{defaults:"inA=0,inB=0,pan=0,level=1",ctor:function(a,b,c,d){return this.multiNew(2,a,b,c).__mul__(d)}},$kr:{defaults:"inA=0,inB=0,pan=0,level=1",ctor:function(a,b,c,d){return this.multiNew(1,a,b,c).__mul__(d)}},checkInputs:function(){return d.ugen.checkNInputs.call(this,2)}},d.unit.specs.LinXFade2=function(){var a=function(){this.process=2===this.inRates[2]?b:c,this._pos=Math.max(-1,Math.min(this.inputs[2][0],1)),this._amp=.5*this._pos+.5,b.call(this,1)},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1],g=this.inputs[2],h=0;a>h;++h)b=Math.max(-1,Math.min(g[h],1)),c=.5*b+.5,d[h]=e[h]+c*(f[h]-e[h])},c=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1],g=this.inputs[2][0],h=this._amp;if(this._pos!==g){c=Math.max(-1,Math.min(g,1));var i=.5*c+.5,j=(i-h)*this.rate.slopeFactor;for(b=0;a>b;++b)d[b]=e[b]+h*(f[b]-e[b]),h+=j;this._pos=g,this._amp=i}else for(b=0;a>b;++b)d[b]=e[b]+h*(f[b]-e[b])};return a}(),c.exports={}}),e("cc/plugins/random",function(a,b,c){var d=a("../cc");d.ugen.specs.Rand={$new:{defaults:"lo=0,hi=1",ctor:function(a,b){return this.multiNew(0,a,b)}}},d.unit.specs.Rand=function(){var a=function(){var a=this.inputs[0][0],b=this.inputs[1][0],c=b-a;this.outputs[0][0]=Math.random()*c+a};return a}(),d.ugen.specs.IRand={$new:{defaults:"lo=0,hi=127",ctor:function(a,b){return this.multiNew(0,a,b)}}},d.unit.specs.IRand=function(){var a=function(){var a=this.inputs[0][0],b=this.inputs[1][0],c=b-a;this.outputs[0][0]=Math.random()*c+a|0};return a}(),d.ugen.specs.TRand={$ar:{defaults:"lo=0,hi=1,trig=1",ctor:function(a,b,c){return this.multiNew(2,a,b,c)}},$kr:{defaults:"lo=0,hi=1,trig=1",ctor:function(a,b,c){return this.multiNew(1,a,b,c)}}},d.unit.specs.TRand=function(){var a=function(){this.process=2===this.calcRate?c:b;var a=this.inputs[0][0],d=this.inputs[1][0],e=d-a;this.outputs[0][0]=this._value=Math.random()*e+a,this._trig=this.inputs[2][0]},b=function(){var a=this.outputs[0],b=this.inputs[2][0];if(b>0&&this._trig<=0){var c=this.inputs[0][0],d=this.inputs[1][0],e=d-c;a[0]=this._value=Math.random()*e+c}else a[0]=this._value;this._trig=b},c=function(a){for(var b,c=this.outputs[0],d=this.inputs[2],e=this._value,f=this._trig,g=0;a>g;++g){if(b=d[g],b>0&&0>=f){var h=this.inputs[0][0],i=this.inputs[1][0],j=i-h;c[g]=e=Math.random()*j+h}else c[g]=e;f=b}this._trig=b,this._value=e};return a}(),d.ugen.specs.TIRand={$ar:{defaults:"lo=0,hi=127,trig=1",ctor:function(a,b,c){return this.multiNew(2,a,b,c)}},$kr:{defaults:"lo=0,hi=127,trig=1",ctor:function(a,b,c){return this.multiNew(1,a,b,c)}}},d.unit.specs.TIRand=function(){var a=function(){this.process=2===this.calcRate?c:b;var a=0|this.inputs[0][0],d=0|this.inputs[1][0],e=d-a;this.outputs[0][0]=this._value=Math.random()*e+a|0,this._trig=this.inputs[2][0]},b=function(){var a=this.outputs[0],b=this.inputs[2][0];if(b>0&&this._trig<=0){var c=0|this.inputs[0][0],d=0|this.inputs[1][0],e=d-c;a[0]=this._value=Math.random()*e+c|0}else a[0]=this._value;this._trig=b},c=function(a){for(var b,c=this.outputs[0],d=this.inputs[2],e=this._value,f=this._trig,g=0;a>g;++g){if(b=d[g],b>0&&0>=f){var h=0|this.inputs[0][0],i=0|this.inputs[1][0],j=i-h;c[g]=e=Math.random()*j+h|0}else c[g]=e;f=b}this._trig=b,this._value=e};return a}(),d.ugen.specs.LinRand={$new:{defaults:"lo=0,hi=1,minmax=0",ctor:function(a,b,c){return this.multiNew(0,a,b,c)}}},d.unit.specs.LinRand=function(){var a=function(){var a=this.inputs[0][0],b=this.inputs[1][0],c=0|this.inputs[2][0],d=b-a,e=Math.random(),f=Math.random();this.outputs[0][0]=0>=c?Math.min(e,f)*d+a:Math.max(e,f)*d+a};return a}(),d.ugen.specs.NRand={$new:{defaults:"lo=0,hi=1,n=0",ctor:function(a,b,c){return this.multiNew(0,a,b,c)}}},d.unit.specs.NRand=function(){var a=function(){var a=this.inputs[0][0],b=this.inputs[1][0],c=0|this.inputs[2][0];if(c){for(var d=b-a,e=0,f=0;c>f;++f)e+=Math.random();this.outputs[0][0]=e/c*d+a}};return a}(),d.ugen.specs.ExpRand={$new:{defaults:"lo=0.01,hi=1",ctor:function(a,b){return this.multiNew(0,a,b)}}},d.unit.specs.ExpRand=function(){var a=function(){var a=this.inputs[0][0]||.01,b=this.inputs[1][0],c=b/a;this.outputs[0][0]=Math.pow(c,Math.random())*a};return a}(),d.ugen.specs.TExpRand={$ar:{defaults:"lo=0.01,hi=1,trig=1",ctor:function(a,b,c){return this.multiNew(2,a,b,c)}},$kr:{defaults:"lo=0.01,hi=1,trig=1",ctor:function(a,b,c){return this.multiNew(1,a,b,c)}}},d.unit.specs.TExpRand=function(){var a=function(){this.process=2===this.calcRate?c:b;var a=this.inputs[0][0]||.01,d=this.inputs[1][0],e=d/a;this.outputs[0][0]=this._value=Math.pow(e,Math.random())*a,this._trig=this.inputs[2][0]},b=function(){var a=this.outputs[0],b=this.inputs[2][0];if(b>0&&this._trig<=0){var c=this.inputs[0][0]||.01,d=this.inputs[1][0],e=d/c;a[0]=this._value=Math.pow(e,Math.random())*c}else a[0]=this._value;this._trig=b},c=function(a){for(var b,c=this.outputs[0],d=this.inputs[2],e=this._value,f=this._trig,g=0;a>g;++g){if(b=d[g],b>0&&0>=f){var h=this.inputs[0][0]||.01,i=this.inputs[1][0],j=i/h;c[g]=e=Math.pow(j,Math.random())*h}else c[g]=e;f=b}this._trig=b,this._value=e};return a}(),d.ugen.specs.CoinGate={$ar:{defaults:"prob=0,in=0",ctor:function(a,b){return this.multiNew(2,a,b)}},$kr:{defaults:"prob=0,in=0",ctor:function(a,b){return this.multiNew(1,a,b)}}},d.unit.specs.CoinGate=function(){var a=function(){this.process=2===this.calcRate?b:c,this._trig=this.inputs[1][0]},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[1],f=this._trig,g=this.inputs[0][0],h=0;a>h;++h)b=e[h],c=0,0>=f&&b>0&&Math.random()<g&&(c=b),f=b,d[h]=c;this._trig=f},c=function(){var a=this.inputs[1][0],b=0;a>0&&this._trig<=0&&Math.random()<this.inputs[0][0]&&(b=a),this.outputs[0][0]=b,this._trig=a};return a}(),c.exports={}}),e("cc/plugins/range",function(a,b,c){var d=a("../cc");d.ugen.specs.InRange={$ar:{defaults:"in,lo=0,hi=1",ctor:function(a,b,c){return this.multiNew(2,a,b,c)}},$kr:{defaults:"in,lo=0,hi=1",ctor:function(a,b,c){return this.multiNew(1,a,b,c)}},$ir:{defaults:"in,lo=0,hi=1",ctor:function(a,b,c){return this.multiNew(0,a,b,c)}}},d.unit.specs.InRange=function(){var a=function(){this.process=b,this.process(1)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=0;a>f;++f){var g=c[f];b[f]=d[f]<=g&&g<=e[f]?1:0}};return a}(),d.ugen.specs.Clip=d.ugen.specs.InRange,d.unit.specs.Clip=function(){var a=function(){this.process=2===this.inRates[1]&&2===this.inRates[2]?b:c,this._lo=this.inputs[1][0],this._hi=this.inputs[2][0],this.process(1)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=0;a>f;++f)b[f]=Math.max(d[f],Math.min(c[f],e[f]))},c=function(a){var b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],f=this.inputs[2][0],g=this._lo,h=this._hi;if(e===g&&f===h)for(b=0;a>b;++b)c[b]=Math.max(g,Math.min(d[b],h));else{var i=(e-g)*this.rate.slopeFactor,j=(f-h)*this.rate.slopeFactor;for(b=0;a>b;++b)g+=i,h+=j,c[b]=Math.max(g,Math.min(d[b],h));this._lo=e,this._hi=f}};return a}(),d.ugen.specs.Fold=d.ugen.specs.InRange,d.unit.specs.Fold=function(){var a=function(a,b,c){var d,e,f,g;if(d=a-b,a>=c){if(a=c+c-a,a>=b)return a}else{if(!(b>a))return a;if(a=b+b-a,c>a)return a}return c===b?b:(f=c-b,g=f+f,e=d-g*Math.floor(d/g),e>=f&&(e=g-e),e+b)},b=function(){this.process=2===this.inRates[1]&&2===this.inRates[2]?c:d,this._lo=this.inputs[1][0],this._hi=this.inputs[2][0],this.process(1)},c=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=0;a>f;++f)b[f]=Math.max(d[f],Math.min(c[f],e[f]))},d=function(b){var c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],g=this.inputs[2][0],h=this._lo,i=this._hi;if(f===h&&g===i)for(c=0;b>c;++c)d[c]=a(e[c],h,i);else{var j=(f-h)*this.rate.slopeFactor,k=(g-i)*this.rate.slopeFactor;for(c=0;b>c;++c)h+=j,i+=k,d[c]=a(e[c],h,i);this._lo=f,this._hi=g}};return b}(),d.ugen.specs.Wrap=d.ugen.specs.InRange,d.unit.specs.Wrap=function(){var a=function(b,c,d){if(c>d)return a(b,d,c);var e;if(b>=d){if(e=d-c,b-=e,d>b)return b}else{if(!(c>b))return b;if(e=d-c,b+=e,b>=c)return b}return d===c?c:b-e*Math.floor((b-c)/e)},b=function(){this.process=2===this.inRates[1]&&2===this.inRates[2]?c:d,this._lo=this.inputs[1][0],this._hi=this.inputs[2][0],this.process(1)},c=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=0;a>f;++f)b[f]=Math.max(d[f],Math.min(c[f],e[f]))},d=function(b){var c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],g=this.inputs[2][0],h=this._lo,i=this._hi;if(f===h&&g===i)for(c=0;b>c;++c)d[c]=a(e[c],h,i);else{var j=(f-h)*this.rate.slopeFactor,k=(g-i)*this.rate.slopeFactor;for(c=0;b>c;++c)h+=j,i+=k,d[c]=a(e[c],h,i);this._lo=f,this._hi=g}};return b}();var e=function(a,b,c,e,f){var g=f.__sub__(e).__div__(c.__sub__(b)),h=e.__sub__(g.__mul__(b));return d.createMulAdd(a,g,h)};d.ugen.specs.LinLin={$ar:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:e},$kr:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:e},$ir:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:e}};var f=function(a,b,c,d,e){return e.__div__(d).pow(a.__sub__(b).__div__(c.__sub__(b))).__mul__(d)};d.ugen.specs.LinExp={$ar:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:f},$kr:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:f},$ir:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:f}};var g=function(a,b,c,d,e){return a.__div__(b).log().__div__(c.__div__(b).log()).__mul__(e.__sub__(d)).__add__(d)};d.ugen.specs.ExpLin={$ar:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:g},$kr:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:g},$ir:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:g}};var h=function(a,b,c,d,e){return e.__div__(d).pow(a.__div__(b).log().__div__(c.__div__(b).log())).__mul__(d)};d.ugen.specs.ExpExp={$ar:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:h},$kr:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:h},$ir:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:h}},c.exports={}}),e("cc/plugins/reverb",function(a,b,c){var d=a("../cc");d.ugen.specs.FreeVerb={checkInputs:d.ugen.checkSameRateAsFirstInput,$ar:{defaults:"in=0,mix=0.33,room=0.5,damp=0.5,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.multiNew(2,a,b,c,d).madd(e,f)}},$kr:{defaults:"in=0,mix=0.33,room=0.5,damp=0.5,mul=1,add=0",ctor:function(a,b,c,d,e,f){return this.multiNew(1,a,b,c,d).madd(e,f)}}},d.unit.specs.FreeVerb=function(){var a=function(){this.process=b,this._iota0=0,this._iota1=0,this._iota2=0,this._iota3=0,this._iota4=0,this._iota5=0,this._iota6=0,this._iota7=0,this._iota8=0,this._iota9=0,this._iota10=0,this._iota11=0,this._R0_0=0,this._R1_0=0,this._R2_0=0,this._R3_0=0,this._R4_0=0,this._R5_0=0,this._R6_0=0,this._R7_0=0,this._R8_0=0,this._R9_0=0,this._R10_0=0,this._R11_0=0,this._R12_0=0,this._R13_0=0,this._R14_0=0,this._R15_0=0,this._R16_0=0,this._R17_0=0,this._R18_0=0,this._R19_0=0,this._R0_1=0,this._R1_1=0,this._R2_1=0,this._R3_1=0,this._dline0=new Float32Array(225),this._dline1=new Float32Array(341),this._dline2=new Float32Array(441),this._dline3=new Float32Array(556),this._dline4=new Float32Array(1617),this._dline5=new Float32Array(1557),this._dline6=new Float32Array(1491),this._dline7=new Float32Array(1422),this._dline8=new Float32Array(1277),this._dline9=new Float32Array(1116),this._dline10=new Float32Array(1188),this._dline11=new Float32Array(1356),b.call(this,1)},b=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=Math.max(0,Math.min(this.inputs[1][0],1)),e=1-d,f=Math.max(0,Math.min(this.inputs[2][0],1)),g=.7+.28*f,h=Math.max(0,Math.min(this.inputs[3][0],1)),i=.4*h,j=1-i,k=this._iota0,l=this._iota1,m=this._iota2,n=this._iota3,o=this._iota4,p=this._iota5,q=this._iota6,r=this._iota7,s=this._iota8,t=this._iota9,u=this._iota10,v=this._iota11,w=this._R0_1,x=this._R1_1,y=this._R2_1,z=this._R3_1,A=this._R0_0,B=this._R1_0,C=this._R2_0,D=this._R3_0,E=this._R4_0,F=this._R5_0,G=this._R6_0,H=this._R7_0,I=this._R8_0,J=this._R9_0,K=this._R10_0,L=this._R11_0,M=this._R12_0,N=this._R13_0,O=this._R14_0,P=this._R15_0,Q=this._R16_0,R=this._R17_0,S=this._R18_0,T=this._R19_0,U=this._dline0,V=this._dline1,W=this._dline2,X=this._dline3,Y=this._dline4,Z=this._dline5,$=this._dline6,_=this._dline7,ab=this._dline8,bb=this._dline9,cb=this._dline10,db=this._dline11,eb=0;a>eb;++eb){var fb=c[eb],gb=.015*fb;225===++k&&(k=0);var hb=U[k];341===++l&&(l=0);var ib=V[l];441===++m&&(m=0);var jb=W[m];556===++n&&(n=0);var kb=X[n];1617===++o&&(o=0);var lb=Y[o];F=j*E+i*F,Y[o]=gb+g*F,E=lb,1557===++p&&(p=0);var mb=Z[p];H=j*G+i*H,Z[p]=gb+g*H,G=mb,1491===++q&&(q=0);var nb=$[q];J=j*I+i*J,$[q]=gb+g*J,I=nb,1422===++r&&(r=0);var ob=_[r];L=j*K+i*L,_[r]=gb+g*L,K=ob,1277===++s&&(s=0);var pb=ab[s];N=j*M+i*N,ab[s]=gb+g*N,M=pb,1116===++t&&(t=0);var qb=bb[t];P=j*O+i*P,bb[t]=gb+g*P,O=qb,1188===++u&&(u=0);var rb=cb[u];R=j*Q+i*R,cb[u]=gb+g*R,Q=rb,1356===++v&&(v=0);var sb=db[v];T=j*S+i*T,db[v]=gb+g*T,S=sb;var tb=Q+S;X[n]=.5*D+E+(G+I)+(K+M+(O+tb)),D=kb,z=D-(E+G+(I+K)+(M+O+tb)),W[m]=.5*C+z,C=jb,y=C-z,V[l]=.5*B+y,B=ib,x=B-y,U[k]=.5*A+x,A=hb,w=A-x,b[eb]=e*fb+d*w}this._iota0=k,this._iota1=l,this._iota2=m,this._iota3=n,this._iota4=o,this._iota5=p,this._iota6=q,this._iota7=r,this._iota8=s,this._iota9=t,this._iota10=u,this._iota11=v,this._R0_1=w,this._R1_1=x,this._R2_1=y,this._R3_1=z,this._R0_0=A,this._R1_0=B,this._R2_0=C,this._R3_0=D,this._R4_0=E,this._R5_0=F,this._R6_0=G,this._R7_0=H,this._R8_0=I,this._R9_0=J,this._R10_0=K,this._R11_0=L,this._R12_0=M,this._R13_0=N,this._R14_0=O,this._R15_0=P,this._R16_0=Q,this._R17_0=R,this._R18_0=S,this._R19_0=T};return a}(),c.exports={}}),e("cc/plugins/trig",function(a,b,c){var d=a("../cc"),e=a("./utils").sc_wrap;d.ugen.specs.Trig={$ar:{defaults:"in=0,dur=0.1",ctor:function(a,b){return this.multiNew(2,a,b)}},$kr:{defaults:"in=0,dur=0.1",ctor:function(a,b){return this.multiNew(1,a,b)}},signalRange:1},d.unit.specs.Trig=function(){var a=function(){this.process=2===this.calcRate&&2!==this.inRates[0]?c:b,this._counter=0,this._trig=0,this._level=0,this.outputs[0][0]=0},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],g=this.rate.sampleRate,h=this._trig,i=this._level,j=this._counter,k=0;a>k;++k)b=e[k],j>0?c=--j?i:0:b>0&&0>=h?(j=Math.max(1,f*g+.5|0),c=i=b):c=0,d[k]=c,h=b;this._trig=h,this._counter=j,this._level=i},c=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],g=this.rate.sampleRate,h=this._trig,i=this._level,j=this._counter;b=e[0];for(var k=0;a>k;++k)j>0?c=--j?i:0:b>0&&0>=h?(j=Math.max(1,f*g+.5|0),c=i=b):c=0,d[k]=c,h=b;this._trig=b,this._counter=j,this._level=i};return a}(),d.ugen.specs.Trig1=d.ugen.specs.Trig,d.unit.specs.Trig1=function(){var a=function(){this.process=2===this.calcRate&&2!==this.inRates[0]?c:b,this._counter=0,this._trig=0,this.outputs[0][0]=0},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],g=this.rate.sampleRate,h=this._trig,i=this._counter,j=0;a>j;++j)b=e[j],i>0?c=--i?1:0:b>0&&0>=h?(i=Math.max(1,f*g+.5|0),c=1):c=0,d[j]=c,h=b;this._trig=h,this._counter=i},c=function(a){var b,c,d=this.outputs[0],e=this.inputs[0],f=this.inputs[1][0],g=this.rate.sampleRate,h=this._trig,i=this._counter;b=e[0];for(var j=0;a>j;++j)i>0?c=--i?1:0:b>0&&0>=h?(i=Math.max(1,f*g+.5|0),c=1):c=0,d[j]=c,h=b;this._trig=h,this._counter=i};return a}(),d.ugen.specs.Latch={$ar:{defaults:"in=0,trig=0",ctor:function(a,b){return this.multiNew(2,a,b)}},$kr:{defaults:"in=0,trig=0",ctor:function(a,b){return this.multiNew(1,a,b)}}},d.unit.specs.Latch=function(){var a=function(){this.process=2===this.inRates[1]?b:c,this._trig=0,this._level=0,this.outputs[0][0]=this.inputs[1][0]>0?this.inputs[0][0]:0},b=function(a){for(var b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1],f=this._trig,g=this._level,h=0;a>h;++h)b=e[h],0>=f&&b>0&&(g=d[h]),c[h]=g,f=b;this._trig=f,this._level=g},c=function(a){var b=this.outputs[0],c=this._level,d=this.inputs[0][1];this._trig<=0&&d>0&&(c=this.inputs[0][0]);for(var e=0;a>e;++e)b[e]=c;this._trig=d,this._level=c};return a}(),d.ugen.specs.Gate=d.ugen.specs.Latch,d.unit.specs.Gate=function(){var a=function(){this.process=2===this.inRates[1]?b:c,this._level=0,this.outputs[0][0]=0},b=function(a){for(var b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1],f=this._level,g=0;a>g;++g)b=e[g],b>0&&(f=d[g]),c[g]=f;this._level=f},c=function(a){var b,c=this.outputs[0],d=this.inputs[0],e=this.inputs[1][0],f=this._level;if(e>0){for(b=0;a>b;++b)c[b]=f=d[b];this._level=f}else for(b=0;a>b;++b)c[b]=f};return a}(),d.ugen.specs.ZeroCrossing={$ar:{defaults:"trig=0",ctor:function(a){return this.multiNew(2,a)}},$kr:{defaults:"trig=0",ctor:function(a){return this.multiNew(1,a)}},checkInputs:d.ugen.checkSameRateAsFirstInput},d.unit.specs.ZeroCrossing=function(){var a=function(){this.process=b,this._prevfrac=0,this._previn=this.inputs[0][0],this._counter=0,this.outputs[0][0]=this._level=0},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[0],f=this._previn,g=this._prevfrac,h=this._level,i=this._counter,j=this.rate.sampleRate,k=0;a>k;++k)i++,b=e[k],i>4&&0>=f&&b>0&&(c=-f/(b-f),h=j/(c+i-g),g=c,i=0),d[k]=h,f=b;this._previn=f,this._prevfrac=g,this._level=h,this._counter=i};return a}(),d.ugen.specs.Timer=d.ugen.specs.ZeroCrossing,d.unit.specs.Timer=function(){var a=function(){this.process=b,this._prevfrac=0,this._previn=this.inputs[0][0],this._counter=0,this.outputs[0][0]=this._level=0
},b=function(a){for(var b,c,d=this.outputs[0],e=this.inputs[0],f=this._previn,g=this._prevfrac,h=this._level,i=this._counter,j=this.rate.sampleDur,k=0;a>k;++k)i++,b=e[k],0>=f&&b>0&&(c=-f/(b-f),h=j*(c+i-g),g=c,i=0),d[k]=h,f=b;this._previn=f,this._prevfrac=g,this._level=h,this._counter=i};return a}(),d.ugen.specs.Phasor={$ar:{defaults:"trig=0,rate=1,start=0,end=1,resetPos=0",ctor:function(a,b,c,d,e){return this.multiNew(2,a,b,c,d,e)}},$kr:{defaults:"trig=0,rate=1,start=0,end=1,resetPos=0",ctor:function(a,b,c,d,e){return this.multiNew(1,a,b,c,d,e)}}},d.unit.specs.Phasor=function(){var a=function(){this.process=b,this._prev=this.inputs[0][0],this.outputs[0][0]=this._level=this.inputs[2][0]},b=function(a){var b=this.outputs[0],c=this.inputs[0][0],d=this.inputs[1][0],f=this.inputs[2][0],g=this.inputs[3][0],h=this._prev,i=this._level;0>=h&&c>0&&(i=this.inputs[4][0]);for(var j=0;a>j;++j)i=e(i,f,g),b[j]=i,i+=d;this._prev=c,this._level=i};return a}(),c.exports={}}),e("cc/plugins/ui",function(a,b,c){var d=a("../cc"),e=Math.log(.001),f={$kr:{defaults:"minval=0,maxval=1,warp=0,lag=0.2",ctor:function(a,b,c,d){return this.multiNew(1,a,b,c,d)}}};d.ugen.specs.MouseX=f,d.unit.specs.MouseX=function(){var a=function(){this.process=b,this._y1=0,this._b1=0,this._lag=0,this.process(1)},b=function(a,b){var c=this.inputs[0][0]||.01,d=this.inputs[1][0],f=this.inputs[2][0],g=this.inputs[3][0],h=this._y1,i=this._b1;g!==this._lag&&(this._b1=0===g?0:Math.exp(e/(g*this.rate.sampleRate)),this._lag=g);var j=b?b.f32_syncItems[2]:0;0===f?j=(d-c)*j+c:(j=Math.pow(d/c,j)*c,isNaN(j)&&(j=0)),this.outputs[0][0]=h=j+i*(h-j),this._y1=h};return a}(),d.ugen.specs.MouseY=f,d.unit.specs.MouseY=function(){var a=function(){this.process=b,this._y1=0,this._b1=0,this._lag=0,this.process(1)},b=function(a,b){var c=this.inputs[0][0]||.01,d=this.inputs[1][0],f=this.inputs[2][0],g=this.inputs[3][0],h=this._y1,i=this._b1;g!==this._lag&&(this._b1=0===g?0:Math.exp(e/(g*this.rate.sampleRate)),this._lag=g);var j=b?b.f32_syncItems[3]:0;0===f?j=(d-c)*j+c:(j=Math.pow(d/c,j)*c,isNaN(j)&&(j=0)),this.outputs[0][0]=h=j+i*(h-j),this._y1=h};return a}(),d.ugen.specs.MouseButton={$kr:{defaults:"minval=0,maxval=1,lag=0.2",ctor:function(a,b,c){return this.multiNew(1,a,b,c)}}},d.unit.specs.MouseButton=function(){var a=function(){this.process=b,this._y1=0,this._b1=0,this._lag=0,this.process(1)},b=function(a,b){var c=this.inputs[0][0],d=this.inputs[1][0],f=this.inputs[2][0],g=this._y1,h=this._b1;f!==this._lag&&(this._b1=0===f?0:Math.exp(e/(f*this.rate.sampleRate)),this._lag=f);var i=b?b.f32_syncItems[4]?d:c:c;this.outputs[0][0]=g=i+h*(g-i),this._y1=g};return a}(),c.exports={}}),e("cc/lang/lang-worker",function(b,c,d){var e=b("./cc"),f=b("../common/extend"),g=b("./utils").lang_onmessage,h=function(){function a(){e.opmode="worker",e.SynthLang.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=1024,this.bufLength=128}return f(a,e.SynthLang),a.prototype.sendToClient=function(a){postMessage(a)},a.prototype.process=function(){this.currentTime+=this.currentTimeIncr,this.taskManager.process();var a=this.timelineResult.splice(0);this.sendToServer(["/processed",a])},a}();e.createWorkerSynthLang=function(){var b=new h;return a.onmessage=g,b},d.exports={}}),e("cc/lang/lang-nodejs",function(a,b,c){var d=a("./cc"),e=a("../common/extend"),f=function(){function a(){d.opmode="nodejs",d.SynthLang.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=128}return e(a,d.SynthLang),a.prototype.process=function(){this.currentTime+=this.currentTimeIncr,this.taskManager.process();var a=this.timelineResult.splice(0);this.sendToServer(["/processed",a])},a}();d.createNodeJSSynthLang=function(){var a=new f;return a},c.exports={}}),e("cc/lang/lang-socket",function(b,c,d){var e=b("./cc"),f=b("../common/extend"),g=b("./utils").lang_onmessage,h=function(){function a(){e.opmode="nodejs",e.SynthLang.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=128,this.socketPath=null}return b("../common/browser"),f(a,e.SynthLang),a.prototype.sendToClient=function(a){postMessage(a)},a.prototype.sendToServer=function(){},a.prototype.process=function(){this.taskManager.process();var a=this.timelineResult.splice(0);this.sendToServer(["/processed",a])},a.prototype.openSocket=function(){var a=this,b=this.socket=e.createWebSocket(this.socketPath),c=[];b.binaryType="arraybuffer",b.onopen=function(){c.forEach(function(a){b.send(a)}),c=[]},b.onmessage=function(b){var c=b.data;return"string"!=typeof c?(a.sendToClient(new Int16Array(c)),void 0):(a.recvFromServer(JSON.parse(c)),void 0)},b.onclose=function(){},b.onerror=function(){},this.sendToServer=function(a){a instanceof Uint8Array?b.readyState===WebSocket.OPEN&&b.send(a.buffer):b.readyState===WebSocket.OPEN?b.send(JSON.stringify(a)):c.push(JSON.stringify(a))}},a.prototype.closeSocket=function(){this.socket.close(),this.socket=null},a.prototype.process=function(){for(var a=this.taskManager,b=this.strmLength/this.bufLength,c=[],d=this.currentTimeIncr;b--;)this.currentTime+=d,a.process(),c=c.concat(this.timelineResult.splice(0),0);this.sendToServer(["/processed",c])},a.prototype.extendCommands=function(a){a["/socket/open"]=function(a){this.socketPath=a[1],this.openSocket()},a["/socket/close"]=function(){this.closeSocket()},a["/socket/sendToServer"]=function(a){this.sendToServer(a)},a["/socket/sendToClient"]=function(a){this.sendToClient(a)}},a}();e.createSocketSynthLang=function(){var b=new h;return a.onmessage=g,e.opmode="socket",b},d.exports={}}),e("cc/server/server",function(a,b,c){var d=a("./cc"),e={},f=function(){function a(){this.sampleRate=0,this.channels=0,this.strmLength=0,this.bufLength=0,this.instanceManager=d.createInstanceManager(),this.strm=null,this.timer=d.createTimer(),this.initialized=!1,this.syncCount=new Uint32Array(1),this.sysSyncCount=0}return a.prototype.sendToLang=function(){throw"SynthServer#sendToLang: should be overridden"},a.prototype.recvFromLang=function(a,b){if(b=0|b,a instanceof Uint8Array)this.instanceManager.doBinayCommand(b,a);else{var c=e[a[0]];if(!c)throw new Error("Unknown command: "+a[0]);c.call(this,a,b)}},a.prototype.connect=function(){throw"SynthServer#connect: should be overridden"},a.prototype.init=function(a){this.initialized||(this.initialized=!0,a&&(this.sampleRate=0|a[1],this.channels=0|a[2],this.strmLength=0|a[3]),this.strm=new Int16Array(this.strmLength*this.channels),this.instanceManager.init(this),this.instanceManager.append(0),d.initRateInstance())},a.prototype.play=function(a,b){b=0|b,this.instanceManager.play(b),this.timer.isRunning()||this.timer.start(this.process.bind(this),10),this.sendToLang(["/played",this.syncCount[0]])},a.prototype.pause=function(a,b){b=0|b,this.instanceManager.pause(b),this.timer.isRunning()&&(this.instanceManager.isRunning()||this.timer.stop()),this.sendToLang(["/paused",this.syncCount[0]])},a.prototype.reset=function(a,b){b=0|b,this.instanceManager.reset(b)},a.prototype.pushToTimeline=function(a,b){b=0|b;var c=a[1];this.instanceManager.pushToTimeline(b,c)},a.prototype.process=function(){throw"SynthServer#process: should be overridden"},a}();e["/init"]=function(a,b){this.init(a,b)},e["/play"]=function(a,b){this.play(a,b)},e["/pause"]=function(a,b){this.pause(a,b)},e["/reset"]=function(a,b){this.reset(a,b)},e["/processed"]=function(a,b){this.pushToTimeline(a,b)},e["/socket/sendToServer"]=function(a,b){this.exports&&(a=a[1],a.userId=b,this.exports.emit("message",a))},d.SynthServer=f,a("../common/timer"),a("./instance"),a("./rate"),a("./unit"),a("./server-worker"),a("./server-nodejs"),a("./server-socket"),a("./basic_unit"),a("../plugins/installer"),d.createSynthServer=function(){switch(d.opmode){case"worker":return d.createWorkerSynthServer();case"nodejs":return d.createNodeJSSynthServer();case"socket":return d.createSocketSynthServer()}throw new Error("A SynthServer is not defined for: "+d.opmode)},c.exports={}}),e("cc/server/cc",function(a,b,c){var d=a("../cc");d.UGen||(d.UGen=Object),c.exports=d}),e("cc/common/timer",function(a,b,c){var d=a("../cc"),e=function(){function a(){this._timerId=0}return a.prototype.start=function(a,b){this._timerId&&clearInterval(this._timerId),this._timerId=setInterval(a,b)},a.prototype.stop=function(){this._timerId&&clearInterval(this._timerId),this._timerId=0},a.prototype.isRunning=function(){return!!this._timerId},a}(),f=function(){function a(){this._worker=new Worker(b),this._worker.onmessage=null}if("undefined"!=typeof Worker){var b=function(){try{var a="var t=0;onmessage=function(e){if(t)t=clearInterval(t),0;if(typeof e.data=='number'&&e.data>0)t=setInterval(function(){postMessage(0);},e.data);};",b=new Blob([a],{type:"text/javascript"}),c=URL.createObjectURL(b);return new Worker(c),c}catch(d){}}();if(b)return a.prototype.start=function(a,b){this._worker.onmessage&&this._worker.postMessage(0),this._worker.onmessage=a,this._worker.postMessage(b)},a.prototype.stop=function(){this._worker.onmessage&&this._worker.postMessage(0),this._worker.onmessage=null},a.prototype.isRunning=function(){return!!this._worker.onmessage},a}}();d.createTimer=function(){return f?new f:new e},c.exports={WorkerTimer:f,NativeTimer:e}}),e("cc/server/instance",function(a,b,c){var d=a("./cc"),e=a("./node"),f=a("./commands"),g=function(){function a(){this.map={},this.list=[],this.server=null,this.process=b}a.prototype.init=function(a){if(!this.server){var b=16*a.bufLength+128,c=a.bufLength,d=a.bufLength<<2;this.server=a,this.busClear=new Float32Array(b),this.map={},this.list=[],this.busOut=new Float32Array(b),this.busOutLen=a.bufLength<<1,this.busOutL=new Float32Array(this.busOut.buffer,0,c),this.busOutR=new Float32Array(this.busOut.buffer,d,c)}},a.prototype.append=function(a){if(!this.map[a]){var b=new h(this,a);this.map[a]=b,this.list.push(b),this.process=1===this.list.length?c:d}return this.map[a]},a.prototype.remove=function(a){var d=this.map[a];d&&(this.list.splice(this.list.indexOf(d),1),delete this.map[a],1===this.list.length?this.process=c:0===this.list.length&&(this.process=b))},a.prototype.play=function(a){var b=this.map[a];b&&b.play()},a.prototype.pause=function(a){var b=this.map[a];b&&b.pause()},a.prototype.reset=function(a){var b=this.map[a];b&&b.reset()},a.prototype.isRunning=function(){return this.list.some(function(a){return a.rootNode.running})},a.prototype.pushToTimeline=function(a,b){var c=this.map[a];c&&(c.timeline=c.timeline.concat(b))},a.prototype.doBinayCommand=function(a,b){var c=this.map[a];c&&c.doBinayCommand(b)};var b=function(){this.busOut.set(this.busClear)},c=function(a,b){this.list[0].process(a,b),this.busOut.set(this.list[0].bus)},d=function(a,b){var c,d=this.list,e=this.busOut,f=this.busOutLen;e.set(this.busClear);for(var g=0,h=d.length;h>g;++g){c=d[g],c.process(a,b);for(var i=c.bus,j=c.busAmp,k=f;k--;)e[k]+=i[k]*j}};return a}(),h=function(){function a(a,b){var c=16*a.server.bufLength+128;this.manager=a,this.userId=0|b,this.bus=new Float32Array(c),this.busClear=a.busClear,this.busIndex=0,this.busAmp=.8,this.timeline=[],this.timelineIndex=0,this.rootNode=new e.Group(0,0,0,this),this.nodes={0:this.rootNode},this.fixNums={},this.defs={},this.buffers={},this.bufSrc={},this.syncItems=new Uint8Array(20),this.i16_syncItems=new Int16Array(this.syncItems.buffer),this.f32_syncItems=new Float32Array(this.syncItems.buffer)}return a.prototype.play=function(){this.rootNode.running=!0,this.bus.set(this.busClear)},a.prototype.pause=function(){this.rootNode.running=!1,this.bus.set(this.busClear),this.timeline=[]},a.prototype.reset=function(){this.manager.busClear&&this.bus.set(this.manager.busClear),this.timeline=[],this.rootNode=new e.Group(0,0,0,this),this.nodes={0:this.rootNode},this.fixNums={},this.defs={},this.buffers={},this.bufSrc={}},a.prototype.doBinayCommand=function(a){var b=f[(a[1]<<8)+a[0]];b&&b.call(this,a)},a.prototype.getFixNum=function(a){var b=this.fixNums;return b[a]||(b[a]={outputs:[new Float32Array([a])]})},a.prototype.process=function(a){for(var b,c=this.timeline;b=c.shift();){var d=f[b[0]];d&&d.call(this,b)}this.bus.set(this.busClear),this.rootNode.process(a,this)},a}();d.createInstanceManager=function(){return new g},c.exports={InstanceManager:g}}),e("cc/server/node",function(a,b,c){var d=a("./cc"),e=a("../common/extend"),f={},g={};f[0]=function(a){var b;this instanceof l&&(null===this.head?this.head=this.tail=a:(b=this.head.prev,b&&(b.next=a),a.next=this.head,this.head.prev=a,this.head=a),a.parent=this)},f[1]=function(a){var b;this instanceof l&&(null===this.tail?this.head=this.tail=a:(b=this.tail.next,b&&(b.prev=a),a.prev=this.tail,this.tail.next=a,this.tail=a),a.parent=this)},f[2]=function(a){var b=this.prev;this.prev=a,a.prev=b,b&&(b.next=a),a.next=this,this.parent&&this.parent.head===this&&(this.parent.head=a),a.parent=this.parent},f[3]=function(a){var b=this.next;this.next=a,a.next=b,b&&(b.prev=a),a.prev=this,this.parent&&this.parent.tail===this&&(this.parent.tail=a),a.parent=this.parent},f[4]=function(a){a.next=this.next,a.prev=this.prev,a.head=this.head,a.tail=this.tail,a.parent=this.parent,this.prev&&(this.prev.next=a),this.next&&(this.next.prev=a),this.parent&&this.parent.head===this&&(this.parent.head=a),this.parent&&this.parent.tail===this&&(this.parent.tail=a)},g[0]=function(){},g[1]=function(){this.running=!1},g[2]=function(){h.call(this)},g[3]=function(){var a=this.prev;a&&h.call(a),h.call(this)},g[4]=function(){var a=this.next;h.call(this),a&&h.call(a)},g[5]=function(){var a=this.prev;a instanceof l?i(a):h.call(a),h.call(this)},g[6]=function(){var a=this.next;h.call(this),a?i(a):h.call(a)},g[7]=function(){var a=this.parent.head;if(a)for(var b=a;b&&b!==this;)a=b.next,h.call(b),b=a;h.call(this)},g[8]=function(){var a=this.next;if(h.call(this),a)for(var b=a;b;)a=b.next,h.call(b),b=a},g[9]=function(){var a=this.prev;h.call(this),a&&(a.running=!1)},g[10]=function(){var a=this.next;h.call(this),a&&(a.running=!1)},g[11]=function(){var a=this.prev;a instanceof l?j(a):h.call(a),h.call(this)},g[12]=function(){var a=this.next;h.call(this),a?j(a):h.call(a)},g[13]=function(){var a=this.parent.head;if(a)for(var b=a;b;)a=b.next,h.call(b),b=a},g[14]=function(){j(this)};var h=function(){if(this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.parent){this.parent.head===this&&(this.parent.head=this.next),this.parent.tail===this&&(this.parent.tail=this.prev);var a;this.instance&&(a=this.instance.userId)}this.prev=null,this.next=null,this.parent=null,this.blocking=!1,this.instance&&delete this.instance.nodes[this.nodeId]},i=function(a){var b=a.head;for(h.call(a),a=b;a;)b=a.next,h.call(a),a=b},j=function(a){var b=a.head;for(h.call(a),a=b;a;)b=a.next,h.call(a),a instanceof l&&j(a),a=b},k=function(){function a(a,b){this.nodeId=0|a,this.next=null,this.prev=null,this.parent=null,this.running=!0,this.instance=b}return a.prototype.play=function(){this.running=!0},a.prototype.pause=function(){this.running=!1},a.prototype.stop=function(){h.call(this)},a.prototype.doneAction=function(a){var b=g[a];if(b){b.call(this);var c;this.instance&&(c=this.instance.userId)}},a}(),l=function(){function a(a,b,c,d){k.call(this,a,d),this.head=null,this.tail=null,b&&f[c].call(b,this)}return e(a,k),a.prototype.process=function(a,b){this.head&&this.running&&this.head.process(a,b),this.next&&this.next.process(a,b)},a}(),m=function(){function a(a,b,c,d,e,g){if(k.call(this,a,g),g){var h=g.defs[d];h&&this.build(h,e,g)}b&&f[c].call(b,this)}return e(a,k),a.prototype.build=function(a,b,c){this.specs=a;var e=a.consts.map(function(a){return"Infinity"===a?a=1/0:"-Infinity"===a&&(a=-1/0),c.getFixNum(a)}),f=a.defList.map(function(a){return d.createUnit(this,a)},this);return this.params=a.params,this.controls=new Float32Array(this.params.values),this.set(b),this.unitList=f.filter(function(a){for(var b=a.inputs,c=a.inRates,d=a.fromUnits,g=a.specs[3],h=0,i=b.length;i>h;++h){var j=h<<1;-1===g[j]?(b[h]=e[g[j+1]].outputs[0],c[h]=0):(b[h]=f[g[j]].outputs[g[j+1]],c[h]=f[g[j]].outRates[g[j+1]],d[h]=f[g[j]])}return a.init(),!!a.process}),this},a.prototype.set=function(a){for(var b=0,c=a.length;c>b;b+=2){var d=a[b],e=a[b+1];this.controls[d]=e}},a.prototype.process=function(a,b){if(this.running&&this.unitList)for(var c=this.unitList,d=0,e=c.length;e>d;++d){var f=c[d];3!==f.calcRate&&f.process(f.rate.bufLength,b)}this.next&&this.next.process(a,b)},a}();c.exports={Node:k,Group:l,Synth:m}}),e("cc/server/commands",function(a,b,c){var d=a("./node"),e=a("./buffer"),f={};f["/n_run"]=function(a){var b=0|a[1],c=!!a[2],d=this.nodes[b];d&&(d.running=c)},f["/n_free"]=function(a){var b=0|a[1],c=this.nodes[b];c&&c.doneAction(2)},f["/n_set"]=function(a){var b=0|a[1],c=a[2],d=this.nodes[b];d&&d.set(c)},f["/g_new"]=function(a){var b=0|a[1],c=0|a[2],e=0|a[3],f=this.nodes[e];f&&(this.nodes[b]=new d.Group(b,f,c,this))},f["/s_def"]=function(a){var b=0|a[1],c=JSON.parse(a[2]);this.defs[b]=c},f["/s_new"]=function(a){var b=0|a[1],c=0|a[2],e=0|a[3],f=0|a[4],g=a[5],h=this.nodes[e];h&&(this.nodes[b]=new d.Synth(b,h,c,f,g,this))},f["/b_new"]=function(a){var b=0|a[1],c=0|a[2],d=0|a[3];this.buffers[b]=new e.Buffer(b,c,d)},f["/b_bind"]=function(a){var b=0|a[1],c=0|a[2],d=0|a[3],e=0|a[4],f=this.buffers[b],g=this.bufSrc[c];f&&(g?f.bindBufferSource(g,d,e):(g=new f.BufferSource(c),g.pendings.push([f,d,e]),this.bufSrc[c]=g))},f["/b_free"]=function(a){var b=0|a[1];delete this.buffers[b]},f["/b_zero"]=function(a){var b=0|a[1],c=this.buffers[b];c&&c.zero()},f["/b_set"]=function(a){var b=0|a[1],c=a[2],d=this.buffers[b];d&&d.set(c)},f["/b_gen"]=function(a){var b=0|a[1],c=a[2],d=0|a[3],e=a.slice(4),f=this.buffers[b];f&&f.gen(c,d,e)},f[0]=function(a){this.syncItems.set(a);var b=this.manager.server,c=new Uint32Array(a.buffer)[1];b.sysSyncCount<c&&(b.sysSyncCount=c)},f[1]=function(a){var b=(a[3]<<8)+a[2],c=(a[7]<<8)+a[6],d=(a[11]<<24)+(a[10]<<16)+(a[9]<<8)+a[8],f=(a[15]<<24)+(a[14]<<16)+(a[13]<<8)+a[12],g=new Float32Array(a.buffer,16),h=this.bufSrc[b];h||(h=new e.BufferSource(b)),h.set(c,d,f,g),this.bufSrc[b]=h},c.exports=f}),e("cc/server/buffer",function(a,b,c){var d=a("./cc"),e=function(){function a(a){this.bufSrcId=a,this.channels=0,this.sampleRate=0,this.frames=0,this.samples=null,this.pendings=[]}return a.prototype.set=function(a,b,c,d){this.channels=a,this.sampleRate=b,this.frames=c,this.samples=d,this.pendings.forEach(function(a){var b=a[0],c=a[1],d=a[2];b.bindBufferSource(this,c,d)},this),this.pendings=null},a}(),f=function(){function a(a,b,c){this.bufnum=a,this.frames=b,this.channels=c,this.sampleRate=d.server.sampleRate,this.samples=new Float32Array(b*c)}return a.prototype.bindBufferSource=function(a,b,c){b=Math.max(0,Math.min(0|b,a.frames)),c=Math.max(-1,Math.min(0|c,a.frames-b)),0===b?-1===c?(this.samples=a.samples,this.frames=a.frames):(this.samples=new Float32Array(a.samples.buffer,0,c),this.frames=c):-1===c?(this.samples=new Float32Array(a.samples.buffer,4*b),this.frames=a.frames-b):(this.samples=new Float32Array(a.samples.buffer,4*b,c),this.frames=c),this.channels=a.channels,this.sampleRate=a.sampleRate},a.prototype.zero=function(){for(var a=this.samples,b=a.length;b--;)a[b]=0},a.prototype.set=function(a){for(var b=this.samples,c=0,d=a.length>>1;d>c;c+=2){var e=a[c];if(!("number"!=typeof e||0>e||b.length<=e)){e|=0;var f=a[c+1];if("number"==typeof f)isNaN(f)&&(f=0),b[e]=f;else if(Array.isArray(f))for(var g=0,h=f.length;h>g&&!(b.length<=c+g);++g)"number"==typeof f[g]&&(b[e+g]=f[g])}}},a.prototype.gen=function(a,b,c){var d=g[a];if(d){var e=this.samples,f=!!(1&b),h=!!(2&b),i=!!(4&b);if(i)for(var j=e.length;j--;)e[j]=0;d(e,h,c),f&&(h?m(e.length,e,1):l(e.length,e,1))}},a}(),g={};g.sine1=function(a,b,c){var d,e;if(b)for(d=0,e=c.length;e>d;++d)h(a.length,a,d+1,c[d],0);else for(d=0,e=c.length;e>d;++d)i(a.length,a,d+1,c[d],0)},g.sine2=function(a,b,c){var d,e;if(b)for(d=0,e=c.length;e>d;d+=2)h(a.length,a,c[d],c[d+1],0);else for(d=0,e=c.length;e>d;d+=2)i(a.length,a,c[d],c[d+1],0)},g.sine3=function(a,b,c){var d,e;if(b)for(d=0,e=c.length;e>d;d+=3)h(a.length,a,c[d],c[d+1],c[d+2]);else for(d=0,e=c.length;e>d;d+=3)i(a.length,a,c[d],c[d+1],c[d+2])},g.cheby=function(a,b,c){var d,e;if(b)for(d=0,e=c.length;e>d;++d)j(a.length,a,d+1,c[d]);else for(d=0,e=c.length;e>d;++d)k(a.length,a,d+1,c[d])};var h=function(a,b,c,d,e){if(0!==d){var f,g=a>>1,h=2*c*Math.PI/g,i=d*Math.sin(e);e+=h;for(var j=0;a>j;j+=2)f=d*Math.sin(e),b[j]+=2*i-f,b[j+1]+=f-i,i=f,e+=h}},i=function(a,b,c,d,e){if(0!==d)for(var f=2*c*Math.PI/a,g=0;a>g;++g)b[g]+=d*Math.sin(e),e+=f},j=function(a,b,c,d){if(0!==d){var e,f=a>>1,g=2/f,h=-1,i=-d*Math.cos(c*Math.PI*2),j=d*Math.cos(c*Math.acos(h))-i;h+=g;for(var k=0;a>k;k+=2)e=d*Math.cos(c*Math.acos(h))-i,b[k]+=2*j-e,b[k+1]+=e-j,j=e,h+=g}},k=function(a,b,c,d){if(0!==d)for(var e=2/a,f=-1,g=-d*Math.cos(c*Math.PI*2),h=0;a>h;++h)b[h]+=d*Math.cos(c*Math.acos(f))-g,f+=e},l=function(a,b,c){var d,e,f,g;for(g=d=0;a>g;++g)e=Math.abs(b[g]),e>d&&(d=e);if(0!==d&&d===c)for(f=c/d,g=0;a>g;++g)b[g]*=f},m=function(a,b,c){var d,e,f,g;for(g=d=0;a>g;g+=2)e=Math.abs(b[g]),e>d&&(d=e);if(0!==d&&d===c)for(f=c/d,g=0;a>g;++g)b[g]*=f};c.exports={BufferSource:e,Buffer:f}}),e("cc/server/rate",function(a,b,c){var d=a("./cc"),e=function(){function a(a,c){this.sampleRate=a,this.sampleDur=1/a,this.radiansPerSample=b/a,this.bufLength=c,this.bufDuration=c/a,this.bufRate=1/this.bufDuration,this.slopeFactor=1/c,this.filterLoops=c/3|0,this.filterRemain=c%3|0,this.filterSlope=0===this.filterLoops?0:1/this.filterLoops}var b=2*Math.PI;return a}();d.createRate=function(a,b){return new e(a,b)};var f,g;d.initRateInstance=function(){f=new e(d.server.sampleRate/d.server.bufLength,1),g=new e(d.server.sampleRate,d.server.bufLength)},d.getRateInstance=function(a){return 2===a?g:f},c.exports={}}),e("cc/server/unit",function(a,b,c){var d=a("../cc"),e=function(){function a(a,b){this.parent=a,this.specs=b,this.name=b[0],this.calcRate=b[1],this.specialIndex=b[2],this.numOfInputs=b[3].length>>1,this.numOfOutputs=b[4].length,this.inputs=new Array(this.numOfInputs),this.inRates=new Array(this.numOfInputs),this.fromUnits=new Array(this.numOfInputs),this.outRates=b[4],this.rate=d.getRateInstance(this.calcRate);for(var c=this.rate.bufLength,e=new Float32Array(c*this.numOfOutputs),f=new Array(this.numOfOutputs),g=0,h=f.length;h>g;++g)f[g]=new Float32Array(e.buffer,c*g*e.BYTES_PER_ELEMENT,c);this.outputs=f,this.allOutputs=e,this.bufLength=c,this.done=!1}return a.prototype.init=function(){var a=d.unit.specs[this.name];if("function"!=typeof a)throw new Error(this.name+"'s ctor is not found.");return a.call(this),this},a.prototype.doneAction=function(a){this.done||(this.done=!0,this.parent.doneAction(a)),a=0},a}();d.createUnit=function(a,b){return new e(a,b)},c.exports={Unit:e}}),e("cc/server/server-worker",function(a,b,c){var d=a("./cc"),e=a("../common/extend"),f=function(){function a(){d.SynthServer.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=1024,this.bufLength=128,this.offset=0}return e(a,d.SynthServer),a.prototype.sendToLang=function(a){postMessage(a)},a.prototype.connect=function(){this.sendToLang(["/connected",this.sampleRate,this.channels])},a.prototype.process=function(){if(!(this.sysSyncCount<this.syncCount[0]-4)){for(var a=this.strm,b=this.instanceManager,c=this.strmLength,e=this.bufLength,f=b.busOutL,g=b.busOutR,h=d.lang,i=0,j=0,k=c/e;k>j;++j){h.process(),b.process(e);for(var l=e,m=c+e;m--,l--;)a[l+i]=Math.max(-32768,Math.min(32768*f[l],32767)),a[m+i]=Math.max(-32768,Math.min(32768*g[l],32767));i+=e}this.sendToLang(a),this.syncCount[0]+=1}},a}();d.createWorkerSynthServer=function(){var a=new f;return d.opmode="worker",a},c.exports={}}),e("cc/server/server-nodejs",function(a,b,c){var d=a("./cc"),e=a("../common/extend"),f=function(){function b(){a("../common/audioapi"),d.SynthServer.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=128}return e(b,d.SynthServer),b.prototype.init=function(){this.initialized||(d.SynthServer.prototype.init.call(this),this.api=d.createAudioAPI(this))},b.prototype.connect=function(){this.sendToLang(["/connected",this.sampleRate,this.channels])},b.prototype.play=function(a,b){if(b=0|b,this.instanceManager.play(b),this.api){this._strm=new Int16Array(this.strmLength*this.channels),this.strmList=new Array(8),this.strmListReadIndex=0,this.strmListWriteIndex=0;for(var c=this.strmList,d=c.length;d--;)c[d]=new Int16Array(this._strm);this.api.isPlaying||this.api.play()}this.timer.isRunning()||this.timer.start(this.process.bind(this),10)},b.prototype.pause=function(a,b){b=0|b,this.instanceManager.pause(b),this.api&&this.api.isPlaying&&(this.instanceManager.isRunning()||this.api.pause()),this.timer.isRunning()&&(this.instanceManager.isRunning()||this.timer.stop())},b.prototype.process=function(){if(!(this.sysSyncCount<this.syncCount[0]-4)){for(var a=this.strm,b=this.instanceManager,c=this.strmLength,e=this.bufLength,f=b.busOutL,g=b.busOutR,h=d.lang,i=0,j=0,k=c/e;k>j;++j){h.process(),b.process(e);for(var l=e,m=c+e;m--,l--;)a[l+i]=Math.max(-32768,Math.min(32768*f[l],32767)),a[m+i]=Math.max(-32768,Math.min(32768*g[l],32767));i+=e}this.sendToLang(a),this.syncCount[0]+=1,this.api&&(this.strmList[this.strmListWriteIndex]=new Int16Array(a),this.strmListWriteIndex=this.strmListWriteIndex+1&7)}},b.prototype._process=function(){var a=this.strmList[this.strmListReadIndex];a&&(this.strmListReadIndex=this.strmListReadIndex+1&7,this._strm.set(a)),this.sysSyncCount+=1},b}();d.NodeJSSynthServer=f,d.createNodeJSSynthServer=function(){var a=new f;return d.opmode="nodejs",a},c.exports={}}),e("cc/server/server-socket",function(b,c,d){var e=b("./cc"),f=b("../common/extend"),g=b("../common/emitter"),h=function(){function b(){e.NodeJSSynthServer.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=128,this.list=[],this.map={},this.exports=null}var c;return a.require&&(c=a.require("ws").Server),f(b,e.NodeJSSynthServer),b.prototype._init=function(a){var b=this,d=0,f=this.exports;"undefined"!=typeof a.speaker&&(a.speaker&&(this.api=e.createAudioAPI(this)),delete a.speaker),this.socket=new c(a),this.socket.on("connection",function(a){var c=d++;b.list.push(a),b.map[c]=a,b.instanceManager.append(c),a.on("message",function(a){a="string"!=typeof a?new Uint8Array(a):JSON.parse(a),b.recvFromLang(a,c)}),a.on("close",function(){b.map[c]&&(b.pause([],c),b.instanceManager.remove(c),b.list.splice(b.list.indexOf(a),1),delete b.map[c]),f.emit("close",c)}),a.on("error",function(a){f.emit("error",c,a)}),b.sendToLang(["/connected",b.sampleRate,b.channels],c),f.emit("open",c)}),this.init()},b.prototype.connect=function(){},b.prototype.sendToLang=function(a,b){if(a instanceof Int16Array)this.list.forEach(function(b){1===b.readyState&&b.send(a.buffer,{binary:!0,mask:!1})});else if(a=JSON.stringify(a),void 0===b)this.list.forEach(function(b){1===b.readyState&&b.send(a)});else{var c=this.map[b];c&&1===c.readyState&&c.send(a)}},b.prototype.process=function(){if(!(this.sysSyncCount<this.syncCount[0]-4)){for(var a=this.strm,b=this.instanceManager,c=this.strmLength,d=this.bufLength,e=b.busOutL,f=b.busOutR,g=0,h=0,i=c/d;i>h;++h){b.process(d);for(var j=d,k=c+d;k--,j--;)a[j+g]=Math.max(-32768,Math.min(32768*e[j],32767)),a[k+g]=Math.max(-32768,Math.min(32768*f[j],32767));g+=d}this.sendToLang(a),this.sendToLang(["/process"]),this.syncCount[0]+=1,this.api&&(this.strmList[this.strmListWriteIndex]=new Int16Array(a),this.strmListWriteIndex=this.strmListWriteIndex+1&7)}},b}(),i=function(){function a(a,c){return b?b:(g.mixin(this),this.server=a,this.server.exports=this,this.server._init(c||{}),b=this,void 0)}var b=null;return a.prototype.send=function(a,b){return this.server.sendToLang(["/socket/sendToClient",a],b),this},a}();e.createSocketSynthServer=function(){var a=new h;return a.exports={createServer:function(b){return new i(a,b)}},e.opmode="socket",a},d.exports={}}),e("cc/server/basic_unit",function(a,b,c){var d=a("../cc"),e=a("../common/ops"),f=Math.log(.001),g=function(a){return 0>a?a>-1e-6&&(a=-1e-6):1e-6>a&&(a=1e-6),a},h=function(a,b,c){var d=a.fromUnits[b];if(!d)return a.inputs[b][0];switch(d.calcRate){case 2:return a.inputs[b][c-1];case 3:d.process(c);default:return a.inputs[b][0]}},i=function(a,b){var c=a.fromUnits[b];c&&3===c.calcRate&&c.process(0)},j={};d.unit.specs.UnaryOpUGen=function(){var a=function(){var a,b=j[e.UNARY_OPS_MAP[this.specialIndex]];if(!b){var c=e.UNARY_OPS_MAP[this.specialIndex]||"unknown";throw new Error("UnaryOpUGen["+c+"] is not defined.")}if(3===this.calcRate)this.process=b.d;else{switch(this.inRates[0]){case 2:a=b.a;break;case 1:a=b.k}this.process=a,this.process?this.process(1):this.outputs[0][0]=b(this.inputs[0][0])}};return a}();var k=function(a){return function(){this.outputs[0][0]=a(this.inputs[0][0])}},l=function(a){return function(b){for(var c=this.outputs[0],d=this.inputs[0],e=0;b>e;e+=8)c[e]=a(d[e]),c[e+1]=a(d[e+1]),c[e+2]=a(d[e+2]),c[e+3]=a(d[e+3]),c[e+4]=a(d[e+4]),c[e+5]=a(d[e+5]),c[e+6]=a(d[e+6]),c[e+7]=a(d[e+7])}},m=function(a){return function(b){if(b){var c=h(this,0,b);this.outputs[0][0]=isNaN(c)?0/0:a(c)}else i(this,0)}};j.neg=function(a){return-a},j.not=function(a){return 0===a?1:0},j.abs=function(a){return Math.abs(a)},j.ceil=function(a){return Math.ceil(a)},j.floor=function(a){return Math.floor(a)},j.frac=function(a){return 0>a?1+(a-(0|a)):a-(0|a)},j.sign=function(a){return 0===a?0:a>0?1:-1},j.squared=function(a){return a*a},j.cubed=function(a){return a*a*a},j.sqrt=function(a){return Math.sqrt(Math.abs(a))},j.exp=function(a){return Math.exp(a)},j.reciprocal=function(a){return 1/g(a)},j.midicps=function(a){return 440*Math.pow(2,1*(a-69)/12)},j.cpsmidi=function(a){return Math.log(1*Math.abs(g(a))/440)*Math.LOG2E*12+69},j.midiratio=function(a){return Math.pow(2,1*a/12)},j.ratiomidi=function(a){return Math.log(Math.abs(g(a)))*Math.LOG2E*12},j.dbamp=function(a){return Math.pow(10,.05*a)},j.ampdb=function(a){return Math.log(Math.abs(g(a)))*Math.LOG10E*20},j.octcps=function(a){return 440*Math.pow(2,g(a)-4.75)},j.cpsoct=function(a){return Math.log(1*Math.abs(a)/440)*Math.LOG2E+4.75},j.log=function(a){return Math.log(Math.abs(g(a)))},j.log2=function(a){return Math.log(Math.abs(g(a)))*Math.LOG2E},j.log10=function(a){return Math.log(Math.abs(g(a)))*Math.LOG10E},j.sin=function(a){return Math.sin(a)},j.cos=function(a){return Math.cos(a)},j.tan=function(a){return Math.tan(a)},j.asin=function(a){return Math.asin(Math.max(-1,Math.min(a,1)))},j.acos=function(a){return Math.acos(Math.max(-1,Math.min(a,1)))},j.atan=function(a){return Math.atan(a)},j.sinh=function(a){return.5*(Math.pow(Math.E,a)-Math.pow(Math.E,-a))},j.cosh=function(a){return.5*(Math.pow(Math.E,a)+Math.pow(Math.E,-a))},j.tanh=function(a){var b=.5*(Math.pow(Math.E,a)-Math.pow(Math.E,-a)),c=.5*(Math.pow(Math.E,a)+Math.pow(Math.E,-a));return b/c},j.rand=function(a){return Math.random()*a},j.rand2=function(a){return(2*Math.random()-1)*a},j.linrand=function(a){return Math.min(Math.random(),Math.random())*a},j.bilinrand=function(a){return(Math.random()-Math.random())*a},j.sum3rand=function(a){return.666666667*(Math.random()+Math.random()+Math.random()-1.5)*a},j.distort=function(a){return a/(1+Math.abs(a))},j.softclip=function(a){var b=Math.abs(a);return.5>=b?a:(b-.25)/a},j.coin=function(a){return Math.random()<a?1:0},j.num=function(a){return+a},j.tilde=function(a){return~a},j.pi=function(a){return Math.PI*a},j.to_i=function(a){return 0|a},j.half=function(a){return.5*a},j.twice=function(a){return 2*a},Object.keys(j).forEach(function(a){var b=j[a];b.a=l(b),b.k=k(b),b.d=m(b)});var n={};d.unit.specs.BinaryOpUGen=function(){var a=function(){var a,b=n[e.BINARY_OPS_MAP[this.specialIndex]];if(!b){var c=e.BINARY_OPS_MAP[this.specialIndex]||"unknown";throw new Error("BinaryOpUGen["+c+"] is not defined.")}if(3===this.calcRate)this.process=b.dd;else{switch(this.inRates[0]){case 2:switch(this.inRates[1]){case 2:a=b.aa;break;case 1:a=b.ak;break;case 0:a=b.ai}break;case 1:switch(this.inRates[1]){case 2:a=b.ka;break;case 1:a=b.kk;break;case 0:a=b.kk}break;case 0:switch(this.inRates[1]){case 2:a=b.ia;
break;case 1:a=b.kk;break;case 0:a=null}}this.process=a,this._a=this.inputs[0][0],this._b=this.inputs[1][0],this.process?this.process(1):this.outputs[0][0]=b(this.inputs[0][0],this.inputs[1][0])}};return a}();var o=function(a){return function(b){for(var c=this.outputs[0],d=this.inputs[0],e=this.inputs[1],f=0;b>f;f+=8)c[f]=a(d[f],e[f]),c[f+1]=a(d[f+1],e[f+1]),c[f+2]=a(d[f+2],e[f+2]),c[f+3]=a(d[f+3],e[f+3]),c[f+4]=a(d[f+4],e[f+4]),c[f+5]=a(d[f+5],e[f+5]),c[f+6]=a(d[f+6],e[f+6]),c[f+7]=a(d[f+7],e[f+7])}},p=function(a){return function(b){for(var c=this.outputs[0],d=this.inputs[0],e=this._b,f=this.inputs[1][0],g=(f-this._b)*this.rate.slopeFactor,h=0;b>h;h+=8)c[h]=a(d[h],e),e+=g,c[h+1]=a(d[h+1],e),e+=g,c[h+2]=a(d[h+2],e),e+=g,c[h+3]=a(d[h+3],e),e+=g,c[h+4]=a(d[h+4],e),e+=g,c[h+5]=a(d[h+5],e),e+=g,c[h+6]=a(d[h+6],e),e+=g,c[h+7]=a(d[h+7],e),e+=g;this._b=f}},q=function(a){return function(b){for(var c=this.outputs[0],d=this.inputs[0],e=this._b,f=0;b>f;f+=8)c[f]=a(d[f],e),c[f+1]=a(d[f+1],e),c[f+2]=a(d[f+2],e),c[f+3]=a(d[f+3],e),c[f+4]=a(d[f+4],e),c[f+5]=a(d[f+5],e),c[f+6]=a(d[f+6],e),c[f+7]=a(d[f+7],e)}},r=function(a){return function(b){for(var c=this.outputs[0],d=this._a,e=this.inputs[1],f=this.inputs[0][0],g=(f-this._a)*this.rate.slopeFactor,h=0;b>h;h+=8)c[h]=a(d,e[h]),d+=g,c[h+1]=a(d,e[h+1]),d+=g,c[h+2]=a(d,e[h+2]),d+=g,c[h+3]=a(d,e[h+3]),d+=g,c[h+4]=a(d,e[h+4]),d+=g,c[h+5]=a(d,e[h+5]),d+=g,c[h+6]=a(d,e[h+6]),d+=g,c[h+7]=a(d,e[h+7]),d+=g;this._a=f}},s=function(a){return function(){this.outputs[0][0]=a(this.inputs[0][0],this.inputs[1][0])}},t=function(a){return function(b){for(var c=this.outputs[0],d=this._a,e=this.inputs[1],f=0;b>f;f+=8)c[f]=a(d,e[f]),c[f+1]=a(d,e[f+1]),c[f+2]=a(d,e[f+2]),c[f+3]=a(d,e[f+3]),c[f+4]=a(d,e[f+4]),c[f+5]=a(d,e[f+5]),c[f+6]=a(d,e[f+6]),c[f+7]=a(d,e[f+7])}},u=function(a){return function(b){if(b){var c=h(this,0,b),d=h(this,1,b);this.outputs[0][0]=isNaN(c)||isNaN(d)?0/0:a(c,d)}else i(this,0),i(this,1)}};n["+"]=function(a,b){return a+b},n["+"].aa=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=0;a>e;e+=8)b[e]=c[e]+d[e],b[e+1]=c[e+1]+d[e+1],b[e+2]=c[e+2]+d[e+2],b[e+3]=c[e+3]+d[e+3],b[e+4]=c[e+4]+d[e+4],b[e+5]=c[e+5]+d[e+5],b[e+6]=c[e+6]+d[e+6],b[e+7]=c[e+7]+d[e+7]},n["+"].ak=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._b,e=this.inputs[1][0],f=(e-this._b)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]+d,d+=f,b[g+1]=c[g+1]+d,d+=f,b[g+2]=c[g+2]+d,d+=f,b[g+3]=c[g+3]+d,d+=f,b[g+4]=c[g+4]+d,d+=f,b[g+5]=c[g+5]+d,d+=f,b[g+6]=c[g+6]+d,d+=f,b[g+7]=c[g+7]+d,d+=f;this._b=e},n["+"].ai=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._b,e=0;a>e;e+=8)b[e]=c[e]+d,b[e+1]=c[e+1]+d,b[e+2]=c[e+2]+d,b[e+3]=c[e+3]+d,b[e+4]=c[e+4]+d,b[e+5]=c[e+5]+d,b[e+6]=c[e+6]+d,b[e+7]=c[e+7]+d},n["+"].ka=function(a){for(var b=this.outputs[0],c=this._a,d=this.inputs[1],e=this.inputs[0][0],f=(e-this._a)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c+d[g],c+=f,b[g+1]=c+d[g+1],c+=f,b[g+2]=c+d[g+2],c+=f,b[g+3]=c+d[g+3],c+=f,b[g+4]=c+d[g+4],c+=f,b[g+5]=c+d[g+5],c+=f,b[g+6]=c+d[g+6],c+=f,b[g+7]=c+d[g+7],c+=f;this._a=e},n["+"].kk=function(){this.outputs[0][0]=this.inputs[0][0]+this.inputs[1][0]},n["+"].ia=function(a){for(var b=this.outputs[0],c=this._a,d=this.inputs[1],e=0;a>e;e+=8)b[e]=c+d[e],b[e+1]=c+d[e+1],b[e+2]=c+d[e+2],b[e+3]=c+d[e+3],b[e+4]=c+d[e+4],b[e+5]=c+d[e+5],b[e+6]=c+d[e+6],b[e+7]=c+d[e+7]},n["-"]=function(a,b){return a-b},n["-"].aa=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=0;a>e;e+=8)b[e]=c[e]-d[e],b[e+1]=c[e+1]-d[e+1],b[e+2]=c[e+2]-d[e+2],b[e+3]=c[e+3]-d[e+3],b[e+4]=c[e+4]-d[e+4],b[e+5]=c[e+5]-d[e+5],b[e+6]=c[e+6]-d[e+6],b[e+7]=c[e+7]-d[e+7]},n["-"].ak=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._b,e=this.inputs[1][0],f=(e-this._b)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]-d,d+=f,b[g+1]=c[g+1]-d,d+=f,b[g+2]=c[g+2]-d,d+=f,b[g+3]=c[g+3]-d,d+=f,b[g+4]=c[g+4]-d,d+=f,b[g+5]=c[g+5]-d,d+=f,b[g+6]=c[g+6]-d,d+=f,b[g+7]=c[g+7]-d,d+=f;this._b=e},n["-"].ai=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._b,e=0;a>e;e+=8)b[e]=c[e]-d,b[e+1]=c[e+1]-d,b[e+2]=c[e+2]-d,b[e+3]=c[e+3]-d,b[e+4]=c[e+4]-d,b[e+5]=c[e+5]-d,b[e+6]=c[e+6]-d,b[e+7]=c[e+7]-d},n["-"].ka=function(a){for(var b=this.outputs[0],c=this._a,d=this.inputs[1],e=this.inputs[0][0],f=(e-this._a)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c-d[g],c+=f,b[g+1]=c-d[g+1],c+=f,b[g+2]=c-d[g+2],c+=f,b[g+3]=c-d[g+3],c+=f,b[g+4]=c-d[g+4],c+=f,b[g+5]=c-d[g+5],c+=f,b[g+6]=c-d[g+6],c+=f,b[g+7]=c-d[g+7],c+=f;this._a=e},n["-"].kk=function(){this.outputs[0][0]=this.inputs[0][0]-this.inputs[1][0]},n["-"].ia=function(a){for(var b=this.outputs[0],c=this._a,d=this.inputs[1],e=0;a>e;e+=8)b[e]=c-d[e],b[e+1]=c-d[e+1],b[e+2]=c-d[e+2],b[e+3]=c-d[e+3],b[e+4]=c-d[e+4],b[e+5]=c-d[e+5],b[e+6]=c-d[e+6],b[e+7]=c-d[e+7]},n["*"]=function(a,b){return a*b},n["*"].aa=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=0;a>e;e+=8)b[e]=c[e]*d[e],b[e+1]=c[e+1]*d[e+1],b[e+2]=c[e+2]*d[e+2],b[e+3]=c[e+3]*d[e+3],b[e+4]=c[e+4]*d[e+4],b[e+5]=c[e+5]*d[e+5],b[e+6]=c[e+6]*d[e+6],b[e+7]=c[e+7]*d[e+7]},n["*"].ak=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._b,e=this.inputs[1][0],f=(e-this._b)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]*d,d+=f,b[g+1]=c[g+1]*d,d+=f,b[g+2]=c[g+2]*d,d+=f,b[g+3]=c[g+3]*d,d+=f,b[g+4]=c[g+4]*d,d+=f,b[g+5]=c[g+5]*d,d+=f,b[g+6]=c[g+6]*d,d+=f,b[g+7]=c[g+7]*d,d+=f;this._b=e},n["*"].ai=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._b,e=0;a>e;e+=8)b[e]=c[e]*d,b[e+1]=c[e+1]*d,b[e+2]=c[e+2]*d,b[e+3]=c[e+3]*d,b[e+4]=c[e+4]*d,b[e+5]=c[e+5]*d,b[e+6]=c[e+6]*d,b[e+7]=c[e+7]*d},n["*"].ka=function(a){for(var b=this.outputs[0],c=this._a,d=this.inputs[1],e=this.inputs[0][0],f=(e-this._a)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c*d[g],c+=f,b[g+1]=c*d[g+1],c+=f,b[g+2]=c*d[g+2],c+=f,b[g+3]=c*d[g+3],c+=f,b[g+4]=c*d[g+4],c+=f,b[g+5]=c*d[g+5],c+=f,b[g+6]=c*d[g+6],c+=f,b[g+7]=c*d[g+7],c+=f;this._a=e},n["*"].kk=function(){this.outputs[0][0]=this.inputs[0][0]*this.inputs[1][0]},n["*"].ia=function(a){for(var b=this.outputs[0],c=this._a,d=this.inputs[1],e=0;a>e;e+=8)b[e]=c*d[e],b[e+1]=c*d[e+1],b[e+2]=c*d[e+2],b[e+3]=c*d[e+3],b[e+4]=c*d[e+4],b[e+5]=c*d[e+5],b[e+6]=c*d[e+6],b[e+7]=c*d[e+7]},n["/"]=function(a,b){return 0===b?0:a/b},n["%"]=function(a,b){return 0===b?0:a%b},n.eq=function(a,b){return a===b?1:0},n.ne=function(a,b){return a!==b?1:0},n.lt=function(a,b){return b>a?1:0},n.gt=function(a,b){return a>b?1:0},n.le=function(a,b){return b>=a?1:0},n.ge=function(a,b){return a>=b?1:0},n.bitAnd=function(a,b){return a&b},n.bitOr=function(a,b){return a|b},n.bitXor=function(a,b){return a^b},n.min=function(a,b){return Math.min(a,b)},n.max=function(a,b){return Math.max(a,b)};var v=function(a,b,c){for(a=0|a,b=0|b;0!==b;)c=a%b,a=b,b=c;return Math.abs(a)};n.lcm=function(a,b){return 0===a&&0===b?0:Math.abs(a*b)/v(a,b)},n.gcd=function(a,b){return v(a,b)},n.round=function(a,b){return 0===b?a:Math.round(a/b)*b},n.roundUp=function(a,b){return 0===b?a:Math.ceil(a/b)*b},n.roundDown=function(a,b){return 0===b?a:Math.floor(a/b)*b},n.trunc=function(a,b){return 0===b?a:Math.floor(a/b)*b},n.atan2=function(a,b){return Math.atan2(a,b)},n.hypot=function(a,b){return Math.sqrt(a*a+b*b)},n.hypotApx=function(a,b){var c=Math.abs(a),d=Math.abs(b),e=Math.min(c,d);return c+d-(Math.sqrt(2)-1)*e},n.pow=function(a,b){return Math.pow(Math.abs(a),b)},n.leftShift=function(a,b){return 0>b?(0|a)>>(0|-b):(0|a)<<(0|b)},n.rightShift=function(a,b){return 0>b?(0|a)<<(0|-b):(0|a)>>(0|b)},n.unsignedRightShift=function(a,b){return 0>b?(0|a)<<(0|-b):(0|a)>>(0|b)},n.ring1=function(a,b){return a*b+a},n.ring2=function(a,b){return a*b+a+b},n.ring3=function(a,b){return a*a*b},n.ring4=function(a,b){return a*a*b-a*b*b},n.difsqr=function(a,b){return a*a-b*b},n.sumsqr=function(a,b){return a*a+b*b},n.sqrsum=function(a,b){return(a+b)*(a+b)},n.sqrdif=function(a,b){return(a-b)*(a-b)},n.absdif=function(a,b){return Math.abs(a-b)},n.thresh=function(a,b){return b>a?0:a},n.amclip=function(a,b){return.5*a*(b+Math.abs(b))},n.scaleneg=function(a,b){return b=.5*b+.5,(Math.abs(a)-a)*b+a},n.clip2=function(a,b){return Math.max(-b,Math.min(a,b))},n.excess=function(a,b){return a-Math.max(-b,Math.min(a,b))},n.fold2=function(a,b){var c,d,e;if(0===b)return 0;if(d=b+b,a>=b){if(a=d-a,a>=-b)return a}else{if(!(-b>a))return a;if(a=-d-a,b>a)return a}return e=d+d,c=a+b,c-=e*Math.floor(c/e),c>=d?e-c-b:c-b},n.wrap2=function(a,b){if(0===b)return 0;var c=2*b;if(a>=b){if(a-=c,b>a)return a}else{if(!(-b>a))return a;if(a+=c,a>=-b)return a}return a-c*Math.floor((a+b)/c)},Object.keys(n).forEach(function(a){var b=n[a];b.aa||(b.aa=o(b)),b.ak||(b.ak=p(b)),b.ai||(b.ai=q(b)),b.ka||(b.ka=r(b)),b.kk||(b.kk=s(b)),b.ia||(b.ia=t(b)),b.ki=b.kk,b.ik=b.kk,b.dd=u(b)}),d.unit.specs.Control=function(){var a=function(){this.process=1===this.numOfOutputs?b:c,this.process(1)},b=function(){this.outputs[0][0]=this.parent.controls[this.specialIndex]},c=function(){for(var a=this.parent.controls,b=this.outputs,c=b.length,d=0,e=this.specialIndex;c>d;++d,++e)b[d][0]=a[e]};return a}(),d.unit.specs.LagControl=function(){var a=function(){this.process=1===this.numOfOutputs?b:c;for(var a,d=this.numOfOutputs,e=this._y1=new Float32Array(d),g=this._b1=new Float32Array(d),h=this.parent.controls,i=this.inputs,j=this.rate.sampleRate,k=0;d>k;++k)e[k]=h[k],a=i[k][0],g[k]=0===a?0:Math.exp(f/(a*j));this.process(1)},b=function(){var a=this._y1,b=this._b1,c=this.parent.controls[this.specialIndex],d=c+b[0]*(a[0]-c);this.outputs[0][0]=a[0]=d},c=function(){var a,b,c,d,e=this.parent.controls,f=this.outputs,g=this.outputs.length,h=this._y1,i=this._b1;for(c=0,d=this.specialIndex;g>c;++c,++d)a=e[d],b=a+i[c]*(h[c]-a),f[c][0]=h[c]=b};return a}(),d.unit.specs.TrigControl=function(){var a=function(){this.process=1===this.numOfOutputs?b:c,this.process(1)},b=function(){var a=this.parent.controls,b=this.specialIndex;this.outputs[0][0]=a[b],a[b]=0},c=function(){for(var a=this.parent.controls,b=this.outputs,c=b.length,d=0,e=this.specialIndex;c>d;++d,++e)b[d][0]=a[e],a[e]=0};return a}(),d.unit.specs.Out=function(){var a=function(){this._bufLength=d.server.bufLength,2===this.calcRate?(this.process=b,this._busOffset=0):(this.process=c,this._busOffset=16*this._bufLength)},b=function(a,b){for(var c,d,e=this.inputs,f=b.bus,g=this._bufLength,h=(0|e[0][0])-1,i=1,j=e.length;j>i;++i){c=(h+i)*g,d=e[i];for(var k=0;a>k;k++)f[c+k]+=d[k]}},c=function(a,b){for(var c=this.inputs,d=b.bus,e=this._busOffset+(0|c[0][0])-1,f=1,g=c.length;g>f;++f)d[e+f]+=c[f][0]};return a}(),d.unit.specs.MulAdd=function(){var a=function(){if(3===this.calcRate)this.process=b[3];else{var a=this.inRates;this.process=b[a[0]][a[1]][a[2]],this._in=this.inputs[0][0],this._mul=this.inputs[1][0],this._add=this.inputs[2][0],this.process?this.process(1):this.outputs[0][0]=this._in*this._mul+this._add}},b={};return b[2]={},b[2][2]={},b[2][1]={},b[2][0]={},b[1]={},b[1][2]={},b[1][1]={},b[1][0]={},b[0]={},b[0][2]={},b[0][1]={},b[0][0]={},b[2][2][2]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=0;a>f;f+=8)b[f]=c[f]*d[f]+e[f],b[f+1]=c[f+1]*d[f+1]+e[f+1],b[f+2]=c[f+2]*d[f+2]+e[f+2],b[f+3]=c[f+3]*d[f+3]+e[f+3],b[f+4]=c[f+4]*d[f+4]+e[f+4],b[f+5]=c[f+5]*d[f+5]+e[f+5],b[f+6]=c[f+6]*d[f+6]+e[f+6],b[f+7]=c[f+7]*d[f+7]+e[f+7]},b[2][2][1]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this._add,f=this.inputs[2][0],g=(f-e)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d[h]+e,e+=g,b[h+1]=c[h+1]*d[h+1]+e,e+=g,b[h+2]=c[h+2]*d[h+2]+e,e+=g,b[h+3]=c[h+3]*d[h+3]+e,e+=g,b[h+4]=c[h+4]*d[h+4]+e,e+=g,b[h+5]=c[h+5]*d[h+5]+e,e+=g,b[h+6]=c[h+6]*d[h+6]+e,e+=g,b[h+7]=c[h+7]*d[h+7]+e,e+=g;this._add=f},b[2][2][0]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this._add,f=0;a>f;f+=8)b[f]=c[f]*d[f]+e,b[f+1]=c[f+1]*d[f+1]+e,b[f+2]=c[f+2]*d[f+2]+e,b[f+3]=c[f+3]*d[f+3]+e,b[f+4]=c[f+4]*d[f+4]+e,b[f+5]=c[f+5]*d[f+5]+e,b[f+6]=c[f+6]*d[f+6]+e,b[f+7]=c[f+7]*d[f+7]+e},b[2][1][2]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._mul,e=this.inputs[2],f=this.inputs[1][0],g=(f-d)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d+e[h],d+=g,b[h+1]=c[h+1]*d+e[h+1],d+=g,b[h+2]=c[h+2]*d+e[h+2],d+=g,b[h+3]=c[h+3]*d+e[h+3],d+=g,b[h+4]=c[h+4]*d+e[h+4],d+=g,b[h+5]=c[h+5]*d+e[h+5],d+=g,b[h+6]=c[h+6]*d+e[h+6],d+=g,b[h+7]=c[h+7]*d+e[h+7],d+=g;this._mul=f},b[2][1][1]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._mul,e=this._add,f=this.inputs[1][0],g=(f-d)*this.rate.slopeFactor,h=this.inputs[2][0],i=(h-e)*this.rate.slopeFactor,j=0;a>j;j+=8)b[j]=c[j]*d+e,d+=g,e+=i,b[j+1]=c[j+1]*d+e,d+=g,e+=i,b[j+2]=c[j+2]*d+e,d+=g,e+=i,b[j+3]=c[j+3]*d+e,d+=g,e+=i,b[j+4]=c[j+4]*d+e,d+=g,e+=i,b[j+5]=c[j+5]*d+e,d+=g,e+=i,b[j+6]=c[j+6]*d+e,d+=g,e+=i,b[j+7]=c[j+7]*d+e,d+=g,e+=i;this._mul=f,this._add=h},b[2][1][0]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._mul,e=this._add,f=this.inputs[1][0],g=(f-d)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d+e,d+=g,b[h+1]=c[h+1]*d+e,d+=g,b[h+2]=c[h+2]*d+e,d+=g,b[h+3]=c[h+3]*d+e,d+=g,b[h+4]=c[h+4]*d+e,d+=g,b[h+5]=c[h+5]*d+e,d+=g,b[h+6]=c[h+6]*d+e,d+=g,b[h+7]=c[h+7]*d+e,d+=g;this._mul=f},b[2][0][2]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._mul,e=this.inputs[2],f=0;a>f;f+=8)b[f]=c[f]*d+e[f],b[f+1]=c[f+1]*d+e[f+1],b[f+2]=c[f+2]*d+e[f+2],b[f+3]=c[f+3]*d+e[f+3],b[f+4]=c[f+4]*d+e[f+4],b[f+5]=c[f+5]*d+e[f+5],b[f+6]=c[f+6]*d+e[f+6],b[f+7]=c[f+7]*d+e[f+7]},b[2][0][1]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._mul,e=this._add,f=this.inputs[2][0],g=(f-e)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d+e,e+=g,b[h+1]=c[h+1]*d+e,e+=g,b[h+2]=c[h+2]*d+e,e+=g,b[h+3]=c[h+3]*d+e,e+=g,b[h+4]=c[h+4]*d+e,e+=g,b[h+5]=c[h+5]*d+e,e+=g,b[h+6]=c[h+6]*d+e,e+=g,b[h+7]=c[h+7]*d+e,e+=g;this._add=f},b[2][0][0]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._mul,e=this._add,f=this.inputs[1][0],g=(f-d)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]*d+e,d+=g,b[h+1]=c[h+1]*d+e,d+=g,b[h+2]=c[h+2]*d+e,d+=g,b[h+3]=c[h+3]*d+e,d+=g,b[h+4]=c[h+4]*d+e,d+=g,b[h+5]=c[h+5]*d+e,d+=g,b[h+6]=c[h+6]*d+e,d+=g,b[h+7]=c[h+7]*d+e,d+=g;this._mul=f},b[1][1][2]=function(a){for(var b=this.outputs[0],c=this._in,d=this._mul,e=this.inputs[2],f=this.inputs[0][0],g=(f-c)*this.rate.slopeFactor,h=this.inputs[1][0],i=(h-d)*this.rate.slopeFactor,j=0;a>j;j+=8)b[j]=c*d+e[j],c+=g,d+=i,b[j+1]=c*d+e[j+1],c+=g,d+=i,b[j+2]=c*d+e[j+2],c+=g,d+=i,b[j+3]=c*d+e[j+3],c+=g,d+=i,b[j+4]=c*d+e[j+4],c+=g,d+=i,b[j+5]=c*d+e[j+5],c+=g,d+=i,b[j+6]=c*d+e[j+6],c+=g,d+=i,b[j+7]=c*d+e[j+7],c+=g,d+=i;this._in=f,this._mul=h},b[1][1][1]=function(){this.outputs[0][0]=this.inputs[0][0]*this.inputs[1][0]+this.inputs[2][0]},b[1][1][0]=function(){this.outputs[0][0]=this.inputs[0][0]*this.inputs[1][0]+this._add},b[1][0][2]=function(a){for(var b=this.outputs[0],c=this._in,d=this._mul,e=this.inputs[2],f=this.inputs[0][0],g=(f-c)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c*d+e[h],c+=g,b[h+1]=c*d+e[h+1],c+=g,b[h+2]=c*d+e[h+2],c+=g,b[h+3]=c*d+e[h+3],c+=g,b[h+4]=c*d+e[h+4],c+=g,b[h+5]=c*d+e[h+5],c+=g,b[h+6]=c*d+e[h+6],c+=g,b[h+7]=c*d+e[h+7],c+=g;this._in=f},b[1][0][1]=function(){this.outputs[0][0]=this.inputs[0][0]*this._mul+this.inputs[2][0]},b[1][0][0]=function(){this.outputs[0][0]=this.inputs[0][0]*this._mul+this._add},b[3]=function(a){if(a){var b=h(this,0,a),c=h(this,1,a),d=h(this,2,a);this.outputs[0][0]=isNaN(b)||isNaN(c)||isNaN(d)?0/0:b*c+d}else i(this,0),i(this,1),i(this,2)},a}(),d.unit.specs.Sum3=function(){var a=function(){if(3===this.calcRate)this.process=b[3];else{var a=this.inRates;this.process=b[a[0]][a[1]][a[2]],this._in0=this.inputs[0][0],this._in1=this.inputs[1][0],this._in2=this.inputs[2][0],this.process?this.process(1):this.outputs[0][0]=this._in0+this._in1+this._in2}},b={};return b[2]={},b[2][2]={},b[2][1]={},b[2][0]={},b[1]={},b[1][1]={},b[1][0]={},b[0]={},b[0][0]={},b[2][2][2]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=0;a>f;f+=8)b[f]=c[f]+d[f]+e[f],b[f+1]=c[f+1]+d[f+1]+e[f+1],b[f+2]=c[f+2]+d[f+2]+e[f+2],b[f+3]=c[f+3]+d[f+3]+e[f+3],b[f+4]=c[f+4]+d[f+4]+e[f+4],b[f+5]=c[f+5]+d[f+5]+e[f+5],b[f+6]=c[f+6]+d[f+6]+e[f+6],b[f+7]=c[f+7]+d[f+7]+e[f+7]},b[2][2][1]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this._in2,f=this.inputs[2][0],g=(f-e)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]+d[h]+e,e+=g,b[h+1]=c[h+1]+d[h+1]+e,e+=g,b[h+2]=c[h+2]+d[h+2]+e,e+=g,b[h+3]=c[h+3]+d[h+3]+e,e+=g,b[h+4]=c[h+4]+d[h+4]+e,e+=g,b[h+5]=c[h+5]+d[h+5]+e,e+=g,b[h+6]=c[h+6]+d[h+6]+e,e+=g,b[h+7]=c[h+7]+d[h+7]+e,e+=g;this._in2=f},b[2][2][0]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this._in2,f=0;a>f;f+=8)b[f]=c[f]+d[f]+e,b[f+1]=c[f+1]+d[f+1]+e,b[f+2]=c[f+2]+d[f+2]+e,b[f+3]=c[f+3]+d[f+3]+e,b[f+4]=c[f+4]+d[f+4]+e,b[f+5]=c[f+5]+d[f+5]+e,b[f+6]=c[f+6]+d[f+6]+e,b[f+7]=c[f+7]+d[f+7]+e},b[2][1][1]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._in1+this._in2,e=this.inputs[1][0]+this.inputs[2][0],f=(e-d)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]+d,d+=f,b[g+1]=c[g+1]+d,d+=f,b[g+2]=c[g+2]+d,d+=f,b[g+3]=c[g+3]+d,d+=f,b[g+4]=c[g+4]+d,d+=f,b[g+5]=c[g+5]+d,d+=f,b[g+6]=c[g+6]+d,d+=f,b[g+7]=c[g+7]+d,d+=f;this._in1=this.inputs[1][0],this._in2=this.inputs[2][0]},b[2][1][0]=b[2][1][1],b[2][0][0]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._in1+this._in2,e=0;a>e;e+=8)b[e]=c[e]+d,b[e+1]=c[e+1]+d,b[e+2]=c[e+2]+d,b[e+3]=c[e+3]+d,b[e+4]=c[e+4]+d,b[e+5]=c[e+5]+d,b[e+6]=c[e+6]+d,b[e+7]=c[e+7]+d},b[1][1][1]=function(){this.outputs[0][0]=this.inputs[0][0]+this.inputs[1][0]+this.inputs[2][0]},b[1][1][0]=b[1][1][1],b[1][0][0]=b[1][1][1],b[3]=function(a){if(a){var b=h(this,0,a),c=h(this,1,a),d=h(this,2,a);this.outputs[0][0]=isNaN(b)||isNaN(c)||isNaN(d)?0/0:b+c+d}else i(this,0),i(this,1),i(this,2)},a}(),d.unit.specs.Sum4=function(){var a=function(){if(3===this.calcRate)this.process=b[3];else{var a=this.inRates;this.process=b[a[0]][a[1]][a[2]][a[3]],this._in0=this.inputs[0][0],this._in1=this.inputs[1][0],this._in2=this.inputs[2][0],this._in3=this.inputs[3][0],this.process?this.process(1):this.outputs[0][0]=this._in0*this._in1+this._in2+this._in3}},b={};return b[2]={},b[2][2]={},b[2][2][2]={},b[2][2][1]={},b[2][2][0]={},b[2][1]={},b[2][1][1]={},b[2][1][0]={},b[2][0]={},b[2][0][0]={},b[1]={},b[1][1]={},b[1][1][1]={},b[1][1][0]={},b[1][0]={},b[1][0][0]={},b[0]={},b[0][0]={},b[0][0][0]={},b[2][2][2][2]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=this.inputs[3],g=0;a>g;g+=8)b[g]=c[g]+d[g]+e[g]+f[g],b[g+1]=c[g+1]+d[g+1]+e[g+1]+f[g+1],b[g+2]=c[g+2]+d[g+2]+e[g+2]+f[g+2],b[g+3]=c[g+3]+d[g+3]+e[g+3]+f[g+3],b[g+4]=c[g+4]+d[g+4]+e[g+4]+f[g+4],b[g+5]=c[g+5]+d[g+5]+e[g+5]+f[g+5],b[g+6]=c[g+6]+d[g+6]+e[g+6]+f[g+6],b[g+7]=c[g+7]+d[g+7]+e[g+7]+f[g+7]},b[2][2][2][1]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=this._in3,g=this.inputs[3][0],h=(g-f)*this.rate.slopeFactor,i=0;a>i;i+=8)b[i]=c[i]+d[i]+e[i]+f,f+=h,b[i+1]=c[i+1]+d[i+1]+e[i+1]+f,f+=h,b[i+2]=c[i+2]+d[i+2]+e[i+2]+f,f+=h,b[i+3]=c[i+3]+d[i+3]+e[i+3]+f,f+=h,b[i+4]=c[i+4]+d[i+4]+e[i+4]+f,f+=h,b[i+5]=c[i+5]+d[i+5]+e[i+5]+f,f+=h,b[i+6]=c[i+6]+d[i+6]+e[i+6]+f,f+=h,b[i+7]=c[i+7]+d[i+7]+e[i+7]+f,f+=h;this._in3=g},b[2][2][2][0]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this.inputs[2],f=this._in3,g=0;a>g;g+=8)b[g]=c[g]+d[g]+e[g]+f,b[g+1]=c[g+1]+d[g+1]+e[g+1]+f,b[g+2]=c[g+2]+d[g+2]+e[g+2]+f,b[g+3]=c[g+3]+d[g+3]+e[g+3]+f,b[g+4]=c[g+4]+d[g+4]+e[g+4]+f,b[g+5]=c[g+5]+d[g+5]+e[g+5]+f,b[g+6]=c[g+6]+d[g+6]+e[g+6]+f,b[g+7]=c[g+7]+d[g+7]+e[g+7]+f},b[2][2][1][1]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this._in2+this._in3,f=this.inputs[2][0]+this.inputs[3][0],g=(f-e)*this.rate.slopeFactor,h=0;a>h;h+=8)b[h]=c[h]+d[h]+e,e+=g,b[h+1]=c[h+1]+d[h+1]+e,e+=g,b[h+2]=c[h+2]+d[h+2]+e,e+=g,b[h+3]=c[h+3]+d[h+3]+e,e+=g,b[h+4]=c[h+4]+d[h+4]+e,e+=g,b[h+5]=c[h+5]+d[h+5]+e,e+=g,b[h+6]=c[h+6]+d[h+6]+e,e+=g,b[h+7]=c[h+7]+d[h+7]+e,e+=g;this._in2=this.inputs[2][0],this._in3=this.inputs[2][0]},b[2][2][1][0]=b[2][2][1][1],b[2][2][0][0]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this.inputs[1],e=this._in2+this._in3,f=0;a>f;f+=8)b[f]=c[f]+d[f]+e,b[f+1]=c[f+1]+d[f+1]+e,b[f+2]=c[f+2]+d[f+2]+e,b[f+3]=c[f+3]+d[f+3]+e,b[f+4]=c[f+4]+d[f+4]+e,b[f+5]=c[f+5]+d[f+5]+e,b[f+6]=c[f+6]+d[f+6]+e,b[f+7]=c[f+7]+d[f+7]+e},b[2][1][1][1]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._in1+this._in2+this._in3,e=this.inputs[1][0]+this.inputs[2][0]+this.inputs[3][0],f=(e-d)*this.rate.slopeFactor,g=0;a>g;g+=8)b[g]=c[g]+d,d+=f,b[g+1]=c[g+1]+d,d+=f,b[g+2]=c[g+2]+d,d+=f,b[g+3]=c[g+3]+d,d+=f,b[g+4]=c[g+4]+d,d+=f,b[g+5]=c[g+5]+d,d+=f,b[g+6]=c[g+6]+d,d+=f,b[g+7]=c[g+7]+d,d+=f;this._in1=this.inputs[1][0],this._in2=this.inputs[2][0],this._in3=this.inputs[3][0]},b[2][1][1][0]=b[2][1][1][1],b[2][1][0][0]=b[2][1][1][1],b[2][0][0][0]=function(a){for(var b=this.outputs[0],c=this.inputs[0],d=this._in1+this._in2+this._in3,e=0;a>e;e+=8)b[e]=c[e]+d,b[e+1]=c[e+1]+d,b[e+2]=c[e+2]+d,b[e+3]=c[e+3]+d,b[e+4]=c[e+4]+d,b[e+5]=c[e+5]+d,b[e+6]=c[e+6]+d,b[e+7]=c[e+7]+d},b[1][1][1][1]=function(){this.outputs[0][0]=this.inputs[0][0]+this.inputs[1][0]+this.inputs[2][0]+this.inputs[3][0]},b[1][1][1][0]=b[1][1][1][1],b[1][1][0][0]=b[1][1][1][1],b[1][0][0][0]=b[1][1][1][1],b[3]=function(a){if(a){var b=h(this,0,a),c=h(this,1,a),d=h(this,2,a),e=h(this,3,a);this.outputs[0][0]=isNaN(b)||isNaN(c)||isNaN(d)||isNaN(e)?0/0:b+c+d+e}else i(this,0),i(this,1),i(this,2),i(this,3)},a}(),c.exports={uopFunc:j,unary_k:k,unary_a:l,bopFunc:n,binary_aa:o,binary_ak:p,binary_ai:q,binary_ka:r,binary_kk:s,binary_ia:t}});var f=c("cc/cc","cc/loader");"undefined"!=typeof module&&(module.exports=f)}(this.self||global);